<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ç»§åˆšçš„åšå®¢</title>
  <subtitle>ä¸ç–¯é­”,ä¸æˆæ´»</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://madordie.github.io/"/>
  <updated>2019-07-10T08:02:39.695Z</updated>
  <id>https://madordie.github.io/</id>
  
  <author>
    <name>ç»§åˆš</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Ubuntuä½¿ç”¨SakuraFrpå®ç°å†…ç½‘ç©¿é€</title>
    <link href="https://madordie.github.io/post/ubuntu-sakura-frp/"/>
    <id>https://madordie.github.io/post/ubuntu-sakura-frp/</id>
    <published>2019-07-08T16:00:00.000Z</published>
    <updated>2019-07-10T08:02:39.695Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>è®°å½•å°†ä¸€å°åƒç°çš„ç¬”è®°æœ¬æ”¹è£…æˆæœåŠ¡å™¨ï¼Œå¹¶æš´éœ²åœ¨å…¬ç½‘ä¸‹çš„è¿‡ç¨‹ã€‚</p>
<a id="more"></a>
<h1 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h1><ul>
<li>ä¸€ä¸ª ubuntu-18.04.2-desktop-amd64.iso</li>
<li>ä¸€å°é™ˆæ—§çš„Gatewayç¬”è®°æœ¬</li>
<li>ä¸€å°ä¸»æˆ˜MBP</li>
</ul>
<p>iso: å¦‚æœä»<a href="https://ubuntu.com/download/desktop" target="_blank" rel="noopener">å®˜ç½‘</a>ä¸‹è½½é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œå¯ä»¥è€ƒè™‘ä¸Š<code>wget</code>ã€è¿…é›·ã€‚æˆ‘è¿™é‡Œä½¿ç”¨äº†<code>wget</code>å¹¶ä¸”ä½¿ç”¨äº†<a href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-cdimage/ubuntu/releases/" target="_blank" rel="noopener">æ¸…åçš„é•œåƒ</a></p>
<p>Gateway: è¿˜æ˜¯ä¸ªwin10ï¼Œäºæ˜¯ä¹é¡ºæ‰‹å°±æŠŠ<code>ubuntu-18.04.2-desktop-amd64.iso</code>åˆ¶ä½œæˆäº†Uç›˜ï¼Œæ­¤å¤„æˆ‘å°±ä¸è¯´äº†ï¼Œåæ­£èƒ½å¼•å¯¼è¿›å»å°±è¡Œå•Šå“ˆå“ˆå“ˆ</p>
<p>MBP: ä¸»è¦å·¥ä½œåœ¨è¿™é‡Œã€‚æ¯”å¦‚è¿œç¨‹winæ¡Œé¢ç”¨çš„æ˜¯<a href="https://apps.apple.com/us/app/microsoft-remote-desktop/id1295203466?mt=12" target="_blank" rel="noopener">Microsoft Remote Desktop</a></p>
<h1 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h1><p>æ³¨æ„ï¼ŒUbuntuä¼šå°†ç¡¬ç›˜ <strong>æ‰€æœ‰åˆ†åŒºå…¨éƒ¨æ ¼å¼åŒ–</strong> ï¼Œè¯·å…ˆå¦¥å–„å¤‡ä»½ã€‚</p>
<p>ç»è¿‡å®‰è£…æç¤ºä»¥åŠç¬”è®°æœ¬çš„ç–¯ç‹‚å‘çƒ­å¾ˆå¿«å°±å®‰è£…å®Œäº‹äº†ã€‚</p>
<p>PS. å®‰è£…Wi-Fié©±åŠ¨ï¼Œè®°å¾—é‡å¯å“¦ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install bcmwl-kernel-source</span><br></pre></td></tr></table></figure>
<h2 id="è®¾ç½®Ubuntuè½¯ä»¶æº"><a href="#è®¾ç½®Ubuntuè½¯ä»¶æº" class="headerlink" title="è®¾ç½®Ubuntuè½¯ä»¶æº"></a>è®¾ç½®Ubuntuè½¯ä»¶æº</h2><p>è¿™é‡Œè¿˜æ˜¯ç”¨æ¸…åå¤§å­¦çš„é•œåƒï¼Œå…¶<a href="https://mirror.tuna.tsinghua.edu.cn/help/ubuntu/" target="_blank" rel="noopener">Ubuntu é•œåƒä½¿ç”¨å¸®åŠ©</a>ä¹Ÿæ˜¯ç›¸å½“çš„è¯¦ç»†ï¼š</p>
<blockquote>
<p>Ubuntu çš„è½¯ä»¶æºé…ç½®æ–‡ä»¶æ˜¯ /etc/apt/sources.listã€‚å°†ç³»ç»Ÿè‡ªå¸¦çš„è¯¥æ–‡ä»¶åšä¸ªå¤‡ä»½ï¼Œå°†è¯¥æ–‡ä»¶æ›¿æ¢ä¸ºä¸‹é¢å†…å®¹ï¼Œå³å¯ä½¿ç”¨ TUNA çš„è½¯ä»¶æºé•œåƒã€‚</p>
<p>é€‰æ‹©ä½ çš„ubuntuç‰ˆæœ¬: 18.04 LTS<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># é»˜è®¤æ³¨é‡Šäº†æºç é•œåƒä»¥æé«˜ apt update é€Ÿåº¦ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Š</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line"></span><br><span class="line"># é¢„å‘å¸ƒè½¯ä»¶æºï¼Œä¸å»ºè®®å¯ç”¨</span><br><span class="line"># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="æ›´æ–°"><a href="#æ›´æ–°" class="headerlink" title="æ›´æ–°"></a>æ›´æ–°</h2><p><code>apt</code>å·²ç»ç›¸å½“å®Œå–„ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt dist-upgrade</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œåˆ«å¿˜äº†å®‰è£…<code>wget</code>:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install wget</span><br></pre></td></tr></table></figure>
<p>æ­¤å¤„å¦‚æœæŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤å·²ç»è®¾ç½®äº†æ¸…åå¤§å­¦çš„é•œåƒæºï¼Œé‚£é€Ÿåº¦å°†ä¼šå¾ˆå¿«ã€‚è¦ä¸ç„¶å°±å¾ˆæ…¢æ…¢æ…¢ã€‚ã€‚</p>
<h1 id="å†…ç½‘ç©¿é€"><a href="#å†…ç½‘ç©¿é€" class="headerlink" title="å†…ç½‘ç©¿é€"></a>å†…ç½‘ç©¿é€</h1><p>å°†<code>å†…ç½‘ç©¿é€</code>æ”¾åœ¨Googleé‡Œé¢æœç´¢ä¸€ä¸‹ä¼šæœ‰å¾ˆå¤šæ–¹æ¡ˆï¼Œæˆ‘çš„VPSè¢«é‚»å±…è¿ç´¯ä¹‹åå°±æ²¡æœ‰å†ä¹°ï¼Œæ‰€ä»¥æˆ‘æ²¡æœ‰åŸŸåã€å…¬ç½‘IPã€‚ã€‚ã€‚å…¶ä¸­æœç´¢ç»“æœçš„å¤§éƒ¨åˆ†éƒ½ä¸é€‚åˆæˆ‘ã€‚</p>
<p>å…¶ä¸­å¤§éƒ¨åˆ†æåˆ°ä¸€ä¸ª<code>DDNS</code>çš„æ¦‚å¿µï¼š<a href="https://zh.wikipedia.org/wiki/%E5%8B%95%E6%85%8BDNS" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘:åŠ¨æ€DNS</a></p>
<blockquote>
<p>åŠ¨æ€DNSï¼ˆè‹±è¯­ï¼šDynamic DNSï¼Œç®€ç§°DDNSï¼‰æ˜¯åŸŸåç³»ç»Ÿï¼ˆDNSï¼‰ä¸­çš„ä¸€ç§è‡ªåŠ¨æ›´æ–°åç§°æœåŠ¡å™¨ï¼ˆName serverï¼‰å†…å®¹çš„æŠ€æœ¯ã€‚æ ¹æ®äº’è”ç½‘çš„åŸŸåè®¢ç«‹è§„åˆ™ï¼ŒåŸŸåå¿…é¡»è·Ÿä»å›ºå®šçš„IPåœ°å€ã€‚ä½†åŠ¨æ€DNSç³»ç»Ÿä¸ºåŠ¨æ€ç½‘åŸŸæä¾›ä¸€ä¸ªå›ºå®šçš„åç§°æœåŠ¡å™¨ï¼ˆName serverï¼‰ï¼Œé€è¿‡å³æ—¶æ›´æ–°ï¼Œä½¿å¤–ç•Œç”¨æˆ·èƒ½å¤Ÿè¿ä¸ŠåŠ¨æ€ç”¨æˆ·çš„ç½‘å€ã€‚</p>
</blockquote>
<p>äº†è§£ç©è¿™ä¸ªä¹‹åå°±å¯ä»¥æœç´¢å¹¶é€‰æ‹©DDMSæ–¹æ¡ˆäº†ã€‚</p>
<p>å†æ˜ç¡®ä¸€ä¸‹ç›®æ ‡ï¼šåœ¨å¤–ç½‘sshè¿›å†…ç½‘æˆ‘ä»¬åˆšå»ºå¥½çš„Ubuntuã€‚</p>
<h2 id="TPDDNS"><a href="#TPDDNS" class="headerlink" title="TPDDNS"></a>TPDDNS</h2><p>ä¸è¿‡æˆ‘å®¶é‡Œçš„è·¯ç”±æ˜¯<a href="https://www.tp-link.com.cn/" target="_blank" rel="noopener">TP-LINK</a>çš„ï¼ŒTP-LINKæ˜¯å¯ä»¥å‚è€ƒ<a href="https://service.tp-link.com.cn/detail_article_2978.html" target="_blank" rel="noopener">TPDDNSçš„ä½¿ç”¨æ–¹æ³•ä»‹ç»</a>å¯ä»¥ç›´æ¥ä½¿ç”¨çš„ã€‚</p>
<p>ä¸è¿‡å‘æ¯”çš„äº‹æƒ…æ˜¯[TPDDNS]æ”¯æŒçš„ç¡¬ä»¶ç‰ˆæœ¬æ˜¯4.0ã€‚å‚è€ƒ<a href="https://service.tp-link.com.cn/detail_article_1420.html" target="_blank" rel="noopener">å¦‚ä½•æŸ¥çœ‹äº§å“å‹å·ä¸ç¡¬ä»¶ç‰ˆæœ¬ï¼Ÿ</a>ï¼Œä¹Ÿå°±æ˜¯å…¶<code>ver 4.0</code>ä¹‹ä¸Šæ˜¯å¯ä»¥çš„ã€‚</p>
<p>æœ€å¥½æ˜¯é—®ä¸€ä¸‹<code>TP-LINK åœ¨çº¿å®¢æœ</code>ï¼Œä¸€èˆ¬ æŸçŒ«ã€æŸç‹—ä¸Šé¢çš„å®¢æœæ˜¯ä¸æ‡‚è¿™ä¸ªçš„ã€‚</p>
<p>å¾ˆæ˜¾ç„¶æˆ‘å®¶é‡Œçš„è·¯ç”±æ˜¯V3.0 å•Šå“ˆå“ˆå“ˆ æ­¤æ–¹æ¡ˆæˆ‘è¿™é‡Œä¸é€‚ç”¨ã€‚ä¸è¿‡çœ‹ä¸Šé¢çš„æ•™ç¨‹å·²ç»å¾ˆè¯¦å°½äº†ï¼Œåº”è¯¥æ¯”è¾ƒå¥½æã€‚</p>
<h2 id="Sakura-Frp"><a href="#Sakura-Frp" class="headerlink" title="Sakura Frp"></a>Sakura Frp</h2><p>è¿™ä¸ªæ®<a href="https://www.natfrp.org/" target="_blank" rel="noopener">å®˜ç½‘</a>ä»‹ç»æ˜¯è¿™æ ·çš„ï¼š</p>
<blockquote>
<p>ç®€å•æ–¹ä¾¿<br>å®¢æˆ·ç«¯åŸºäº Fatedier Frp ä¿®æ”¹ï¼Œå…å»äº†é…ç½®æ–‡ä»¶ï¼Œæ”¹ä¸ºä»ç½‘ç»œè¯»å–é…ç½®ï¼Œæ‚¨åªéœ€è¦åœ¨ç½‘ç«™ä¸Šç®€å•æ“ä½œå³å¯æ·»åŠ æ˜ å°„ã€‚</p>
<p>å®Œå…¨å…è´¹<br>æ‚¨ä¸å¿…å†ä¸ºäº†å†…ç½‘ç©¿é€å¤šèŠ±ä¸€åˆ†é’±ï¼ŒSakura Frp æ˜¯æ°¸è¿œå…è´¹çš„ï¼Œæˆ‘ä»¬åªä¸ºäº†è®©æ›´å¤šäººèƒ½ä½“éªŒåˆ°å…è´¹ã€å¥½ç”¨çš„å†…ç½‘ç©¿é€ã€‚</p>
<p>è‡ªç”±ä½¿ç”¨<br>æˆ‘ä»¬éå¸¸æ¬¢è¿æ‚¨å°† Sakura Frp é›†æˆåˆ°è‡ªå·±çš„è½¯ä»¶ä¸­ï¼Œå¹¶ä¸”æˆ‘ä»¬æä¾›äº†å¤šç§ API æ¥å£ä»¥ä¾›ä½¿ç”¨ï¼Œå®Œå…¨æ²¡æœ‰ä½¿ç”¨é™åˆ¶ã€‚</p>
</blockquote>
<p>å¥½äº†ï¼Œé€‚åˆæˆ‘è¿™ç§ä¸æ„¿æ„èŠ±é’±çš„ç©·å±Œä¸ï¼Œæ¥<a href="https://openid.natfrp.org/?action=register&amp;src=www.natfrp.com" target="_blank" rel="noopener">æ³¨å†Œ</a>å§ã€‚ã€‚</p>
<p>ç™»å½•è¿›å»æ‰å‘ç°ï¼Œå¥½å¤šæ–‡å­—ã€‚æ²¡æœ‰æ˜æ˜¾çš„æ–°æ‰‹æ•™ç¨‹ï¼Œå¯¹æˆ‘è¿™ç§ä¸æ˜¯å¾ˆæ‡‚<code>FRP</code>çš„äººæ¥è¯´ç®€ç›´ä¸€è„¸æ‡µé€¼ã€‚</p>
<h2 id="åˆ›å»ºæ˜ å°„"><a href="#åˆ›å»ºæ˜ å°„" class="headerlink" title="åˆ›å»ºæ˜ å°„"></a>åˆ›å»ºæ˜ å°„</h2><p><a href="https://www.natfrp.com/page/panel/" target="_blank" rel="noopener">æ˜ å°„åˆ—è¡¨</a>ä¸­çš„<code>ç¤ºä¾‹æ˜ å°„ - Linux SSH</code>æ­£åˆæˆ‘æ„ï¼Œç„¶ååªéœ€è¦å†ç‚¹ä¸€ä¸‹<code>éšæœºç«¯å£</code>å°±å¯ä»¥ä¸ç”¨è¾“å…¥ç›´æ¥ç‚¹æ·»åŠ äº†ã€‚</p>
<p><img src="/images/2019-07-09-13-43-31.png" alt="Linux SSH å¹¶éšæœºç«¯å£"></p>
<p><img src="/images/2019-07-09-13-44-25.png" alt="å·²æ·»åŠ çš„éš§é“åˆ—è¡¨"></p>
<p>è‡³æ­¤ç¬¬ä¸€ä¸ªæ˜ å°„å·²ç»åˆ›å»ºäº†ï¼Œç„¶åéœ€è¦å»Ubuntuä¸Šå¼€å¯ä»£ç†å§</p>
<h2 id="å¼€å¯ä»£ç†"><a href="#å¼€å¯ä»£ç†" class="headerlink" title="å¼€å¯ä»£ç†"></a>å¼€å¯ä»£ç†</h2><p>åœ¨<a href="https://www.natfrp.com/page/panel/" target="_blank" rel="noopener">å®¢æˆ·è½¯ä»¶</a>ä¸­æ‰¾åˆ°é€‚åˆè‡ªå·±çš„<code>Linux x64 (64ä½æ“ä½œç³»ç»Ÿ)</code>åŒ…å¹¶ä¸‹è½½è‡³Ubuntu:</p>
<p>æ­¤å¤„å°†åŒ…ä¸‹è½½è‡³<code>/opt/natfrp</code>(è¯¥è·¯å¾„å°†åœ¨åé¢çš„é…ç½®ä¸­ä½¿ç”¨)</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /opt/natfrp &amp;&amp; <span class="built_in">cd</span> /opt/natfrp</span><br><span class="line">sudo wget https://cdn.tcotp.cn:4443/client/Sakura_frpc_linux_amd64.tar.gz</span><br><span class="line">sudo tar zxvf Sakura_frpc_linux_amd64.tar.gz</span><br></pre></td></tr></table></figure>
<p>è§£å‹å®Œæˆåï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶<code>Sakura_frpc_linux_amd64</code>(è¯¥æ–‡ä»¶åå°†åœ¨åé¢çš„é…ç½®ä¸­ä½¿ç”¨)</p>
<p>æ ¹æ®<a href="https://www.zerobbs.net/?s=viewpost&amp;tid=5" target="_blank" rel="noopener">Linux å°† Sakura Frp è®¾ç½®ä¸ºæœåŠ¡ï¼Œå¼€æœºè‡ªåŠ¨å¯åŠ¨</a>çš„æ•™ç¨‹æ“ä½œå¦‚ä¸‹ï¼š</p>
<h3 id="åˆ›å»ºservice"><a href="#åˆ›å»ºservice" class="headerlink" title="åˆ›å»ºservice"></a>åˆ›å»ºservice</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/systemd/system/sakurafrp.service</span><br></pre></td></tr></table></figure>
<h3 id="æ ¹æ®è‡ªå·±çš„é…ç½®å†™å…¥service"><a href="#æ ¹æ®è‡ªå·±çš„é…ç½®å†™å…¥service" class="headerlink" title="æ ¹æ®è‡ªå·±çš„é…ç½®å†™å…¥service"></a>æ ¹æ®è‡ªå·±çš„é…ç½®å†™å…¥service</h3><p><code>/opt/natfrp/</code>: Sakura_frpc_linux_amd64çš„å…¨è·¯å¾„<br><code>/opt/natfrp/Sakura_frpc_linux_amd64</code>: è§£å‹ä¹‹åçš„Sakura_frpc_linux_amd64å…¨è·¯å¾„<br><code>--sid=</code>: æœåŠ¡å™¨åˆ—è¡¨ä¸­å·¦ä¾§çš„æ•°å­—</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Sakura Frp Client</span><br><span class="line">Wants=network-online.target</span><br><span class="line">After=network-online.target</span><br><span class="line">[Service]</span><br><span class="line">User=root</span><br><span class="line">WorkingDirectory=/opt/natfrp/</span><br><span class="line">LimitNOFILE=4096</span><br><span class="line">PIDFile=/var/run/sakurafrp/client.pid</span><br><span class="line">ExecStart=/opt/natfrp/Sakura_frpc_linux_amd64 --su=ä½ çš„è´¦å· --sp=ä½ çš„å¯†ç  --sid=ä½ è¦é€‰æ‹©çš„æœåŠ¡å™¨çš„ID(å°±æ˜¯æœåŠ¡å™¨åˆ—è¡¨å·¦ä¾§çš„æ•°å­—)</span><br><span class="line">Restart=on-failure</span><br><span class="line">StartLimitInterval=600</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>
<p>sidä¿¡æ¯[2019.7.9:14:10]:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">|======================================================================================================</span><br><span class="line">| ID	åç§°		çŠ¶æ€		ä»‹ç»</span><br><span class="line">|======================================================================================================</span><br><span class="line">| 1	å®æ³¢ç”µä¿¡	âˆš åœ¨çº¿		é«˜é˜²çº¿è·¯ï¼Œé€‚åˆæ­ Minecraft æœåŠ¡å™¨ï¼Œä½¿ç”¨äººæ•°è¾ƒå¤š (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 2	å®æ³¢è”é€š	âˆš åœ¨çº¿		è”é€šçº¿è·¯ï¼Œé˜²å¾¡ 20Gï¼Œé€‚åˆéƒ¨åˆ†ç§»åŠ¨è”é€š/ç”¨æˆ·ä½¿ç”¨ (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 3	å¾å·ç”µä¿¡	âˆš åœ¨çº¿		å¾å·é«˜é˜²ç”µä¿¡ï¼Œé€‚åˆå¼€æœï¼Œæœˆæµé‡å›ºå®š 500Gï¼Œè¯·åˆç†ä½¿ç”¨ (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 4	è´µå·ç”µä¿¡	Ã— ç¦»çº¿		è´µå·ç”µä¿¡èŠ‚ç‚¹ï¼Œæ— é˜²å¾¡ï¼Œé€‚åˆå°æµé‡ä¼ è¾“æœåŠ¡[è¶…æµé‡åœæœº] (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 6	ç½—é©¬å°¼äºš	Ã— ç¦»çº¿		ç½—é©¬å°¼äºšä¸é™å†…å®¹æ— è§† DMCA ç‰ˆæƒæœåŠ¡å™¨ï¼Œå…å¤‡æ¡ˆ (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 7	æ—¥æœ¬åƒå…†	âˆš åœ¨çº¿		æ—¥æœ¬åƒå…†æœåŠ¡å™¨ï¼Œé€‚åˆå»ºç«™ï¼Œå…å¤‡æ¡ˆ (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 8	å°æ¹¾ç™¾å…†	âˆš åœ¨çº¿		å°æ¹¾è°·æ­Œäº‘ 100M æœåŠ¡å™¨ï¼Œé€‚åˆå»ºç«™ï¼Œå»¶è¿Ÿè¾ƒä½ï¼Œå…å¤‡æ¡ˆ (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 9	é¦™æ¸¯çº¿è·¯1 âˆš åœ¨çº¿		é¦™æ¸¯ StarryDNS 100M æœåŠ¡å™¨ï¼Œé€‚åˆå»ºç«™ (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 10	æ±Ÿè‹é•‡æ±Ÿ	âˆš åœ¨çº¿		æ±Ÿè‹é•‡æ±Ÿ 100M æœåŠ¡å™¨ï¼ŒBGP å…¨å›½ä¼˜åŒ–çº¿è·¯ï¼Œé€‚åˆå¼€æœ (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 12	æ²³å—ç”µä¿¡	âˆš åœ¨çº¿		æ²³å—ç”µä¿¡çº¿è·¯æœåŠ¡å™¨ï¼Œé€‚åˆå¼€æœä»¥åŠå°æµé‡æœåŠ¡ (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 13	é¦™æ¸¯çº¿è·¯2 âˆš åœ¨çº¿		é¦™æ¸¯è°·æ­Œäº‘ 100M æœåŠ¡å™¨ï¼Œé€‚åˆå»ºç«™ï¼Œå…å¤‡æ¡ˆ (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 30	æ´›æ‰çŸ¶01	âˆš åœ¨çº¿		ç¾å›½æ´›æ‰çŸ¶åƒå…†æœåŠ¡å™¨ï¼Œé€‚åˆå»ºç«™ï¼Œå…å¤‡æ¡ˆ çº¿è·¯ 1 (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 31	æ´›æ‰çŸ¶02	âˆš åœ¨çº¿		ç¾å›½æ´›æ‰çŸ¶åƒå…†æœåŠ¡å™¨ï¼Œé€‚åˆå»ºç«™ï¼Œå…å¤‡æ¡ˆ çº¿è·¯ 2 (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 32	æ´›æ‰çŸ¶03	âˆš åœ¨çº¿		ç¾å›½æ´›æ‰çŸ¶åƒå…†æœåŠ¡å™¨ï¼Œé€‚åˆå»ºç«™ï¼Œå…å¤‡æ¡ˆ çº¿è·¯ 3 (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 33	æ´›æ‰çŸ¶04	âˆš åœ¨çº¿		ç¾å›½æ´›æ‰çŸ¶åƒå…†æœåŠ¡å™¨ï¼Œé€‚åˆå»ºç«™ï¼Œå…å¤‡æ¡ˆ çº¿è·¯ 4 (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 34	æ´›æ‰çŸ¶05	âˆš åœ¨çº¿		ç¾å›½æ´›æ‰çŸ¶åƒå…†æœåŠ¡å™¨ï¼Œé€‚åˆå»ºç«™ï¼Œå…å¤‡æ¡ˆ çº¿è·¯ 5 (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 38	æ–°åŠ å¡01	Ã— ç¦»çº¿		æ–°åŠ å¡é˜¿é‡Œäº‘ 30M æœåŠ¡å™¨ï¼Œé€‚åˆå»ºç«™ï¼Œå…å¤‡æ¡ˆ (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 39	è’™ç‰¹åˆ©å°”	âˆš åœ¨çº¿		åŠ æ‹¿å¤§è’™ç‰¹åˆ©å°”è°·æ­Œäº‘ 100M æœåŠ¡å™¨ï¼Œé€‚åˆå»ºç«™ï¼Œå…å¤‡æ¡ˆ (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 43	é¦™æ¸¯ç§»åŠ¨	Ã— ç¦»çº¿		é¦™æ¸¯ UOvZ 100M ç§»åŠ¨æœåŠ¡å™¨ï¼Œé€‚åˆå»ºç«™ï¼Œå…å¤‡æ¡ˆ[æœºæˆ¿æ–­ç½‘ç»´æŠ¤ä¸­] (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 45	ç¾å›½çº½çº¦1 âˆš åœ¨çº¿		ç¾å›½çº½çº¦ç™¾å…†æœåŠ¡å™¨ï¼Œé€‚åˆå»ºç«™ï¼Œå…å¤‡æ¡ˆ çº¿è·¯1 (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 46	ç¾å›½çº½çº¦2 âˆš åœ¨çº¿		ç¾å›½çº½çº¦ç™¾å…†æœåŠ¡å™¨ï¼Œé€‚åˆå»ºç«™ï¼Œå…å¤‡æ¡ˆ çº¿è·¯2 (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">| 47	æ—¥æœ¬é•¿é‡	Ã— ç¦»çº¿		æ—¥æœ¬é•¿é‡ç™¾å…†æœåŠ¡å™¨ï¼Œé€‚åˆå»ºç«™ï¼Œå…å¤‡æ¡ˆ (å®˜æ–¹æœåŠ¡å™¨)</span><br><span class="line">|======================================================================================================</span><br></pre></td></tr></table></figure></p>
<h3 id="å¯åŠ¨service"><a href="#å¯åŠ¨service" class="headerlink" title="å¯åŠ¨service"></a>å¯åŠ¨service</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure>
<p>æœåŠ¡å°±åˆ›å»ºæˆåŠŸäº†ï¼Œæ¥ä¸‹æ¥å¯åŠ¨æœåŠ¡ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start sakurafrp</span><br></pre></td></tr></table></figure></p>
<p>å°†æœåŠ¡è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> sakurafrp</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœè¦åœæ­¢è¿è¡Œå®¢æˆ·ç«¯ï¼Œåªéœ€è¦è¾“å…¥<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop sakurafrp</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœè¦ç¦æ­¢å¼€æœºå¯åŠ¨ï¼Œè¾“å…¥<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">disable</span> sakurafrp</span><br></pre></td></tr></table></figure></p>
<p>è‡³æ­¤ï¼Œæ¥è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹å½“å‰çš„çŠ¶æ€ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">â•°â”€&gt;$ sudo systemctl status sakurafrp</span><br><span class="line">â— sakurafrp.service - Sakura Frp Client</span><br><span class="line">   Loaded: loaded (/etc/systemd/system/sakurafrp.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: active (running) since Tue 2019-07-09 11:07:19 CST; 3h 13min ago</span><br><span class="line"> Main PID: 3301 (Sakura_frpc_lin)</span><br><span class="line">    Tasks: 10 (<span class="built_in">limit</span>: 4915)</span><br><span class="line">   Memory: 5.9M</span><br><span class="line">   CGroup: /system.slice/sakurafrp.service</span><br><span class="line">           â””â”€3301 /opt/natfrp/Sakura_frpc_linux_amd64 --su=xxxxxxxx --sp=xxxxxxxx --sid=xxx</span><br><span class="line"></span><br><span class="line">7æœˆ 09 11:07:20 madordie-NV47H Sakura_frpc_linux_amd64[3301]: &gt;é…ç½®æ–‡ä»¶è½½å…¥æˆåŠŸ</span><br><span class="line">7æœˆ 09 11:07:20 madordie-NV47H Sakura_frpc_linux_amd64[3301]: 2019/07/09 11:07:20 [I] [proxy_manager.go:322] å¢åŠ ä»£ç†: [xxx.natfrp.org:22941        29795-87248]</span><br><span class="line">7æœˆ 09 11:07:20 madordie-NV47H Sakura_frpc_linux_amd64[3301]: 2019/07/09 11:07:20 [I] [control.go:242] [d54792913cdac17d] ç™»å½•æˆåŠŸ, è·å–åˆ°è¿è¡ŒID [d54792913cdac17d], server udp port [7001]</span><br><span class="line">7æœˆ 09 11:07:20 madordie-NV47H Sakura_frpc_linux_amd64[3301]: 2019/07/09 11:07:20 [I] [control.go:167] [d54792913cdac17d] [xxx.natfrp.org:22941        29795-87248] å¯åŠ¨ä»£ç†æˆåŠŸ</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°<code>[xxx.natfrp.org:22941        29795-87248] å¯åŠ¨ä»£ç†æˆåŠŸ</code></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯é€‰ç”¨çš„sidä¸ä¸€æ ·å…¶ä»£ç†çš„åŸŸåä¹Ÿä¸ä¸€æ ·ã€‚è¿™ä¸ªæ˜¯å¾ˆæ˜¾ç„¶çš„ï¼Œä½†æ˜¯æ˜¯å®¹æ˜“å¿½ç•¥çš„ã€‚</p>
<h1 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h1><p>åœ¨MBPä¸ŠéªŒè¯ä¸€ä¸‹<code>xxx.natfrp.org:22941</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">â•°â”€&gt;$ ssh -p 22941 madordie@xxx.natfrp.org</span><br><span class="line">Welcome to Ubuntu 19.04 (GNU/Linux 4.18.0-15-generic x86_64)</span><br><span class="line"></span><br><span class="line"> * Documentation:  https://help.ubuntu.com</span><br><span class="line"> * Management:     https://landscape.canonical.com</span><br><span class="line"> * Support:        https://ubuntu.com/advantage</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">12 updates can be installed immediately.</span><br><span class="line">6 of these updates are security updates.</span><br><span class="line"></span><br><span class="line">Last login: Tue Jul  9 14:19:33 2019 from 127.0.0.1</span><br></pre></td></tr></table></figure>
<p><code>Sakura Frp</code>å·²é€šï¼Œæ„‰å¿«çš„ç©è€å§ï¼</p>
<p>æ‹¬å¼§ï¼šä¸€æ—¦å…¶æš´éœ²å‡ºå»åˆ«å¿˜äº†è€ƒè™‘å®‰å…¨ï¼Œæ¯”å¦‚ä½ çš„è¿™ä¸ªSSHè´¦å·ã€å¯†ç æ˜¯å¦è¶³å¤Ÿå¤æ‚ï¼Œæˆ–è€…æ˜¯å¦å…³é—­äº†è´¦å·å¯†ç ç™»é™†ã€‚</p>
<h1 id="å…¶ä»–æ–¹æ¡ˆ"><a href="#å…¶ä»–æ–¹æ¡ˆ" class="headerlink" title="å…¶ä»–æ–¹æ¡ˆ"></a>å…¶ä»–æ–¹æ¡ˆ</h1><p>è¿˜æœ‰ä¸€äº›å…¶ä»–çš„æ–¹æ¡ˆå¯ä»¥é€‰æ‹©ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li><a href="https://hsk.oray.com/" target="_blank" rel="noopener">èŠ±ç”Ÿå£³</a></li>
<li><a href="https://www.noip.com" target="_blank" rel="noopener">no-ip</a></li>
<li><a href="https://github.com/fatedier/frp" target="_blank" rel="noopener">å¼€æºçš„frp</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è®°å½•å°†ä¸€å°åƒç°çš„ç¬”è®°æœ¬æ”¹è£…æˆæœåŠ¡å™¨ï¼Œå¹¶æš´éœ²åœ¨å…¬ç½‘ä¸‹çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://madordie.github.io/categories/Linux/"/>
    
    
      <category term="å†…ç½‘ç©¿é€" scheme="https://madordie.github.io/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"/>
    
  </entry>
  
  <entry>
    <title>å®æ—¶æ˜¾ç¤ºæ—¥å¿—logio</title>
    <link href="https://madordie.github.io/post/logio-brief-zh-cn/"/>
    <id>https://madordie.github.io/post/logio-brief-zh-cn/</id>
    <published>2019-05-21T16:00:00.000Z</published>
    <updated>2019-07-10T03:22:22.600Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1 id="log-io"><a href="#log-io" class="headerlink" title="log.io"></a>log.io</h1><p><a href="https://madordie.github.io/post/logio-brief/">English</a></p>
<p>ä¸€ä¸ªèƒ½åœ¨æµè§ˆå™¨ä¸Šå®æ—¶æ˜¾ç¤ºæ—¥å¿—çš„å·¥å…·ã€‚</p>
<a id="more"></a>
<h1 id="å·¥ä½œåŸç†"><a href="#å·¥ä½œåŸç†" class="headerlink" title="å·¥ä½œåŸç†"></a>å·¥ä½œåŸç†</h1><p>ä»¥ä¸‹æ‘˜è‡ª<a href="http://logio.org/" target="_blank" rel="noopener">logio.org</a>ï¼Œæˆ‘è§‰å¾—å·²ç»éå¸¸çš„è¯¦ç»†äº†ï¼Œè¿™é‡Œå°±ä¸å•°å—¦äº†ã€‚</p>
<blockquote>
<p>Harvesters watch log files for changes, send new log messages to the server, which broadcasts to web clients. Log messages are tagged with stream, node, and log level information based on user configuration.</p>
<p>Log.io has no persistence layer. Harvesters are informed of file changes via inotify, and log messages hop from harvester to server to web client via TCP and socket.io, respectively.</p>
<p><img src="/images/2019-05-17-10-03-13.png" alt="work io"><br><img src="/images/2019-05-17-10-12-25.png" alt="Activate streams &amp; nodes to watch log messages"></p>
</blockquote>
<h2 id="é€šä¿¡ä½¿ç”¨çš„TCPæ¥å£"><a href="#é€šä¿¡ä½¿ç”¨çš„TCPæ¥å£" class="headerlink" title="é€šä¿¡ä½¿ç”¨çš„TCPæ¥å£"></a><a name="Simple TCP interface">é€šä¿¡ä½¿ç”¨çš„TCPæ¥å£</a></h2><blockquote>
<p>Log.io uses a stateless TCP API to receive log messages.</p>
<p>Writing a third party harvester is easy. Open a TCP connection to the &gt; server and begin writing properly formatted messages to the socket.</p>
<p>Read the <a href="https://github.com/NarrativeScience/Log.io" target="_blank" rel="noopener">API documentation</a>.</p>
</blockquote>
<h3 id="æ¶ˆæ¯å‘é€"><a href="#æ¶ˆæ¯å‘é€" class="headerlink" title="æ¶ˆæ¯å‘é€"></a>æ¶ˆæ¯å‘é€</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+log|my_stream|my_node|info|this is log message\r\n</span><br></pre></td></tr></table></figure>
<h3 id="æ³¨å†Œä¸€ä¸ªæ–°çš„nodeå’Œstream"><a href="#æ³¨å†Œä¸€ä¸ªæ–°çš„nodeå’Œstream" class="headerlink" title="æ³¨å†Œä¸€ä¸ªæ–°çš„nodeå’Œstream"></a>æ³¨å†Œä¸€ä¸ªæ–°çš„nodeå’Œstream</h3><p>å¦‚æœåŸæ¥å·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆè¿˜æ˜¯åŸæ¥çš„é‚£ä¸ªã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+node|my_node|my_stream1,my_stream2\r\n</span><br></pre></td></tr></table></figure>
<h3 id="åˆ é™¤node"><a href="#åˆ é™¤node" class="headerlink" title="åˆ é™¤node"></a>åˆ é™¤node</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-node|my_node\r\n</span><br></pre></td></tr></table></figure>
<h1 id="å®‰è£…Log-ioæœåŠ¡ç«¯"><a href="#å®‰è£…Log-ioæœåŠ¡ç«¯" class="headerlink" title="å®‰è£…Log.ioæœåŠ¡ç«¯"></a>å®‰è£…Log.ioæœåŠ¡ç«¯</h1><p>è¿™ä¸ªå¹´ä¹…å¤±ä¿®çš„åŸå§‹é¡¹ç›®<a href="https://github.com/NarrativeScience/Log.io" target="_blank" rel="noopener">NarrativeScience/Log.io</a>å·²ç»æ²¡åŠæ³•æ­£å¸¸å·¥ä½œäº†ã€‚ã€‚</p>
<p>å¹¸è¿çš„æ˜¯ï¼Œdockerç‰ˆæœ¬çš„<a href="https://github.com/blacklabelops-legacy/logio" target="_blank" rel="noopener">blacklabelops-legacy/logio</a>è¿˜å¯ä»¥ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ç”¨è¿™ä¸ªå§ã€‚</p>
<h2 id="å®‰è£…å¹¶å¼€å¯docker"><a href="#å®‰è£…å¹¶å¼€å¯docker" class="headerlink" title="å®‰è£…å¹¶å¼€å¯docker"></a>å®‰è£…å¹¶å¼€å¯docker</h2><p>dockerçš„æ–‡æ¡£<a href="https://docs.docker.com/install/" target="_blank" rel="noopener">docs.docker.com</a>ä¾æ—§éå¸¸è¯¦ç»†ï¼Œä¸å†èµ˜è¿°ã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯æ”¯æŒçš„å¹³å°æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ï¼š<a href="https://docs.docker.com/install/" target="_blank" rel="noopener">Cloud</a>ã€ <a href="https://docs.docker.com/docker-for-mac/install/" target="_blank" rel="noopener">MacOS</a> ã€<a href="https://docs.docker.com/install/" target="_blank" rel="noopener">Linux</a> ã€ <a href="https://docs.docker.com/docker-for-windows/install/" target="_blank" rel="noopener">Windows</a></p>
<h2 id="pull-é•œåƒ"><a href="#pull-é•œåƒ" class="headerlink" title="pull é•œåƒ"></a>pull é•œåƒ</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker pull blacklabelops/logio</span><br></pre></td></tr></table></figure>
<h2 id="å¼€å¯æœåŠ¡"><a href="#å¼€å¯æœåŠ¡" class="headerlink" title="å¼€å¯æœåŠ¡"></a>å¼€å¯æœåŠ¡</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d \</span><br><span class="line">    -p 28778:28778 \</span><br><span class="line">    -p 28777:28777 \</span><br><span class="line">    --name logio \</span><br><span class="line">    blacklabelops/logio</span><br></pre></td></tr></table></figure>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒåŸæ–‡æ¡£<a href="https://github.com/blacklabelops-legacy/logio" target="_blank" rel="noopener">blacklabelops-legacy/logio</a>ä¸­æ˜¯æ²¡æœ‰<code>-p 28777:28777</code>å‚æ•°çš„ï¼Œä¼šå¯¼è‡´å…¶28777ç«¯å£æ— å“åº”ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªæ‰‹è¯¯æˆ–è€…ç‰¹æ®Šéœ€è¦ï¼Ÿåæ­£è¿™é‡Œæ‰“å¼€å°±å¥½äº†ã€‚</p>
<h2 id="å…¶ä»–é…ç½®"><a href="#å…¶ä»–é…ç½®" class="headerlink" title="å…¶ä»–é…ç½®"></a>å…¶ä»–é…ç½®</h2><p>å…¶ä»–é…ç½®åœ¨<a href="https://github.com/blacklabelops-legacy/logio" target="_blank" rel="noopener">blacklabelops-legacy/logio</a>ä¸­ä¹Ÿå¾ˆè¯¦ç»†ğŸ˜‚ï¼Œéœ€è¦çš„è¯·è‡ªå–ã€‚æ¯”å¦‚è¯´æ—¥å¿—ã€httpsã€ç­‰</p>
<h2 id="æœ€ç»ˆæ•ˆæœå›¾"><a href="#æœ€ç»ˆæ•ˆæœå›¾" class="headerlink" title="æœ€ç»ˆæ•ˆæœå›¾"></a>æœ€ç»ˆæ•ˆæœå›¾</h2><p>åœ¨æµè§ˆå™¨ä¸Šæ‰“å¼€<a href="http://localhost:28778/å³å¯ã€‚ï¼ˆlocalhost" target="_blank" rel="noopener">http://localhost:28778/å³å¯ã€‚ï¼ˆlocalhost</a> æ˜¯å®‰è£…serverçš„IPï¼‰<br><img src="/images/2019-05-17-10-40-18.png" alt="log.io server"></p>
<p>äºæ˜¯ä¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘localhost:28778ç–¯ç‹‚çš„å†™æ—¥å¿—äº†. ğŸ‰ğŸ‰ğŸ‰</p>
<h1 id="æ”¯æŒçš„æ’ä»¶"><a href="#æ”¯æŒçš„æ’ä»¶" class="headerlink" title="æ”¯æŒçš„æ’ä»¶"></a>æ”¯æŒçš„æ’ä»¶</h1><p>è¿™ä¸ªæ—¥å¿—æœåŠ¡<a href="#Simple TCP interface">å¯¹å¤–æ¥å£</a>æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥ç†è®ºä¸Šæ¥è®²ï¼Œåªéœ€è¦å¯ä»¥è¿›è¡ŒTCPé€šä¿¡çš„åŒ…å‡å¯ä»¥æ”¯æŒï¼ŒåŒ…æ‹¬ä½†ä¸é™äºå®‰å“ã€iOSã€‚</p>
<h2 id="iOS"><a href="#iOS" class="headerlink" title="iOS"></a>iOS</h2><p><a href="https://github.com/madordie/logio" target="_blank" rel="noopener">iOSç‰ˆæœ¬</a>åŸºäº<a href="https://cocoapods.org/" target="_blank" rel="noopener">CocoaPods</a>çš„é¡¹ç›®åªéœ€è¦åœ¨Podfileä¸­æ·»åŠ ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod <span class="string">'logio'</span>, <span class="symbol">:git</span> =&gt; <span class="string">'https://github.com/madordie/logio.git'</span></span><br></pre></td></tr></table></figure>
<p>å…¶iOSç‰ˆæœ¬å·²ç»æ”¾åœ¨äº†è¿™é‡Œï¼š<a href="https://github.com/madordie/logio" target="_blank" rel="noopener">madordie/logio</a></p>
<p>iOSä¸Šä¹‹å‰æœ‰ä¸€ä¸ªç±»ä¼¼çš„<a href="https://github.com/s4nchez/LogIO-CocoaLumberjack" target="_blank" rel="noopener">LogIO-CocoaLumberjack</a>, æˆ‘è¿™é‡Œåšäº†ç®€å•çš„æ›´æ–°ï¼Œç›®çš„æ˜¯ä¸ç»‘å®š<a href="https://github.com/robbiehanson/CocoaAsyncSocket" target="_blank" rel="noopener">CocoaAsyncSocket</a>ã€‚</p>
<hr>
<ul>
<li><a href="http://logio.org/" target="_blank" rel="noopener">logio.org</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;log-io&quot;&gt;&lt;a href=&quot;#log-io&quot; class=&quot;headerlink&quot; title=&quot;log.io&quot;&gt;&lt;/a&gt;log.io&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://madordie.github.io/post/logio-brief/&quot;&gt;English&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªèƒ½åœ¨æµè§ˆå™¨ä¸Šå®æ—¶æ˜¾ç¤ºæ—¥å¿—çš„å·¥å…·ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="å·¥å…·" scheme="https://madordie.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="tool" scheme="https://madordie.github.io/tags/tool/"/>
    
      <category term="logio" scheme="https://madordie.github.io/tags/logio/"/>
    
  </entry>
  
  <entry>
    <title>logio</title>
    <link href="https://madordie.github.io/post/logio-brief/"/>
    <id>https://madordie.github.io/post/logio-brief/</id>
    <published>2019-05-16T16:00:00.000Z</published>
    <updated>2019-07-10T03:24:19.041Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1 id="log-io"><a href="#log-io" class="headerlink" title="log.io"></a>log.io</h1><p><a href="https://madordie.github.io/post/logio-brief-zh-cn/">ä¸­æ–‡</a></p>
<p>Real-time log monitoring in your browser.</p>
<a id="more"></a>
<h1 id="How-does-it-work"><a href="#How-does-it-work" class="headerlink" title="How does it work"></a>How does it work</h1><blockquote>
<p>Harvesters watch log files for changes, send new log messages to the server, which broadcasts to web clients. Log messages are tagged with stream, node, and log level information based on user configuration.</p>
<p>Log.io has no persistence layer. Harvesters are informed of file changes via inotify, and log messages hop from harvester to server to web client via TCP and socket.io, respectively.</p>
<p><img src="/images/2019-05-17-10-03-13.png" alt="work io"></p>
</blockquote>
<h2 id="Activate-streams-amp-nodes-to-watch-log-messages"><a href="#Activate-streams-amp-nodes-to-watch-log-messages" class="headerlink" title="Activate streams &amp; nodes to watch log messages"></a>Activate streams &amp; nodes to watch log messages</h2><blockquote>
<p><img src="/images/2019-05-17-10-12-25.png" alt="Activate streams &amp; nodes to watch log messages"></p>
</blockquote>
<h2 id="Simple-TCP-interface"><a href="#Simple-TCP-interface" class="headerlink" title="Simple TCP interface"></a><a name="Simple TCP interface">Simple TCP interface</a></h2><blockquote>
<p>Log.io uses a stateless TCP API to receive log messages.</p>
<p>Writing a third party harvester is easy. Open a TCP connection to the &gt; server and begin writing properly formatted messages to the socket.</p>
<p>Read the <a href="https://github.com/NarrativeScience/Log.io" target="_blank" rel="noopener">API documentation</a>.</p>
</blockquote>
<h3 id="Send-a-log-message"><a href="#Send-a-log-message" class="headerlink" title="Send a log message"></a>Send a log message</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+log|my_stream|my_node|info|this is log message\r\n</span><br></pre></td></tr></table></figure>
<h3 id="Register-a-new-node-with-stream-associations"><a href="#Register-a-new-node-with-stream-associations" class="headerlink" title="Register a new node, with stream associations"></a>Register a new node, with stream associations</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+node|my_node|my_stream1,my_stream2\r\n</span><br></pre></td></tr></table></figure>
<h3 id="Remove-a-node"><a href="#Remove-a-node" class="headerlink" title="Remove a node"></a>Remove a node</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-node|my_node\r\n</span><br></pre></td></tr></table></figure>
<h1 id="Install-Log-io"><a href="#Install-Log-io" class="headerlink" title="Install Log.io"></a>Install Log.io</h1><p>The original project <a href="https://github.com/NarrativeScience/Log.io" target="_blank" rel="noopener">NarrativeScience/Log.io</a> has been unavailable due to lack of maintenance for a long time.</p>
<p>Fortunately, the <a href="https://github.com/blacklabelops-legacy/logio" target="_blank" rel="noopener">blacklabelops-legacy/logio</a> can also be used.</p>
<p>So we can install the project like thisï¼š</p>
<h2 id="Install-and-start-docker"><a href="#Install-and-start-docker" class="headerlink" title="Install and start docker"></a>Install and start docker</h2><p>The <a href="https://docs.docker.com/install/" target="_blank" rel="noopener">docs.docker.com</a> is very detailed.</p>
<p>Support <a href="https://docs.docker.com/install/" target="_blank" rel="noopener">Cloud</a>ã€ <a href="https://docs.docker.com/docker-for-mac/install/" target="_blank" rel="noopener">MacOS</a> ã€<a href="https://docs.docker.com/install/" target="_blank" rel="noopener">Linux</a> ã€ <a href="https://docs.docker.com/docker-for-windows/install/" target="_blank" rel="noopener">Windows</a></p>
<h2 id="Pull-image"><a href="#Pull-image" class="headerlink" title="Pull image"></a>Pull image</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker pull blacklabelops/logio</span><br></pre></td></tr></table></figure>
<h2 id="Start-the-server"><a href="#Start-the-server" class="headerlink" title="Start the server"></a>Start the server</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d \</span><br><span class="line">    -p 28778:28778 \</span><br><span class="line">    -p 28777:28777 \</span><br><span class="line">    --name logio \</span><br><span class="line">    blacklabelops/logio</span><br></pre></td></tr></table></figure>
<h2 id="Other-configure"><a href="#Other-configure" class="headerlink" title="Other configure"></a>Other configure</h2><p><a href="https://github.com/blacklabelops-legacy/logio" target="_blank" rel="noopener">blacklabelops-legacy/logio</a>.</p>
<h2 id="Complete"><a href="#Complete" class="headerlink" title="Complete"></a>Complete</h2><p>Browser: <a href="http://localhost:28778/" target="_blank" rel="noopener">http://localhost:28778/</a><br><img src="/images/2019-05-17-10-40-18.png" alt="log.io server"></p>
<p>Now we can write logs to port 28777. ğŸ‰ğŸ‰ğŸ‰</p>
<h1 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h1><p>We only need to perform TCP communication according to the rules <a href="#Simple TCP interface">Simple TCP interface</a>, and the log can be displayed on the browser.</p>
<h2 id="iOS"><a href="#iOS" class="headerlink" title="iOS"></a>iOS</h2><p><a href="https://github.com/madordie/logio" target="_blank" rel="noopener">logio for iOS</a></p>
<hr>
<ul>
<li><a href="http://logio.org/" target="_blank" rel="noopener">logio.org</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;log-io&quot;&gt;&lt;a href=&quot;#log-io&quot; class=&quot;headerlink&quot; title=&quot;log.io&quot;&gt;&lt;/a&gt;log.io&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://madordie.github.io/post/logio-brief-zh-cn/&quot;&gt;ä¸­æ–‡&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Real-time log monitoring in your browser.&lt;/p&gt;
    
    </summary>
    
      <category term="å·¥å…·" scheme="https://madordie.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="tool" scheme="https://madordie.github.io/tags/tool/"/>
    
      <category term="logio" scheme="https://madordie.github.io/tags/logio/"/>
    
  </entry>
  
  <entry>
    <title>Gitment/Gitalkè‡ªåŠ¨åˆå§‹åŒ–</title>
    <link href="https://madordie.github.io/post/blog-gitment-auto-setup/"/>
    <id>https://madordie.github.io/post/blog-gitment-auto-setup/</id>
    <published>2018-08-29T08:58:47.000Z</published>
    <updated>2019-05-22T03:51:24.165Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>ä¸€ä¸ªrubyè„šæœ¬è§£æ”¾ä½ åŒæ‰‹å•ªå•ªå•ªçš„æ•²é”®ç›˜ä¸‰åˆ†é’Ÿï½</p>
<p>PS.</p>
<ul>
<li>rubyæ–°æ‰‹ï¼Œè½»æ‹ã€‚ã€‚</li>
<li>ä¸‰æ˜¯è™šæŒ‡ã€‚ã€‚</li>
</ul>
<a id="more"></a>
<h2 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h2><p>ä¹‹å‰çœ‹åˆ°äººå®¶çš„ç§ç«™éƒ½æ˜¯ç”¨çš„<a href="https://github.com" target="_blank" rel="noopener">GitHub</a>åšçš„è¯„è®ºç³»ç»Ÿã€‚ã€‚å¾ˆæƒ³è¦ï¼Œä½†æ˜¯äººå®¶æ²¡æœ‰ç”¨<a href="https://pages.github.com" target="_blank" rel="noopener">pages</a>è¿™æ ·çš„ç©æ„ã€‚ã€‚</p>
<p>ä»Šå¤©çœ‹åˆ°<a href="http://awhisper.github.io" target="_blank" rel="noopener">å‘³ç²¾</a>å¤§ä½¬çš„RSSè·ªäº†ï¼Œç„¶åçœ‹åˆ°äººå®¶ç”¨çš„æ˜¯GitHubçš„è¯„è®ºã€‚ã€‚é¡¿æ—¶è§‰å¾—æƒ³è¦ï¼Œ23333</p>
<p>ç„¶åçœ‹äº†ä¸€å“ˆ æ˜¯è¿™ä¸ªï¼š<a href="https://github.com/imsun/gitment" target="_blank" rel="noopener">gitment</a></p>
<h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>è¿™ä¸ªæˆ‘å°±ä¸è¯´äº†ï¼Œä½œè€…æœ‰å†™ä¸­æ–‡æ–‡æ¡£ï¼Œçœ‹ä¸€çœ¼å°±æ˜ç™½äº†ã€‚</p>
<p>åˆ—ä¸€ä¸‹æˆ‘çš„ä½¿ç”¨<a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">NexTä¸»é¢˜</a>çš„é…ç½®ï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Gitment</span></span><br><span class="line"><span class="comment"># Introduction: https://imsun.net/posts/gitment-introduction/</span></span><br><span class="line"><span class="attr">gitment:</span></span><br><span class="line"><span class="attr">  enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  mint:</span> <span class="literal">true</span> <span class="comment"># RECOMMEND, A mint on Gitment, to support count, language and proxy_gateway</span></span><br><span class="line"><span class="attr">  count:</span> <span class="literal">true</span> <span class="comment"># Show comments count in post meta area</span></span><br><span class="line"><span class="attr">  lazy:</span> <span class="literal">false</span> <span class="comment"># Comments lazy loading with a button</span></span><br><span class="line"><span class="attr">  cleanly:</span> <span class="literal">false</span> <span class="comment"># Hide 'Powered by ...' on footer, and more</span></span><br><span class="line"><span class="attr">  language:</span> <span class="comment"># Force language, or auto switch by theme</span></span><br><span class="line"><span class="attr">  github_user:</span> <span class="string">xxxxxx</span> <span class="comment"># MUST HAVE, Your Github ID</span></span><br><span class="line"><span class="attr">  github_repo:</span> <span class="string">xxxxxx</span> <span class="comment"># MUST HAVE, The repo you use to store Gitment comments</span></span><br><span class="line"><span class="attr">  client_id:</span> <span class="string">xxxxxx</span> <span class="comment"># MUST HAVE, Github client id for the Gitment</span></span><br><span class="line"><span class="attr">  client_secret:</span> <span class="string">xxxxxx</span> <span class="comment"># EITHER this or proxy_gateway, Github access secret token for the Gitment</span></span><br><span class="line"><span class="attr">  proxy_gateway:</span> <span class="comment"># Address of api proxy, See: https://github.com/aimingoo/intersect</span></span><br><span class="line"><span class="attr">  redirect_protocol:</span> <span class="comment"># Protocol of redirect_uri with force_redirect_protocol when mint enabled</span></span><br></pre></td></tr></table></figure>
<h2 id="è‡ªåŠ¨åˆå§‹åŒ–"><a href="#è‡ªåŠ¨åˆå§‹åŒ–" class="headerlink" title="è‡ªåŠ¨åˆå§‹åŒ–"></a>è‡ªåŠ¨åˆå§‹åŒ–</h2><p>å…³äºä½œè€…çš„<a href="https://github.com/imsun/gitment/issues/8" target="_blank" rel="noopener">åˆå§‹åŒ–è¯„è®ºæ¡†æ–¹æ¡ˆè®¨è®º</a>è¿˜åœ¨è®¨è®ºä¸­ã€‚ã€‚ã€‚</p>
<p>ä½†æ˜¯æˆ‘è¦ç”¨ã€‚ã€‚ç­‰æ˜¯ä¸å¯èƒ½ç­‰çš„äº†ã€‚</p>
<p>çœ‹åˆ°<a href="https://draveness.me/git-comments-initialize" target="_blank" rel="noopener">è‡ªåŠ¨åˆå§‹åŒ– Gitalk å’Œ Gitment è¯„è®º</a>çš„è„šæœ¬æƒ³ç€åˆšå¥½æˆ‘çš„ä¹Ÿæ˜¯è‡ªåŠ¨å‘å¸ƒã€å¤‡ä»½ï¼Œè¿™ä¸æ˜¯åˆšå¥½å˜›ã€‚ã€‚</p>
<p>ä½†æ˜¯å­˜åœ¨å¤šæ¬¡æ‰§è¡Œå°±ä¼šå¤šæ¬¡åˆ›å»ºçš„é—®é¢˜ã€‚è¿™ä¸æ˜¯æˆ‘æƒ³è¦çš„ã€‚</p>
<h3 id="ç¬¬ä¸€ç‰ˆï¼šæ”¯æŒå¤šæ¬¡æ‰§è¡Œ"><a href="#ç¬¬ä¸€ç‰ˆï¼šæ”¯æŒå¤šæ¬¡æ‰§è¡Œ" class="headerlink" title="ç¬¬ä¸€ç‰ˆï¼šæ”¯æŒå¤šæ¬¡æ‰§è¡Œ"></a>ç¬¬ä¸€ç‰ˆï¼šæ”¯æŒå¤šæ¬¡æ‰§è¡Œ</h3><p>GitHubæä¾›è¾ƒä¸ºå®Œå–„çš„APIï¼Œç”¨æˆ‘è¿™æ°´æ°´çš„rbæ°´å¹³ï¼Œå¤§è‡´å¯ä»¥å®Œå–„å¦‚ä¸‹ï¼š</p>
<figure class="highlight rb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># from : https://madordie.github.io/post/blog-gitment-auto-setup</span></span><br><span class="line"><span class="comment"># å¦å¤–ï¼Œtokenå·²æ”¾åœ¨.git-tokenæ–‡ä»¶ä¸‹ï¼Œé˜²æ­¢æ³„æ¼ã€‚ã€‚</span></span><br><span class="line"></span><br><span class="line">username = <span class="string">"madordie"</span> <span class="comment"># GitHub ç”¨æˆ·å</span></span><br><span class="line">token = <span class="string">`cat .git-token`</span>  <span class="comment"># GitHub Token</span></span><br><span class="line">repo_name = <span class="string">"madordie.github.io"</span> <span class="comment"># å­˜æ”¾ issues</span></span><br><span class="line">sitemap_url = <span class="string">"https://raw.githubusercontent.com/madordie/madordie.github.io/master/sitemap.xml"</span> <span class="comment"># sitemap æ­¤å¤„ç”±äºgithub.ioä¸æ˜¯ç«‹é©¬ç”Ÿæ•ˆï¼Œä½†æ˜¯ä»“åº“æ˜¯ç«‹é©¬ç”Ÿæ•ˆçš„ï¼Œæ‰€ä»¥æ­¤å¤„åº”è¯¥æ›´æ¢ä¸ºä»“åº“çš„raw</span></span><br><span class="line">kind = <span class="string">"gitment"</span> <span class="comment"># "Gitalk" or "gitment"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="string">'open-uri'</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">'faraday'</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">'active_support'</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">'active_support/core_ext'</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">'sitemap-parser'</span></span><br><span class="line"></span><br><span class="line">puts <span class="string">"æ­£åœ¨æ£€ç´¢URL"</span></span><br><span class="line"></span><br><span class="line">sitemap = SitemapParser.new sitemap_url</span><br><span class="line">urls = sitemap.to_a</span><br><span class="line"></span><br><span class="line">puts <span class="string">"æ£€ç´¢åˆ°æ–‡ç« å…±<span class="subst">#&#123;urls.count&#125;</span>ä¸ª"</span></span><br><span class="line"></span><br><span class="line">conn = Faraday.new(<span class="symbol">:url</span> =&gt; <span class="string">"https://api.github.com"</span>) <span class="keyword">do</span> <span class="params">|conn|</span></span><br><span class="line">  conn.basic_auth(username, token)</span><br><span class="line">  conn.headers[<span class="string">'Accept'</span>] = <span class="string">"application/vnd.github.symmetra-preview+json"</span></span><br><span class="line">  conn.adapter  Faraday.default_adapter</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">commenteds = Array.new</span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="string">  if [ ! -f .commenteds ]; then</span></span><br><span class="line"><span class="string">    touch .commenteds</span></span><br><span class="line"><span class="string">  fi</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line">File.open(<span class="string">".commenteds"</span>, <span class="string">"r"</span>) <span class="keyword">do</span> <span class="params">|file|</span></span><br><span class="line">  file.each_line <span class="keyword">do</span> <span class="params">|line|</span></span><br><span class="line">    commenteds.push line</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">urls.each_with_index <span class="keyword">do</span> <span class="params">|url, index|</span></span><br><span class="line">  url = url.gsub(<span class="regexp">/index.html$/</span>, <span class="string">""</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> commenteds.<span class="keyword">include</span>?(<span class="string">"<span class="subst">#&#123;url&#125;</span>\n"</span>) == <span class="literal">false</span></span><br><span class="line">    url_key = Digest::MD5.hexdigest(URI.parse(url).path)</span><br><span class="line">    response = conn.get <span class="string">"/search/issues?q=label:<span class="subst">#&#123;url_key&#125;</span>+state:open+repo:<span class="subst">#&#123;username&#125;</span>/<span class="subst">#&#123;repo_name&#125;</span>"</span></span><br><span class="line"></span><br><span class="line">    puts <span class="string">"æ­£åœ¨åˆ›å»º: <span class="subst">#&#123;url&#125;</span>"</span></span><br><span class="line">    <span class="keyword">if</span> JSON.parse(response.body)[<span class="string">'total_count'</span>] &gt; <span class="number">0</span></span><br><span class="line">      puts <span class="string">"\tâ†³ å·²å­˜åœ¨"</span></span><br><span class="line">      <span class="string">`echo <span class="subst">#&#123;url&#125;</span> &gt;&gt; .commenteds`</span></span><br><span class="line">      title = open(url).read.scan(<span class="regexp">/&lt;title&gt;(.*?)&lt;\/title&gt;/</span>).first.first.force_encoding(<span class="string">'UTF-8'</span>)</span><br><span class="line"></span><br><span class="line">      response = conn.post(<span class="string">"/repos/<span class="subst">#&#123;username&#125;</span>/<span class="subst">#&#123;repo_name&#125;</span>/issues"</span>) <span class="keyword">do</span> <span class="params">|req|</span></span><br><span class="line">        req.body = &#123; <span class="symbol">body:</span> url, <span class="symbol">labels:</span> [kind, url], <span class="symbol">title:</span> title &#125;.to_json</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">if</span> JSON.parse(response.body)[<span class="string">'number'</span>] &gt; <span class="number">0</span></span><br><span class="line">        <span class="string">`echo <span class="subst">#&#123;url&#125;</span> &gt;&gt; .commenteds`</span></span><br><span class="line">        puts <span class="string">"\tâ†³ å·²åˆ›å»ºæˆåŠŸ"</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        puts <span class="string">"\tâ†³ <span class="subst">#&#123;response.body&#125;</span>"</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è„šæœ¬OKï¼Œè¿˜éœ€è¦å®‰è£…ä¸€äº›åº“ç”¨è¿™ä¸ªå°±è¡Œï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gem install faraday activesupport sitemap-parser</span><br></pre></td></tr></table></figure>
<p>æ­£å¸¸æƒ…å†µéƒ½ä¼šå®‰è£…æˆåŠŸï¼Œé‚£ä¹ˆè·‘ä¸€ä¸‹è„šæœ¬å§ï¼š</p>
<figure class="highlight rb"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby comment.rb</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€æ¬¡è¿è¡Œè¯·æ±‚å¤šï¼Œç¨å¾®ç­‰ä¸€ä¼šã€‚è¡¨æ€¥ã€‚ã€‚</p>
<p>è·‘å®Œä¹‹åå¦‚æœä½ çš„é“¾æ¥æ€»é•¿åº¦éƒ½æ˜¯ <code>&lt;= 50</code> å­—ç¬¦ï¼Œé‚£ä¹ˆçœŸå—¨ï¼Œè¿™å°±è¡Œäº†ã€‚</p>
<p>ä½†æ˜¯å¦‚æœä»¥åæœ‰å¯èƒ½ <code>&gt; 50</code>ï¼Œæˆ–è€…ä¸ç¡®å®šä»¥åä¼šä¸ä¼šå†™ä¸€ä¸ªé“¾æ¥è´¼é•¿çš„æ–‡ç« ï¼Œé‚£ä¹ˆä½ å¯èƒ½è¿˜è¦å¾€ä¸‹å†çœ‹ä¸€ä¸‹ã€‚ã€‚</p>
<h3 id="ç¬¬äºŒç‰ˆï¼šå…¼å®¹æ–‡ç« é“¾æ¥å¾ˆé•¿é•¿é•¿"><a href="#ç¬¬äºŒç‰ˆï¼šå…¼å®¹æ–‡ç« é“¾æ¥å¾ˆé•¿é•¿é•¿" class="headerlink" title="ç¬¬äºŒç‰ˆï¼šå…¼å®¹æ–‡ç« é“¾æ¥å¾ˆé•¿é•¿é•¿"></a>ç¬¬äºŒç‰ˆï¼šå…¼å®¹æ–‡ç« é“¾æ¥å¾ˆé•¿é•¿é•¿</h3><p>å…³äºè¿™ä¸ªçš„è®¨è®ºå¾ˆå¤šï¼Œåœ¨issuesä¸­æœä¸€ä¸‹å¤§çº¦è¿™æ ·ï¼š<a href="https://github.com/imsun/gitment/issues?utf8=âœ“&amp;q=is%3Aissue+validation+Failed" target="_blank" rel="noopener">Error: Validation Failed</a>ã€‚</p>
<p>è¿™ä¸ª<code>Error: Validation Failed</code>å°±æ˜¯labelå¤ªé•¿ã€‚</p>
<p>å…³äºè¿™ä¸ªé—®é¢˜åœ¨<a href="https://developer.github.com/v3/issues/labels/#create-a-label" target="_blank" rel="noopener">API: Create a label</a>å¹¶æœªæåŠã€‚</p>
<p>ä½†æ˜¯åœ¨ä»»ä½•ä¸€ä¸ªä»“åº“ä¸‹ï¼ŒæŒ‰ç…§<code>Issues -&gt; New label</code>çš„æ—¶å€™ï¼Œè¾“å…¥çš„<code>Label name</code>æ˜¯æœ‰é™åˆ¶çš„ï¼Œè¾“å…¥è¶…è¿‡<code>50</code>ä¸ªè‡ªç¬¦ä¹‹åä¾¿æ— æ³•å†æ¥æ”¶è¾“å…¥ã€‚å°±é…±ï¼Œæ²¡æ‰¾åˆ°ä»€ä¹ˆæ–‡æ¡£ã€‚ã€‚</p>
<p>çœ‹äº†è¿™ä¸ª<a href="https://github.com/imsun/gitment/issues/116" target="_blank" rel="noopener">Validation Failed IDé•¿åº¦é—®é¢˜å»ºè®®</a>ä¹‹åè§‰å¾—ï¼ŒMD5ä¸€ä¸‹å§é‚£å°±ã€‚ã€‚</p>
<p>ä¸ºäº†é€‰æ‹©ä¸€ä¸ªKEYå»MD5ï¼Œé¡ºä¾¿è§£å†³ä¸€ä¸‹<a href="https://github.com/imsun/gitment/issues/168" target="_blank" rel="noopener">åŒä¸€ä¸ªé¡µé¢ï¼Œå¸¦é”šç‚¹#moreä¼šåˆå§‹åŒ–ä¸€æ¡æ–°çš„issue</a>è¿™ä¸ªé—®é¢˜ï¼Œ</p>
<p>æ‰€ä»¥KEYä½¿ç”¨<a href="https://github.com/imsun/gitment/issues/68" target="_blank" rel="noopener">å…³äºhexoåšå®¢å•ç¯‡æ–‡ç« åˆå§‹åŒ–ä¸¤æ¬¡çš„é—®é¢˜</a>ä¸­æå‡ºçš„<code>window.location.pathname</code>å§ï¼Œä½†æ˜¯å…³äº<code>/</code>çš„è®¨è®ºï¼Œæˆ‘è¿™é‡Œè²Œä¼¼å¹¶æ²¡æœ‰çœ‹åˆ°ï¼Œæˆ‘çš„éƒ½æ˜¯æœ‰çš„ğŸ˜‚ã€‚ã€‚å¦‚æœçœ‹åˆ°çš„è¯å†æ›´ï¼Œæˆ–è€…ä¿é™©æœŸé—´ï¼Œå…ˆæŒ‰ç…§è¿™ç§æ–¹æ¡ˆæ›´æ–°ä¸€ä¸‹ã€‚</p>
<p>å°†ä¸Šé¢çš„åšå®Œï¼Œç°åœ¨çš„rbåº”è¯¥é•¿è¿™ä¸ªæ ·å­:</p>
<figure class="highlight rb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># from : https://madordie.github.io/post/blog-gitment-auto-setup</span></span><br><span class="line"><span class="comment"># å¦å¤–ï¼Œtokenå·²æ”¾åœ¨.git-tokenæ–‡ä»¶ä¸‹,å¹¶è¢«.gitignoreæ ‡è®°ï¼Œé˜²æ­¢æ³„æ¼ã€‚ã€‚</span></span><br><span class="line"></span><br><span class="line">username = <span class="string">"madordie"</span> <span class="comment"># GitHub ç”¨æˆ·å</span></span><br><span class="line">token = <span class="string">`cat .git-token`</span>  <span class="comment"># GitHub Token</span></span><br><span class="line">repo_name = <span class="string">"madordie.github.io"</span> <span class="comment"># å­˜æ”¾ issues</span></span><br><span class="line">sitemap_url = <span class="string">"https://madordie.github.io/sitemap.xml"</span> <span class="comment"># sitemap</span></span><br><span class="line">kind = <span class="string">"gitment"</span> <span class="comment"># "Gitalk" or "gitment"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="string">'open-uri'</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">'faraday'</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">'active_support'</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">'active_support/core_ext'</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">'sitemap-parser'</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">'digest'</span></span><br><span class="line"></span><br><span class="line">puts <span class="string">"æ­£åœ¨æ£€ç´¢URL"</span></span><br><span class="line"></span><br><span class="line">sitemap = SitemapParser.new sitemap_url</span><br><span class="line">urls = sitemap.to_a</span><br><span class="line"></span><br><span class="line">puts <span class="string">"æ£€ç´¢åˆ°æ–‡ç« å…±<span class="subst">#&#123;urls.count&#125;</span>ä¸ª"</span></span><br><span class="line"></span><br><span class="line">conn = Faraday.new(<span class="symbol">:url</span> =&gt; <span class="string">"https://api.github.com"</span>) <span class="keyword">do</span> <span class="params">|conn|</span></span><br><span class="line">  conn.basic_auth(username, token)</span><br><span class="line">  conn.headers[<span class="string">'Accept'</span>] = <span class="string">"application/vnd.github.symmetra-preview+json"</span></span><br><span class="line">  conn.adapter  Faraday.default_adapter</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">commenteds = Array.new</span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="string">  if [ ! -f .commenteds ]; then</span></span><br><span class="line"><span class="string">    touch .commenteds</span></span><br><span class="line"><span class="string">  fi</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line">File.open(<span class="string">".commenteds"</span>, <span class="string">"r"</span>) <span class="keyword">do</span> <span class="params">|file|</span></span><br><span class="line">  file.each_line <span class="keyword">do</span> <span class="params">|line|</span></span><br><span class="line">      commenteds.push line</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">urls.each_with_index <span class="keyword">do</span> <span class="params">|url, index|</span></span><br><span class="line">  url.gsub!(<span class="regexp">/index.html$/</span>, <span class="string">""</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> commenteds.<span class="keyword">include</span>?(<span class="string">"<span class="subst">#&#123;url&#125;</span>\n"</span>) == <span class="literal">false</span></span><br><span class="line">    url_key = Digest::MD5.hexdigest(URI.parse(url).path)</span><br><span class="line">    response = conn.get <span class="string">"/search/issues?q=label:<span class="subst">#&#123;url_key&#125;</span>+state:open+repo:<span class="subst">#&#123;username&#125;</span>/<span class="subst">#&#123;repo_name&#125;</span>"</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> JSON.parse(response.body)[<span class="string">'total_count'</span>] &gt; <span class="number">0</span></span><br><span class="line">      <span class="string">`echo <span class="subst">#&#123;url&#125;</span> &gt;&gt; .commenteds`</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      puts <span class="string">"æ­£åœ¨åˆ›å»º: <span class="subst">#&#123;url&#125;</span>"</span></span><br><span class="line">      title = open(url).read.scan(<span class="regexp">/&lt;title&gt;(.*?)&lt;\/title&gt;/</span>).first.first.force_encoding(<span class="string">'UTF-8'</span>)</span><br><span class="line">      response = conn.post(<span class="string">"/repos/<span class="subst">#&#123;username&#125;</span>/<span class="subst">#&#123;repo_name&#125;</span>/issues"</span>) <span class="keyword">do</span> <span class="params">|req|</span></span><br><span class="line">        req.body = &#123; <span class="symbol">body:</span> url, <span class="symbol">labels:</span> [kind, url_key], <span class="symbol">title:</span> title &#125;.to_json</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">if</span> JSON.parse(response.body)[<span class="string">'number'</span>] &gt; <span class="number">0</span></span><br><span class="line">        <span class="string">`echo <span class="subst">#&#123;url&#125;</span> &gt;&gt; .commenteds`</span></span><br><span class="line">        puts <span class="string">"\tâ†³ å·²åˆ›å»ºæˆåŠŸ"</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        puts <span class="string">"\tâ†³ <span class="subst">#&#123;response.body&#125;</span>"</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åŒæ—¶åˆ«å¿˜äº†ä¿®æ”¹å¯¹åº”çš„ç½‘é¡µã€‚ã€‚æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯<a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">NexT.Pisces v5.1.4</a></p>
<p>éœ€è¦ä¿®æ”¹<code>/themes/next/layout/_third-party/comments/gitment.swig</code>æ–‡ä»¶ï¼Œç”±äºJSä¸æ”¯æŒMD5,æ‰€ä»¥è¿˜éœ€è¦å¼•å…¥ä¸€ä¸ªJSï¼Œäºæ˜¯ä¹å¤§çº¦è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">    &#123;% if theme.gitment.mint %&#125;</span><br><span class="line">        &#123;% set CommentsClass = &quot;Gitmint&quot; %&#125;</span><br><span class="line">        &lt;link rel=&quot;stylesheet&quot; href=&quot;https://aimingoo.github.io/gitmint/style/default.css&quot;&gt;</span><br><span class="line">        &lt;script src=&quot;https://aimingoo.github.io/gitmint/dist/gitmint.browser.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">+       &lt;script src=&quot;https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &#123;% else %&#125;</span><br><span class="line">        &#123;% set CommentsClass = &quot;Gitment&quot; %&#125;</span><br><span class="line">        &lt;link rel=&quot;stylesheet&quot; href=&quot;https://imsun.github.io/gitment/style/default.css&quot;&gt;</span><br><span class="line">        &lt;script src=&quot;https://imsun.github.io/gitment/dist/gitment.browser.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">+       &lt;script src=&quot;https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line">...</span><br><span class="line">        var gitment = new &#123;&#123;CommentsClass&#125;&#125;(&#123;</span><br><span class="line">-           id: document.location.href,</span><br><span class="line">+           id: md5(window.location.pathname.replace(/index.html/, &quot;&quot;)),</span><br><span class="line">            owner: &apos;&#123;&#123; theme.gitment.github_user &#125;&#125;&apos;,</span><br><span class="line">            repo: &apos;&#123;&#123; theme.gitment.github_repo &#125;&#125;&apos;,</span><br></pre></td></tr></table></figure>
<p>è‡³äºè¿™ä¸ªMD5çš„å¼•å…¥ï¼Œæˆ‘æ˜¯éšä¾¿æœçš„ä¸€ä¸ªã€‚ã€‚è¿™ä¸ª<code>if theme.gitment.mint</code>æˆ‘å¹¶ä¸çŸ¥é“åœ¨å“ªé‡Œé…ç½®çš„ï¼Œæ‰€ä»¥ä¿©éƒ½åŠ ä¸Šå§ã€‚</p>
<p>æ‰§è¡Œä¸€ä¸‹è„šæœ¬å§ï¼Œåº”è¯¥é½æ´»äº†ã€‚</p>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><ul>
<li>æ–‡ä¸­æåˆ°çš„å…³äºé“¾æ¥<code>/</code>é£˜å¿½ä¸å®šçš„äº‹æƒ…æˆ‘æ²¡ç¢°åˆ°ï¼Œæˆ‘æ˜¯ç›´æ¥å–çš„<a href="https://madordie.github.io/sitemap.xml">sitemap</a>ï¼Œè²Œä¼¼æ¯ä¸ªæ–‡ç« éƒ½å¸¦äº†<code>/</code></li>
<li>æ–‡ä¸­çš„å¼•ç”¨å•¥çš„æˆ‘éƒ½æ ‡è®°äº†é“¾æ¥ï¼Œå¦‚æœ‰æ¼æ‰ã€ä¸æ˜ç™½ï¼Œéº»çƒ¦å‘Šè¯‰æˆ‘ä¸€å“ˆï¼Œæˆ‘å»è¡¥ä¸€ä¸‹</li>
<li>æˆ‘åªæ˜¯ä¸ªå°å°çš„iOSï¼Œå¯¹rubyã€jsæ‡‚å¾—ä¸å¤šï¼Œrbå†™çš„ä¸å¥½çš„åœ°æ–¹è½»æ‹</li>
<li>å“¦å¯¹äº†ï¼Œè¿™è„šæœ¬å…¨éƒ¨åœ¨è¿™é‡Œï¼š<a href="https://github.com/madordie/madordie.github.io/blob/master/comment.rb" target="_blank" rel="noopener">comment.rb</a>ã€‚åŒæ—¶ï¼Œè¿™ä¸ªè„šæœ¬æˆ‘åˆæ”¾åœ¨äº†è‡ªåŠ¨å‘å¸ƒçš„shellè„šæœ¬é‡Œé¢ï¼ŒåŒæ ·shellå†™çš„å¾ˆæ°´ã€‚ã€‚æ”¾åœ¨äº†è¿™é‡Œï¼š<a href="https://github.com/madordie/madordie.github.io/blob/master/deploy.sh" target="_blank" rel="noopener">deploy.sh</a>ï¼Œè€Œä¸”æ˜¯å¾ˆæ—©ä¹‹å‰å°±å†™äº†çš„ã€‚ã€‚</li>
<li>å¹¶æœªæµ‹è¯•<a href="https://github.com/gitalk/gitalk" target="_blank" rel="noopener">Gitalk</a>ï¼Œåªæ˜¯è„šæœ¬åº”è¯¥æ˜¯é€šç”¨çš„ï¼Œè‡³äºJSçš„MD5è¯¥å’‹å†™ æˆ‘å°±ä¸æ˜¯å¾ˆæ¸…æ¥šäº†ã€‚ã€‚</li>
<li>å¦‚æœè¿˜æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥æ‹‰å‡ºæ¥è®¨è®ºä¸€å“ˆ ;)</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸€ä¸ªrubyè„šæœ¬è§£æ”¾ä½ åŒæ‰‹å•ªå•ªå•ªçš„æ•²é”®ç›˜ä¸‰åˆ†é’Ÿï½&lt;/p&gt;
&lt;p&gt;PS.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;rubyæ–°æ‰‹ï¼Œè½»æ‹ã€‚ã€‚&lt;/li&gt;
&lt;li&gt;ä¸‰æ˜¯è™šæŒ‡ã€‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="å·¥å…·" scheme="https://madordie.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="blog" scheme="https://madordie.github.io/tags/blog/"/>
    
      <category term="gitment" scheme="https://madordie.github.io/tags/gitment/"/>
    
  </entry>
  
  <entry>
    <title>UIFontå­—ä½“ä¿¡æ¯</title>
    <link href="https://madordie.github.io/post/uifont-infos/"/>
    <id>https://madordie.github.io/post/uifont-infos/</id>
    <published>2018-08-16T10:43:20.000Z</published>
    <updated>2018-08-23T03:17:26.448Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>iOSç³»ç»Ÿä¸‹å­—ä½“ä¿¡æ¯ã€‚</p>
<a id="more"></a>
<h2 id="ç¯å¢ƒä¿¡æ¯"><a href="#ç¯å¢ƒä¿¡æ¯" class="headerlink" title="ç¯å¢ƒä¿¡æ¯"></a>ç¯å¢ƒä¿¡æ¯</h2><ul>
<li>iOS12.0(16A5357b)</li>
<li>iPhone6</li>
</ul>
<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> label = <span class="type">UILabel</span>()</span><br><span class="line">label.text = <span class="string">"è¿™æ˜¯å•¥"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> format: (<span class="type">UIFont</span>) -&gt; [<span class="type">String</span>: <span class="type">Any</span>] = &#123; (font) <span class="keyword">in</span></span><br><span class="line">    label.font = font</span><br><span class="line">    label.sizeToFit()</span><br><span class="line">    <span class="keyword">return</span> [<span class="string">"font.familyName"</span>: font.familyName,</span><br><span class="line">            <span class="string">"font.fontName"</span>: font.fontName,</span><br><span class="line">            <span class="string">"font.pointSize"</span>: font.pointSize,</span><br><span class="line">            <span class="string">"font.ascender"</span>: font.ascender,</span><br><span class="line">            <span class="string">"font.descender"</span>: font.descender,</span><br><span class="line">            <span class="string">"font.capHeight"</span>: font.capHeight,</span><br><span class="line">            <span class="string">"font.xHeight"</span>: font.xHeight,</span><br><span class="line">            <span class="string">"font.lineHeight"</span>: font.lineHeight,</span><br><span class="line">            <span class="string">"font.leading"</span>: font.leading,</span><br><span class="line">            <span class="string">"label.sizeToFit"</span>: label.frame.height]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> json: [<span class="type">String</span>: [[<span class="type">String</span>: <span class="type">Any</span>]]] = [:]</span><br><span class="line"><span class="keyword">for</span> family <span class="keyword">in</span> <span class="type">UIFont</span>.familyNames &#123;</span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> <span class="type">UIFont</span>.fontNames(forFamilyName: family) &#123;</span><br><span class="line">        <span class="keyword">var</span> list: [[<span class="type">String</span>: <span class="type">Any</span>]] = []</span><br><span class="line">        <span class="keyword">for</span> size <span class="keyword">in</span> <span class="number">5</span>...<span class="number">60</span> &#123;</span><br><span class="line">            <span class="keyword">guard</span> <span class="keyword">let</span> font = <span class="type">UIFont</span>.<span class="keyword">init</span>(name: name, size: <span class="type">CGFloat</span>(size)) <span class="keyword">else</span> &#123; <span class="keyword">continue</span> &#125;</span><br><span class="line">            list.append(format(font))</span><br><span class="line">        &#125;</span><br><span class="line">        json[<span class="string">"\(family) -&gt; \(name)"</span>] = list</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="type">String</span>(data:(<span class="keyword">try</span>? <span class="type">JSONSerialization</span>.data(withJSONObject: json, options: .prettyPrinted)) ?? <span class="type">Data</span>(), encoding: .utf8)!)</span><br></pre></td></tr></table></figure>
<h2 id="é•¿é•¿çš„æ•°æ®"><a href="#é•¿é•¿çš„æ•°æ®" class="headerlink" title="é•¿é•¿çš„æ•°æ®"></a>é•¿é•¿çš„æ•°æ®</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ç„¶è€Œæ•°æ®å¤ªå¤šåŠ è½½ä¸å‡ºæ¥ã€‚ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;iOSç³»ç»Ÿä¸‹å­—ä½“ä¿¡æ¯ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="https://madordie.github.io/categories/iOS/"/>
    
    
      <category term="UIFont" scheme="https://madordie.github.io/tags/UIFont/"/>
    
  </entry>
  
  <entry>
    <title>ä»ä¸€ä¸ªå¸¸è§çš„å´©æºƒå¼€å§‹</title>
    <link href="https://madordie.github.io/post/debug-sth-from-crash/"/>
    <id>https://madordie.github.io/post/debug-sth-from-crash/</id>
    <published>2018-07-25T02:38:04.000Z</published>
    <updated>2018-07-25T10:06:59.566Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>æ˜¨å¤©ä¸‹ç­æ—¶å€™ä¸€æœ‹å‹ç¢°åˆ°ä¸€ä¸ªä¸‹é¢çš„å´©æºƒï¼Œä½†æ˜¯å…¨å±€æ–­ç‚¹å´æ— æ³•æ–­åˆ°æŒ‡å®šä½ç½®ã€‚é‰´äºä¸ä¿¡é‚ªçš„æ€åº¦ï¼Œå†³å®šå°è¯•ä¸€ç•ªã€‚ç„¶åå°†æ­¤äº‹è®°å½•å¦‚ä¸‹æ–‡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">*** Terminating app due to uncaught exception &apos;NSInvalidArgumentException&apos;, reason: &apos;-[__NSCFConstantString hasPrefix:]: nil argument&apos;</span><br><span class="line">*** First throw call stack:</span><br><span class="line">(0x18521ed8c .....)</span><br><span class="line">libc++abi.dylib: terminating with uncaught exception of type NSException</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="å´©æºƒè¡¨ç°"><a href="#å´©æºƒè¡¨ç°" class="headerlink" title="å´©æºƒè¡¨ç°"></a>å´©æºƒè¡¨ç°</h2><p>é‚£è€å“¥è¯´ä»–çš„APPè¿è¡Œä¹‹åï¼Œä»€ä¹ˆéƒ½ä¸åšï¼Œç­‰å¾…10sä¹‹åå°±ä¼šé—ªé€€ï¼Œé—ªé€€çš„æœ€é‡è¦ä¿¡æ¯æ˜¯ä¸Šé¢ï¼Œæ ˆç»“æ„ä¸Šæ²¡æœ‰å‡½æ•°ä¿¡æ¯ï¼Œåªæœ‰åœ°å€ã€‚</p>
<p>æ‰“å¼€å…¨å±€æ–­ç‚¹ï¼Œä¹Ÿæ— æ³•ç›´æ¥æ–­åˆ°æŒ‡å®šçš„å‡½æ•°ï¼Œè¿™ä¸ªä¿¡æ¯æˆ‘ç•™äº†ä¸€å¼ å›¾ï¼Œå¤§è‡´å¦‚ä¸‹ï¼š(å·²è„±æ•)</p>
<p><img src="/images/2018-07-25-10-52-38.png" alt="å´©æºƒæˆªå›¾"></p>
<h2 id="å…ˆç®€å•çš„åˆ†æä¸€ä¸‹"><a href="#å…ˆç®€å•çš„åˆ†æä¸€ä¸‹" class="headerlink" title="å…ˆç®€å•çš„åˆ†æä¸€ä¸‹"></a>å…ˆç®€å•çš„åˆ†æä¸€ä¸‹</h2><ul>
<li>å´©æºƒåŸå› å¾ˆæ˜ç¡®:<code>-[__NSCFConstantString hasPrefix:]: nil argument</code>ã€‚</li>
<li><code>__NSCFConstantString</code>ä¸º<code>NSString</code>ç±»ç°‡é‡Œé¢çš„ä¸€ä¸ªç±»ï¼Œå¸¸è§çš„ç±»ä¼¼çš„è¿˜æœ‰å¾ˆå¤šã€‚</li>
<li><code>- (BOOL)hasPrefix:(NSString *)str;</code>ä¸­<code>nil argument</code>ï¼Œä¹Ÿå°±æ˜¯<code>str</code>ä¸º<code>nil</code>ã€‚</li>
<li><code>First throw call stack</code>ä¸‹æ–¹å‡ä¸ºåœ°å€ï¼Œè¯´æ˜æ­¤å‡½æ•°åº”è¯¥åœ¨ä¸€ä¸ª<code>.a/.framework</code>ä¸­ã€‚</li>
<li><code>APPè¿è¡Œä¹‹åï¼Œä»€ä¹ˆéƒ½ä¸åšï¼Œç­‰å¾…10sä¹‹åå°±ä¼šé—ªé€€</code>è¯´æ˜æ­¤å´©æºƒä¸ºå¼‚æ­¥è°ƒç”¨ï¼Œè‡³äºæ˜¯ä¸æ˜¯å®šæ—¶è°ƒç”¨ï¼Œè¿™ä¸ªçœŸä¸å¥½è¯´ã€‚</li>
<li>ç”±äºæˆ‘æŠ€æœ¯æœ‰é™ï¼Œåˆ«çš„å¥½åƒæç‚¼ä¸å‡ºæœ‰ç”¨ä¿¡æ¯äº†ã€‚ã€‚</li>
</ul>
<h2 id="å¤ç°ä¸€ä¸‹å´©æºƒ"><a href="#å¤ç°ä¸€ä¸‹å´©æºƒ" class="headerlink" title="å¤ç°ä¸€ä¸‹å´©æºƒ"></a>å¤ç°ä¸€ä¸‹å´©æºƒ</h2><p>å…ˆæ¥ä¸ªç®€å•çš„ä»£ç ï¼ŒéªŒè¯ä¸€ä¸‹ <strong> <code>- (BOOL)hasPrefix:(NSString *)str;</code>ä¸­<code>nil argument</code>ï¼Œä¹Ÿå°±æ˜¯<code>str</code>ä¸º<code>nil</code>ã€‚ </strong></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[]) &#123;</span><br><span class="line">    <span class="keyword">@autoreleasepool</span> &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, @([<span class="string">@""</span> hasPrefix:<span class="literal">nil</span>]));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä¸€ä¸‹ï¼Œç»“æœå¾ˆæ„æ–™ä¹‹ä¸­ï¼Œå¾—å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Untitled.m:<span class="number">4</span>:<span class="number">29</span>: warning: null passed to a callee that requires a non-null argument [-Wnonnull]</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, @([<span class="string">@""</span> hasPrefix:<span class="literal">nil</span>]));</span><br><span class="line">                            ^         ~~~</span><br><span class="line"><span class="number">1</span> warning generated.</span><br><span class="line">Terminated due to signal: ABORT TRAP (<span class="number">6</span>)</span><br><span class="line">2018-07-25 10:44:50.569 Untitled[53770:899141] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFConstantString hasPrefix:]: nil argument'</span><br><span class="line">*** First throw call stack:</span><br><span class="line">(</span><br><span class="line">	<span class="number">0</span>   CoreFoundation                      <span class="number">0x00007fff30aae2db</span> __exceptionPreprocess + <span class="number">171</span></span><br><span class="line">	<span class="number">1</span>   libobjc.A.dylib                     <span class="number">0x00007fff57c58c76</span> objc_exception_throw + <span class="number">48</span></span><br><span class="line">	<span class="number">2</span>   CoreFoundation                      <span class="number">0x00007fff30b3fd7d</span> +[<span class="built_in">NSException</span> raise:format:] + <span class="number">205</span></span><br><span class="line">	<span class="number">3</span>   CoreFoundation                      <span class="number">0x00007fff30a01840</span> -[__NSCFString hasPrefix:] + <span class="number">96</span></span><br><span class="line">	<span class="number">4</span>   Untitled                            <span class="number">0x000000010787fd60</span> main + <span class="number">64</span></span><br><span class="line">	<span class="number">5</span>   libdyld.dylib                       <span class="number">0x00007fff58872015</span> start + <span class="number">1</span></span><br><span class="line">)</span><br><span class="line">libc++abi.dylib: terminating with uncaught exception of type <span class="built_in">NSException</span></span><br></pre></td></tr></table></figure>
<p>ç»è¿‡<code>1 warning generated</code>ä¹‹åï¼Œæœæ–­å´©æºƒäº†ï¼Œè¿˜æœ‰æ˜ç¡®çš„å´©æºƒæ—¶å€™æ ˆç»“æ„ã€‚</p>
<p>å¥½ï¼Œé—®é¢˜ç¡®å®šäº†å°±æ˜¯è¿™ä¸ª<code>1 warning generated</code>é€ æˆçš„ã€‚æ”¹ä¸‹å°±å®Œäº‹å’¯ï½ï½</p>
<h2 id="å¯»æ‰¾é—®é¢˜"><a href="#å¯»æ‰¾é—®é¢˜" class="headerlink" title="å¯»æ‰¾é—®é¢˜"></a>å¯»æ‰¾é—®é¢˜</h2><h3 id="å°è¯•è§£é™¤warning"><a href="#å°è¯•è§£é™¤warning" class="headerlink" title="å°è¯•è§£é™¤warning"></a>å°è¯•è§£é™¤warning</h3><p>è¿œç¨‹è¿›å»ä¹‹åæˆ‘éœ‡æƒŠäº†ï¼Œ<code>warning: 999+</code>ã€‚å…ˆå¿«é€Ÿæ‰¾åˆ°é—®é¢˜ï¼Œè¦ä»€ä¹ˆè‡ªè¡Œè½¦ã€‚ã€‚</p>
<p>Xcodeä¸­å…¨å±€æœç´¢<code>hasPrefix</code>å…³é”®å­—ï¼Œå¸¦å˜é‡çš„å…¨éƒ¨åŠ ä¸Šæ–­ç‚¹ã€‚</p>
<p>runä¸€ä¸‹ï¼Œé—®é¢˜ä¾æ—§å¦‚æ­¤ã€‚ã€‚æ­£å¦‚ä¸Šé¢è¯´çš„ä¸€æ ·ï¼š</p>
<blockquote>
<p><code>First throw call stack</code>ä¸‹æ–¹å‡ä¸ºåœ°å€ï¼Œè¯´æ˜æ­¤å‡½æ•°åº”è¯¥åœ¨ä¸€ä¸ª<code>.a/.framework</code>ä¸­ã€‚</p>
</blockquote>
<p>GO DIEâ€¦</p>
<p>PS.</p>
<ul>
<li>å…³äº<code>hasPrefix</code>å‡½æ•°çš„<a href="https://developer.apple.com/documentation/foundation/nsstring/1410309-hasprefix?language=objc" target="_blank" rel="noopener">OCå£°æ˜</a>ã€<a href="https://developer.apple.com/documentation/foundation/nsstring/1410309-hasprefix" target="_blank" rel="noopener">swiftå£°æ˜</a>å‡ä¸ºå®Œæ•´å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å®‰å¿ƒå…¨å±€æœç´¢å°±èƒ½æ‰¾åˆ°ä»£ç ä¸­å·²å­˜åœ¨çš„<code>hasPrefix</code>å‡½æ•°</li>
<li>é¡ºä¾¿æœäº†ä¸€ä¸‹è¯¥é¡¹ç›®ä¸åŒ…å«ç¬¬ä¸‰æ–¹<code>.a</code>, ä½†æ˜¯<code>.framework</code>ä¸å°‘ã€‚ã€‚æœ‰<a href="https://cocoapods.org" target="_blank" rel="noopener">CocoaPods</a>é›†æˆæœ‰ç›´æ¥æ‹–è¿›æ¥çš„ã€‚ã€‚</li>
</ul>
<h3 id="å°è¯•Method-Swizzlingä¸€ä¸‹"><a href="#å°è¯•Method-Swizzlingä¸€ä¸‹" class="headerlink" title="å°è¯•Method Swizzlingä¸€ä¸‹"></a>å°è¯•Method Swizzlingä¸€ä¸‹</h3><p>è¿™ç©æ„æ—¢ç„¶åœ¨åˆ«äººçš„frameworkä¸­ï¼Œé‚£å°±æ›´æ–°ä¸€ä¸‹å’¯ï¼Œä½†æ˜¯å…¨éƒ¨æ›´æ–°å¹¶ä¸å¯å–ã€‚ã€‚</p>
<p>frameworkçš„æ›´æ–°å¯èƒ½å¯¼è‡´ä¸€äº›ä¸å¯é¢„ä¼°çš„å¯å˜å› ç´ ã€‚æ¯”å¦‚è¯´APIä¿®æ”¹ã€å†…éƒ¨é€»è¾‘å˜æ›´å¯¼è‡´å¤–éƒ¨ä½¿ç”¨ä¸å…¼å®¹ã€æŸäº›å¼€å‘è€…å–œæ¬¢ç›´æ¥ä¿®æ”¹frameworkã€ç­‰ã€‚</p>
<p>æ‰€ä»¥å…ˆç¡®å®šæ˜¯å“ªä¸ªframeworkã€‚</p>
<p>Method Swizzlingã€‚å°†å…¶<code>-[__NSCFConstantString hasPrefix:]: nil argument</code>ç›´æ¥è¿‡æ»¤<code>nil</code>ï¼Œå²‚ä¸ç¾æ»‹æ»‹ï½ï½</p>
<p>å¥½äº†å…ˆæµ‹è¯•ä¸€ä¸‹ï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;objc/runtime.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MySafeString</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MySafeString</span></span></span><br><span class="line">+ (<span class="keyword">void</span>)load &#123;</span><br><span class="line">    Class originalClass = <span class="built_in">NSClassFromString</span>(<span class="string">@"__NSCFConstantString"</span>);</span><br><span class="line">    Class swizzledClass = [<span class="keyword">self</span> <span class="keyword">class</span>];</span><br><span class="line">    SEL originalSelector = <span class="keyword">@selector</span>(hasPrefix:);</span><br><span class="line">    SEL swizzledSelector = <span class="keyword">@selector</span>(safe_hasPrefix:);</span><br><span class="line">    Method originalMethod = class_getInstanceMethod(originalClass, originalSelector);</span><br><span class="line">    Method swizzledMethod = class_getInstanceMethod(swizzledClass, swizzledSelector);</span><br><span class="line">    </span><br><span class="line">    IMP originalIMP = method_getImplementation(originalMethod);</span><br><span class="line">    IMP swizzledIMP = method_getImplementation(swizzledMethod);</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *originalType = method_getTypeEncoding(originalMethod);</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *swizzledType = method_getTypeEncoding(swizzledMethod);</span><br><span class="line">    </span><br><span class="line">    class_replaceMethod(originalClass,swizzledSelector,originalIMP,originalType);</span><br><span class="line">    class_replaceMethod(originalClass,originalSelector,swizzledIMP,swizzledType);</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="built_in">BOOL</span>)safe_hasPrefix:(<span class="built_in">NSString</span> *)str &#123;</span><br><span class="line">    <span class="keyword">if</span> (str == <span class="literal">nil</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> [<span class="keyword">self</span> safe_hasPrefix:str];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[]) &#123;</span><br><span class="line">    <span class="keyword">@autoreleasepool</span> &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, @([<span class="string">@""</span> hasPrefix:<span class="literal">nil</span>]));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Untitled.m:<span class="number">33</span>:<span class="number">29</span>: warning: null passed to a callee that requires a non-null argument [-Wnonnull]</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, @([<span class="string">@""</span> hasPrefix:<span class="literal">nil</span>]));</span><br><span class="line">                            ^         ~~~</span><br><span class="line"><span class="number">1</span> warnings generated.</span><br><span class="line"><span class="number">2018</span><span class="number">-07</span><span class="number">-25</span> <span class="number">11</span>:<span class="number">32</span>:<span class="number">20.634</span> Untitled[<span class="number">54520</span>:<span class="number">926937</span>] <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>ä¸å´©æºƒäº†ï¼Œèµ¶ç´§ç²˜è¿‡å»ï¼Œå¹¶åœ¨<code>- (BOOL)safe_hasPrefix:(NSString *)str</code>ä¸­çš„<code>return YES;</code>æ‰“ä¸Šæ–­ç‚¹ã€‚</p>
<p>å†…å¿ƒå¾—åˆ°äº†æå¤§çš„æ»¡è¶³ï½ ç¾æ»‹æ»‹ï½ï½ï½</p>
<p>2åˆ†é’Ÿåã€‚</p>
<p>æ–­ç‚¹åœäº†ï¼Œå‘<code>- (BOOL)safe_hasPrefix:(NSString *)str</code>çš„<code>str</code>ä¼ nilçš„è°ƒç”¨è€…æ˜¯<code>[MOBFErrorReportService writeHTTPErrorMsg:error:]</code>ã€‚</p>
<p>å°†<code>MOBFErrorReportService</code>æ”¾å…¥<a href="https://www.google.com" target="_blank" rel="noopener">Google</a>çœ‹åˆ°ç¬¬äºŒä¸ªå°±æ˜¯è¿™ä¸ª<a href="http://bbs.mob.com/thread-23618-1-1.html" target="_blank" rel="noopener">[MOBFDevice duid] - BUGæäº¤- Mobå®˜æ–¹è®ºå›</a>ã€‚æ–‡ä¸­æŒ‡å‡º<code>SDK ç‰ˆæœ¬: ShareSDKVersion-3.5.1</code>ã€‚</p>
<p>å¥½äº†çœ‹ä¸€ä¸‹<code>ShareSDK</code>è¿™ä¸ªåº“ã€‚emmm è¿™ä¸ªåº“æ˜¯æ‹–æ‹½è¿›å»çš„ã€‚è€å“¥è¯´è¿™é¡¹ç›®æ¥æ‰‹ä¹‹åæ²¡æ›´æ–°è¿‡è¿™ä¸ªåº“ã€‚</p>
<p>äº‹å·²è‡³æ­¤ï¼Œç¡®å®šæ˜¯<code>ShareSDK</code>çš„é—®é¢˜ã€‚</p>
<p>æ›´æ–°ä¹‹ï¼Œé—®é¢˜è§£å†³ï½  çœŸå¿ƒçš„ç¾æ»‹æ»‹ï½ï½</p>
<p>PS.</p>
<ul>
<li>ä¸Šæ–‡ä¸­å…³äºç±»ç°‡çš„ Method Swizzlingï¼Œè¯¦è§<a href="http://www.tanhao.me/code/160723.html/" target="_blank" rel="noopener">Method Swizzlingçš„å„ç§å§¿åŠ¿</a>ã€‚</li>
</ul>
<h2 id="å¯»æ‰¾çš„è¿‡ç¨‹éƒ¨åˆ†ç‰¹å†™"><a href="#å¯»æ‰¾çš„è¿‡ç¨‹éƒ¨åˆ†ç‰¹å†™" class="headerlink" title="å¯»æ‰¾çš„è¿‡ç¨‹éƒ¨åˆ†ç‰¹å†™"></a>å¯»æ‰¾çš„è¿‡ç¨‹éƒ¨åˆ†ç‰¹å†™</h2><p>ä¸Šé¢çš„é€»è¾‘å¹¶ä¸æ˜¯ä¸€æ°”å‘µæˆï¼Œè€Œæ˜¯ç”±äºç²—å¿ƒä¹Ÿèµ°äº†éƒ¨åˆ†å¼¯è·¯ï¼Œç‰¹åˆ—å‡ºæ¥å¼•ä»¥ä¸ºæˆ’ã€‚</p>
<h3 id="çœ‹åˆ°å…¨å±€æ–­ç‚¹çœŸçš„èµ°ä¸åˆ°æ—¶"><a href="#çœ‹åˆ°å…¨å±€æ–­ç‚¹çœŸçš„èµ°ä¸åˆ°æ—¶" class="headerlink" title="çœ‹åˆ°å…¨å±€æ–­ç‚¹çœŸçš„èµ°ä¸åˆ°æ—¶"></a>çœ‹åˆ°å…¨å±€æ–­ç‚¹çœŸçš„èµ°ä¸åˆ°æ—¶</h3><p>ç”±äºä»£ç æ˜¯å…¬å¸ä»£ç ï¼Œä¹Ÿæ²¡æœ‰demo,æ‰€ä»¥å¸ƒå‰å²›ä¸ºå•¥ç¡®å®æ–­ç‚¹ä¸ä¼šèµ°ã€‚ã€‚ã€‚</p>
<p>MMP çœ‹åˆ°äº†<code>First throw call stack</code>ä¹‹åç¬¬ä¸€ååº”æ˜¯ï¼Œè¿™äº›åœ°å€åº”è¯¥å¯ä»¥è¿˜åŸåˆ°å¯¹åº”çš„ä½ç½®ã€‚</p>
<p>ç„¶åæƒ³åˆ°äº†é€†å‘é‡Œé¢çš„éªšæ“ä½œã€‚é¡¿æ—¶æƒ³é€†å‘åˆ†æä¸€ä¸‹ã€‚ã€‚ã€‚</p>
<p>ä½†ç”±äºçœ‹äº†ä¸€ä¸‹<code>.app</code>ä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶æœ‰ <strong> 40M </strong> ,ç®—äº†ç®—äº†ï¼ŒIDAè½½å…¥çš„æœ‰ç‚¹æ…¢ï¼Œè¿™è¦å¥½ä¹…æ‰èƒ½åˆ†æå®Œã€‚ã€‚</p>
<p>æƒ³äº†æƒ³å¤©è¦ä¸‹é›¨ï¼Œåª³å¦‡å’Œå¨ƒéƒ½åœ¨å¤–é¢ã€‚æœæ–­æ”¾å¼ƒåˆ†æä¸€æ³¢çš„å†²åŠ¨ï¼Œæ¥<code>Method Swizzling</code>ä¼šæ›´å¿«ã€‚</p>
<h3 id="çœ‹èµ°çœ¼çš„-Method-Swizzling"><a href="#çœ‹èµ°çœ¼çš„-Method-Swizzling" class="headerlink" title="çœ‹èµ°çœ¼çš„ Method Swizzling"></a>çœ‹èµ°çœ¼çš„ Method Swizzling</h3><p>ä¹‹å‰çœ‹è¿‡è¿™ä¸ª<a href="http://www.tanhao.me/code/160723.html/" target="_blank" rel="noopener">Method Swizzlingçš„å„ç§å§¿åŠ¿</a>æ–‡ç« ï¼Œå°è±¡æ·±åˆ»ã€‚</p>
<p>ç”±äº <strong> Method Swizzling </strong> é£é™©ä¸é‚£ä¹ˆå®¹æ˜“æ§åˆ¶ï¼Œæ‰€ä»¥å¹¶æ²¡ç”¨ç±»ç°‡ç›¸å…³çš„ã€‚</p>
<p>ä¸€é¡¿<code>cmd c / cmd v</code>ä¹‹åæ”¹äº†ç±»åå°±æ‰”äº†è¿‡å»ã€‚å½“æ—¶å¤§çº¦è¿™ä¸ªæ ·å­ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)safe_hasPrefix:(<span class="built_in">NSString</span> *)str &#123;</span><br><span class="line">    <span class="keyword">if</span> (str == <span class="literal">nil</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// æ­¤å¤„ä¼šå‘ç”Ÿå¾ªç¯è°ƒç”¨ï¼Œæ˜¯é”™è¯¯çš„ç¤ºä¾‹</span></span><br><span class="line">        <span class="keyword">return</span> [(<span class="built_in">NSString</span> *)<span class="keyword">self</span> hasPrefix:str];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­£å¦‚æˆ‘åˆšåœ¨ä¸Šé¢çš„å¤‡æ³¨ä¸€æ ·ã€‚</p>
<p>è„‘è¢‹ä¸€çƒ­ï¼Œè¿™ç±»ç°‡ä¼šä¸ä¼šæœ‰åˆ«çš„å‘ï¼Œç„¶åè¿‡åˆ†çš„è‡ªä¿¡å¿½ç•¥äº†<code>safe_</code>å‰ç¼€ï¼Œå¹¶å†™äº†ä¸ªCçš„å‰ç¼€æ¯”è¾ƒï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)safe_hasPrefix:(<span class="built_in">NSString</span> *)str &#123;</span><br><span class="line">    <span class="keyword">if</span> (str == <span class="literal">nil</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (((<span class="built_in">NSString</span> *)<span class="keyword">self</span>).length &lt; str.length) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// æ­¤å¤„é€»è¾‘å¹¶æœªç»è¿‡å¾ˆå¤šçš„æµ‹è¯•ç”¨ä¾‹æµ‹è¯•ï¼Œåªæ˜¯ä¸´æ—¶ä¿®è¡¥ã€‚å®é™…æ–¹æ¡ˆåº”è¯¥ç›´æ¥è°ƒç”¨safe_hasPrefix</span></span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">char</span> *str1 = [str cStringUsingEncoding:<span class="built_in">NSUTF8StringEncoding</span>];</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">char</span> *str2 = [(<span class="built_in">NSString</span> *)<span class="keyword">self</span> cStringUsingEncoding:<span class="built_in">NSUTF8StringEncoding</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">NSInteger</span> idx = str.length; idx &gt;= <span class="number">0</span>; idx--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (str1[idx] != str2[idx]) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€ç•ªæ¢­å“ˆä¹‹åï¼Œå®šä½åˆ°äº†é—®é¢˜ã€‚</p>
<p>ä½†æ˜¯ä»Šå¤©å¤ç›˜çš„æ—¶å€™æƒ³åˆ°è¿™ä¸ªç±»ç°‡çš„IMPæ­£å¸¸çš„æ“ä½œä¹Ÿä¸å¯èƒ½å‡ºç°å¾ªç¯è°ƒç”¨ã€‚ã€‚ã€‚ã€‚</p>
<p>ç„¶åå‘ç°æ˜¨å¤©çš„ä¸€ç•ªæ¢­å“ˆçœŸçš„æ˜¯å¼±æ™ºã€‚ã€‚æƒ­æ„§æƒ­æ„§ã€‚ã€‚ã€‚</p>
<h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><ul>
<li>è§£å†³é—®é¢˜çš„æ–¹æ¡ˆåœ¨äºçŸ¥è¯†é¢çš„å®½åº¦ã€‚ï¼ˆä¸€ç›´ä¸ºæˆ‘æ²¡æœ‰é€šè¿‡<code>First throw call stack</code>ç›´æ¥å®šä½è€Œå®³ç¾ï¼‰</li>
<li>ç€æ€¥ä¸‹ç­çš„æ—¶å€™åˆ«å†™å¤ªå¤šé€»è¾‘ï¼Œå®¹æ˜“æ¼ã€‚è¦ä¹ˆåˆ«ç€æ€¥ï¼Œè¦ä¹ˆä¸‡åˆ†å°å¿ƒã€‚</li>
<li>é›†æˆç¬¬ä¸‰æ–¹SDKåˆ«çèƒ¡é—¹ï¼Œä½¿ç”¨ä»£ç ç›´æ¥é›†æˆ(é™¤éä¸‡ä¸å¾—å·²)ã€‚å°½é‡ä½¿ç”¨<a href="https://cocoapods.org" target="_blank" rel="noopener">CocoaPods</a>è¿™æ ·çš„å·¥å…·ã€‚</li>
<li>ä»£ç ä¸­çš„ <strong> warning </strong> è®°å¾—æ¶ˆä¸€ä¸‹ã€‚æˆå¤©<code>999+</code> å®¹æ˜“æ¼æ‰å…³é”®ä¿¡æ¯ã€‚</li>
<li>å¼€å‘çš„ç¬¬ä¸‰æ–¹SDKä¸€å®šè¦æ³¨æ„æµ‹è¯•è¦†ç›–ç‡ã€‚</li>
<li>swiftå¤§æ³•å¥½ã€‚swiftä¸ç”¨<code>!</code>ç»å¯¹ä¸ä¼šæœ‰æœºä¼šå‡ºç°<code>func hasPrefix(_ str: String) -&gt; Bool</code>ä¸­å‚æ•°<code>str</code>ä¼ ç©ºçš„å¯èƒ½ :)</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ˜¨å¤©ä¸‹ç­æ—¶å€™ä¸€æœ‹å‹ç¢°åˆ°ä¸€ä¸ªä¸‹é¢çš„å´©æºƒï¼Œä½†æ˜¯å…¨å±€æ–­ç‚¹å´æ— æ³•æ–­åˆ°æŒ‡å®šä½ç½®ã€‚é‰´äºä¸ä¿¡é‚ªçš„æ€åº¦ï¼Œå†³å®šå°è¯•ä¸€ç•ªã€‚ç„¶åå°†æ­¤äº‹è®°å½•å¦‚ä¸‹æ–‡ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;*** Terminating app due to uncaught exception &amp;apos;NSInvalidArgumentException&amp;apos;, reason: &amp;apos;-[__NSCFConstantString hasPrefix:]: nil argument&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*** First throw call stack:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(0x18521ed8c .....)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;libc++abi.dylib: terminating with uncaught exception of type NSException&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="iOS" scheme="https://madordie.github.io/categories/iOS/"/>
    
    
      <category term="DEBUG" scheme="https://madordie.github.io/tags/DEBUG/"/>
    
  </entry>
  
  <entry>
    <title>sketechæ¨¡å—åŒæ­¥æ’ä»¶</title>
    <link href="https://madordie.github.io/post/sync-sketchplugin/"/>
    <id>https://madordie.github.io/post/sync-sketchplugin/</id>
    <published>2018-06-21T10:33:47.000Z</published>
    <updated>2018-06-22T02:27:56.050Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h2 id="Sketch-æ¨¡å—åŒæ­¥æ’ä»¶"><a href="#Sketch-æ¨¡å—åŒæ­¥æ’ä»¶" class="headerlink" title="Sketch æ¨¡å—åŒæ­¥æ’ä»¶"></a>Sketch æ¨¡å—åŒæ­¥æ’ä»¶</h2><p>é€šè¿‡è¯¥æ’ä»¶å¯ä»¥å°†sketchä¸­çš„ç”»æ¿è½¬æ¢ä¸ºdataç„¶åä¸Šä¼ è‡³æœåŠ¡å™¨ï¼Œå¹¶èƒ½é€šè¿‡æ’ä»¶å°†æœåŠ¡å™¨çš„dataä¸‹è½½è‡³æœ¬åœ°è¿˜åŸä¸ºä¹‹å‰çš„ç”»æ¿ã€‚</p>
<p><img src="https://github.com/madordie/sync-sketch-plugin/blob/master/Untitled.gif?raw=true" alt="é¢„è§ˆ"></p>
<a id="more"></a>
<h2 id="æ ¸å¿ƒåŠŸèƒ½"><a href="#æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="æ ¸å¿ƒåŠŸèƒ½"></a>æ ¸å¿ƒåŠŸèƒ½</h2><p>åŠŸèƒ½çš„å®ç°éƒ½æ˜¯é€šè¿‡<a href="https://www.sketchapp.com" target="_blank" rel="noopener">Sketch.app</a>çš„APIå®ç°</p>
<p>å…¶æ ¸å¿ƒåŠŸèƒ½å°±ä¿©ï¼š</p>
<ul>
<li>å°†ç”»æ¿ç¼–ç </li>
<li>è§£ç ä¸ºç”»æ¿</li>
</ul>
<h2 id="æ ¸å¿ƒä»£ç "><a href="#æ ¸å¿ƒä»£ç " class="headerlink" title="æ ¸å¿ƒä»£ç "></a>æ ¸å¿ƒä»£ç </h2><p>ç”±äºåŠŸèƒ½å¹¶ä¸å¤æ‚ï¼Œä½†æ˜¯sketchå¹¶æ²¡æœ‰å®Œæ•´çš„APIæ–‡æ¡£ï¼Œæ‰€ä»¥åªèƒ½æ‘¸ç´¢ç€æ¥ï¼Œæœ€åæ€»ç»“ä¸€ä¸‹ç”¨åˆ°çš„APIï¼Œåªæœ‰ä¸‹é¢çš„å‡ ä¸ªé‡è¦å‡½æ•°ã€‚</p>
<p>ä½†æ˜¯è¦æ‰¾åˆ°è¿™äº›APIå¹¶ä¸æ˜¯éšæ‰‹ä¸€ä¸ªGoogleå¯ä»¥å¾—åˆ°ï¼Œç°å°†å…¶åˆ—å‡ºï¼Œæ–¹ä¾¿ä½ èƒ½éšæ‰‹Googleä¸€ä¸‹å°±å¾—åˆ°ï¼šï¼‰</p>
<p>å¦å¤–ï¼Œä¸‹é¢å‡ éƒ¨åˆ†çš„ä»£ç éƒ½é€šè¿‡<a href="https://github.com/ccgus/CocoaScript" target="_blank" rel="noopener">CocoaScript</a>çš„è¯­æ³•ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥åº”ç”¨åˆ°æ’ä»¶ä¸­ã€‚</p>
<p>ä¸ºäº†èƒ½æ›´å¥½çš„ç†è§£å’Œä½¿ç”¨ç›¸å…³APIï¼Œæˆ‘å°½é‡è¯¦ç»†ã€‚</p>
<h3 id="å°†ç”»æ¿ç¼–ç "><a href="#å°†ç”»æ¿ç¼–ç " class="headerlink" title="å°†ç”»æ¿ç¼–ç "></a>å°†ç”»æ¿ç¼–ç </h3><p>æœ¬èŠ‚ä¼šå°†æ‰€æœ‰å·²ç»é€‰ä¸­çš„å±‚æ‰€å¯¹åº”çš„ç”»æ¿è½¬æ¢ä¸ºjsonå­—ç¬¦ä¸²ã€‚</p>
<p>ps.</p>
<ul>
<li><code>å±‚</code>åŒ…å«sketchèƒ½å¤Ÿå‘ˆç°çš„æ‰€æœ‰ç»„ä»¶ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼šæ–‡æœ¬ã€çŸ©å½¢ã€å›¾ç‰‡ã€ç”»æ¿ã€‚</li>
<li>å¦‚æœé€‰ä¸­çš„å±‚æ²¡æœ‰ç”»æ¿ï¼Œå°†ä¼šè¢«å¿½ç•¥ã€‚</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> selection = context.selection,</span><br><span class="line">    artboards = [];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; selection.count(); i++) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// å–å‡ºé€‰ä¸­çš„æ‰€æœ‰ç”»æ¿</span></span><br><span class="line">        <span class="keyword">var</span> artboard = selection[i].parentArtboard();</span><br><span class="line">        <span class="keyword">if</span> (artboards.indexOf(artboard) == <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="comment">// è¿‡æ»¤é‡å¤çš„ç”»æ¿</span></span><br><span class="line">            artboards.push(artboard);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (artboards.length == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// å¹¶æ— é€‰ä¸­çš„ä»»ä½•ç”»æ¿</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤æ—¶ artboards æ•°ç»„ï¼Œ å³ä¸ºå½“å‰é€‰ä¸­çš„æ‰€æœ‰ç”»æ¿</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> selectionStrings = [];</span><br><span class="line">artboards.forEach(<span class="function"><span class="params">artboard</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// å°†ç”»æ¿è½¬ä¸ºJSONå­—ç¬¦ä¸²ï¼Œå¹¶ä¿å­˜åœ¨ selectionStrings æ•°ç»„ä¸­</span></span><br><span class="line">        selectionStrings.push(MSJSONDataArchiver.archiveStringWithRootObject_error_(artboard.immutableModelObject(), nil));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†selectionStringsæ•°ç»„è½¬ä¸ºæ•°ç»„JSONå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">var</span> selectionsString = <span class="string">'['</span> + selectionStrings.join(<span class="string">','</span>) + <span class="string">']'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤æ—¶selectionsStringå­—ç¬¦ä¸²å³ä¸ºå½“å‰é€‰ä¸­çš„æ‰€æœ‰ç”»æ¿çš„jsonæ•°ç»„å­—ç¬¦ä¸²å½¢å¼ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="è§£ç ä¸ºç”»æ¿"><a href="#è§£ç ä¸ºç”»æ¿" class="headerlink" title="è§£ç ä¸ºç”»æ¿"></a>è§£ç ä¸ºç”»æ¿</h3><p>æ¥ä¸Šä¸€èŠ‚çš„<code>selectionsString</code>ã€‚</p>
<p>å…ˆå°†<code>selectionsString</code>è½¬ä¸º<code>page</code>çš„jsonæ•°æ®ï¼Œç„¶åè§£æä¸ºä¸€ä¸ªæ–°çš„<code>page</code>ï¼Œå¹¶å±…ä¸­å±•ç¤ºã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> selectionsString = res.layers,</span><br><span class="line">    pageUUID = NSUUID.UUID().UUIDString(),</span><br><span class="line">    <span class="comment">// ç”¨pageçš„JSONåŒ…è£¹selectionsStringï¼ŒåŒæ—¶ç”Ÿæˆä¸€ä¸ªæ–°çš„UUID</span></span><br><span class="line">    pageString = <span class="string">'&#123;"_class":"page","do_objectID":"'</span> + pageUUID + <span class="string">'","layers":'</span> + selectionsString + <span class="string">'&#125;'</span>,</span><br><span class="line">    data = NSString.alloc().initWithString(pageString).dataUsingEncoding_(<span class="number">4</span>),</span><br><span class="line">    <span class="comment">// å°†JSONè§£ç </span></span><br><span class="line">    unarchive = MSJSONDataUnarchiver.unarchiveObjectWithData(data),</span><br><span class="line">    <span class="comment">// ç”Ÿæˆæ–°çš„page</span></span><br><span class="line">    newPage = MSPage.alloc().initWithImmutableModelObject(unarchive),</span><br><span class="line">    <span class="comment">// æ’å…¥ä¸€ä¸ªæ–°çš„page</span></span><br><span class="line">    page = MSDocument.currentDocument().addBlankPage();</span><br><span class="line"><span class="comment">// å°†ç”Ÿæˆçš„pageæ‰€æœ‰çš„layersè½¬ç§»åˆ°æ–°çš„pageé‡Œé¢</span></span><br><span class="line">page.addLayers(newPage.layers());</span><br><span class="line"><span class="comment">// ä¸ºpageè®¾ç½®å“¥åå­—</span></span><br><span class="line">page.setName(res.project);</span><br><span class="line"><span class="comment">// pageå‰§ä¸­</span></span><br><span class="line">MSDocument.currentDocument().contentDrawView().centerLayersInCanvas();</span><br><span class="line">MSDocument.currentDocument().pageTreeLayoutDidChange();</span><br></pre></td></tr></table></figure>
<h3 id="å…¶ä»–ä»£ç "><a href="#å…¶ä»–ä»£ç " class="headerlink" title="å…¶ä»–ä»£ç "></a>å…¶ä»–ä»£ç </h3><p>å…³äºåˆ«çš„åç«¯æ“ä½œå•Š ä»€ä¹ˆçš„æˆ‘è®¤ä¸ºå¹¶ä¸æ˜¯æ ¸å¿ƒä»£ç ã€‚é‚£ä»£ç è°éƒ½ä¼šå†™ã€‚ã€‚æ¯•ç«Ÿæˆ‘å†™è¿™ä¸ªçš„æ—¶å€™åªæœ‰2å‘¨çš„æ‘¸ç´¢ç»éªŒğŸ˜‚ï¼Œè¿˜æ˜¯ä¸èŠè¿™ä¸ªäº†ã€‚</p>
<ul>
<li><code>sync-npm</code> æ’ä»¶ç›¸å…³çš„ç›®å½•ï¼Œé‡‡ç”¨<a href="https://github.com/skpm/skpm" target="_blank" rel="noopener">skpm</a>æ„å»º</li>
<li><code>sync-server</code> æ’ä»¶å¯¹åº”çš„æœåŠ¡ç«¯ä»£ç ï¼Œé‡‡ç”¨<a href="https://nodejs.org/en/" target="_blank" rel="noopener">Node-js</a>æ„å»º</li>
</ul>
<h2 id="ç›®å‰è¿˜å­˜åœ¨çš„é—®é¢˜"><a href="#ç›®å‰è¿˜å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="ç›®å‰è¿˜å­˜åœ¨çš„é—®é¢˜"></a>ç›®å‰è¿˜å­˜åœ¨çš„é—®é¢˜</h2><ul>
<li>å¦‚æœæ˜¯å¸¦å›¾ç‰‡çš„ç”»æ¿ï¼Œå¹¶ä¸”è¾ƒå¤šçš„æ—¶å€™ï¼Œ<code>selectionsString</code>ä¼šå¾ˆå¤§ï¼Œä¼ è¾“é€Ÿåº¦æœ‰ç‚¹æ…¢ã€‚ã€‚</li>
<li>UIäº¤äº’æœ‰ç‚¹åƒè—•ã€‚ã€‚æœ€å¥½å¼€å‘ä¸€å¥—macOSçš„UIï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯åªèœé¸¡ã€‚ã€‚</li>
<li>é¡¹ç›®çš„ä»£ç æˆ‘åªæ˜¯ç®€ç®€å•å•çš„è¿å­¦å¸¦å†™2å‘¨åšå‡ºæ¥çš„ã€‚ã€‚å†™çš„ä¸æ˜¯ä¸€èˆ¬çš„æ¸£ï¼Œè§è°…ã€‚ã€‚</li>
</ul>
<h2 id="ä½ å¯èƒ½éœ€è¦çš„å‚è€ƒèµ„æ–™"><a href="#ä½ å¯èƒ½éœ€è¦çš„å‚è€ƒèµ„æ–™" class="headerlink" title="ä½ å¯èƒ½éœ€è¦çš„å‚è€ƒèµ„æ–™"></a>ä½ å¯èƒ½éœ€è¦çš„å‚è€ƒèµ„æ–™</h2><ul>
<li>Sketchçš„å¤´æ–‡ä»¶ï¼š<a href="https://github.com/abynim/Sketch-Headers" target="_blank" rel="noopener">Sketch-Headers</a>ï¼Œå¯ä»¥çœå»è‡ªå·±<a href="http://stevenygard.com/projects/class-dump/" target="_blank" rel="noopener">class-dump</a>çš„éº»çƒ¦.</li>
<li>æ’ä»¶å¼€å‘ç¥å™¨ï¼š<a href="https://github.com/skpm/skpm" target="_blank" rel="noopener">skpm</a></li>
<li>ç”¨æ¥è°ƒè¯•å¾ˆä¸é”™ï¼š<a href="https://github.com/skpm/sketch-dev-tools" target="_blank" rel="noopener">Sketch DevTools</a></li>
<li>å®˜æ–¹å¼€å‘æ–‡æ¡£ï¼š<a href="https://developer.sketchapp.com" target="_blank" rel="noopener">Sketch Developer</a></li>
<li>æ’ä»¶å¼€å‘ç¤¾åŒºï¼š<a href="https://sketchplugins.com" target="_blank" rel="noopener">Sketch Developers</a></li>
<li>æ’ä»¶ä½¿ç”¨çš„è¯­è¨€ï¼š<a href="https://github.com/ccgus/CocoaScript" target="_blank" rel="noopener">CocoaScript</a>ï¼Œä½†æ˜¯å¹¶ä¸ä»…é™è¿™ä¸€ç§å“Ÿ</li>
<li>æ¨èæœç´¢å¼•æ“: <a href="https://www.google.com" target="_blank" rel="noopener">Google</a>ï¼Œåˆ«é—®æˆ‘ä¸ºä»€ä¹ˆç”¨Googleä¸ç”¨ç™¾åº¦ï¼Œæˆ‘æ˜¯ä¸ä¼šå‘Šè¯‰ä½ sketchæ’ä»¶å¼€å‘æœ¬æ¥èµ„æ–™å°±å°‘ï¼Œå›½å†…æ›´å°‘çš„ã€‚ã€‚</li>
</ul>
<h2 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h2><p>è€è§„çŸ©ï¼š<a href="https://github.com/madordie/sync-sketch-plugin" target="_blank" rel="noopener">madordie/sync-sketch-plugin</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Sketch-æ¨¡å—åŒæ­¥æ’ä»¶&quot;&gt;&lt;a href=&quot;#Sketch-æ¨¡å—åŒæ­¥æ’ä»¶&quot; class=&quot;headerlink&quot; title=&quot;Sketch æ¨¡å—åŒæ­¥æ’ä»¶&quot;&gt;&lt;/a&gt;Sketch æ¨¡å—åŒæ­¥æ’ä»¶&lt;/h2&gt;&lt;p&gt;é€šè¿‡è¯¥æ’ä»¶å¯ä»¥å°†sketchä¸­çš„ç”»æ¿è½¬æ¢ä¸ºdataç„¶åä¸Šä¼ è‡³æœåŠ¡å™¨ï¼Œå¹¶èƒ½é€šè¿‡æ’ä»¶å°†æœåŠ¡å™¨çš„dataä¸‹è½½è‡³æœ¬åœ°è¿˜åŸä¸ºä¹‹å‰çš„ç”»æ¿ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://github.com/madordie/sync-sketch-plugin/blob/master/Untitled.gif?raw=true&quot; alt=&quot;é¢„è§ˆ&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="å·¥å…·" scheme="https://madordie.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="Sketchplugin" scheme="https://madordie.github.io/tags/Sketchplugin/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºæ—¥å¿—æ‰“å°å’Œè¿‡æ»¤çš„é‚£ç‚¹ç ´äº‹</title>
    <link href="https://madordie.github.io/post/reverse-ios-socat-watch-filter/"/>
    <id>https://madordie.github.io/post/reverse-ios-socat-watch-filter/</id>
    <published>2018-06-14T16:00:00.000Z</published>
    <updated>2018-07-02T11:05:37.344Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>å‰ä¸¤å¤©ï¼Œé‡å¯ç”µè„‘çªç„¶å‘ç°æˆ‘çš„<code>iOS8</code>è®¾å¤‡æ— æ³•è¿æ¥åˆ°<code>MacOS</code>äº†ã€‚ã€‚</p>
<p>MMPï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰åŠæ³•ä½¿ç”¨Xcodeè°ƒè¯•ã€ä¹‹å‰ä½¿ç”¨çš„æ—¥å¿—æŸ¥çœ‹ä¹Ÿæ²¡æœ‰åŠæ³•ç»§ç»­ã€‚ã€‚</p>
<p>å…·ä½“æŠ¥é”™å¦‚ä¸‹ï¼š<br><code>Xcode&lt;Version 9.4 (9F1027a)&gt;</code>æŠ¥é”™å¦‚ä¸‹: (æˆ‘å®‰è£…è¿‡<code>Xcode10 beta1</code>)<br><img src="/images/2018-06-15-10-13-16.png" alt="XcodeæŠ¥é”™"></p>
<p><code>iTunes</code>æŠ¥é”™å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iTunes æ— æ³•è¿æ¥ iPhone â€œiPhoneâ€ï¼Œå› ä¸ºæ”¶åˆ°æ¥è‡ªæ­¤è®¾å¤‡çš„æ— æ•ˆå“åº”ã€‚</span><br></pre></td></tr></table></figure></p>
<p><img src="/images/2018-06-15-10-06-16.png" alt="iTunesæŠ¥é”™"></p>
<p><code>Apple Configurator2</code>æŠ¥é”™å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å·²æ”¶åˆ°è®¾å¤‡ä¸Šçš„æ„å¤–å“åº”ã€‚</span><br></pre></td></tr></table></figure></p>
<p><img src="/images/2018-06-15-10-09-33.png" alt="Apple Configurator2æŠ¥é”™"></p>
<a id="more"></a>
<p>è¿˜æ˜¯ å…ˆæ¥èŠä¸€ä¸‹æ—¥å¿—æ‰“å°çš„å‡ ç§æ–¹æ¡ˆå§ã€‚</p>
<h2 id="æ‰‹æœºå¯ä»¥è¿æ¥åˆ°MacOS"><a href="#æ‰‹æœºå¯ä»¥è¿æ¥åˆ°MacOS" class="headerlink" title="æ‰‹æœºå¯ä»¥è¿æ¥åˆ°MacOS"></a>æ‰‹æœºå¯ä»¥è¿æ¥åˆ°MacOS</h2><p>è¿™ç§æƒ…å†µæ˜¯æœ€å¸¸è§çš„ï¼Œå°±æ˜¯èƒ½åœ¨Xcodeä¸‹Debugâ€¦.</p>
<h3 id="æ–¹æ¡ˆä¸€ï¼šConsole-app-æ§åˆ¶å°"><a href="#æ–¹æ¡ˆä¸€ï¼šConsole-app-æ§åˆ¶å°" class="headerlink" title="æ–¹æ¡ˆä¸€ï¼šConsole.app(æ§åˆ¶å°)"></a>æ–¹æ¡ˆä¸€ï¼šConsole.app(æ§åˆ¶å°)</h3><p>è¿™æ˜¯MacOSè‡ªå¸¦çš„æ—¥å¿—ç¥å™¨ï½ æ•ˆæœé¡¶å‘±å‘±ğŸ‘ğŸ‘ğŸ‘ï¼Œæˆªå›¾å¦‚ä¸‹ï¼š<br><img src="/images/2018-06-15-10-23-02.png" alt="Console.app"></p>
<p>å…·ä½“ç”¨æ³•æˆ‘å°±ä¸è¯´äº†ã€‚ã€‚ã€‚æ¯•ç«Ÿéƒ½æ˜¯ä¸­æ–‡ğŸ˜‚</p>
<h3 id="æ–¹æ¡ˆäºŒï¼šLogGuru"><a href="#æ–¹æ¡ˆäºŒï¼šLogGuru" class="headerlink" title="æ–¹æ¡ˆäºŒï¼šLogGuru"></a>æ–¹æ¡ˆäºŒï¼šLogGuru</h3><p><a href="https://github.com/madordie/LogGuru" target="_blank" rel="noopener">madordie/LogGuru</a> ä¹Ÿä¸é”™ï¼Œå¾ˆä¹…ä¹‹å‰forkè‡ª<a href="https://github.com/FIRHQ/LogGuru" target="_blank" rel="noopener">FIRHQ/LogGuru</a>ï¼Œå¢åŠ äº†ç›´æ¥è¿‡æ»¤çš„åŠŸèƒ½ï¼Œè¦ä¸ç„¶é€Ÿåº¦çœŸçš„å¾ˆæ…¢ã€‚ã€‚</p>
<p>åªè¦æ’å…¥USBï¼Œå³å¯æ˜¾ç¤ºæ—¥å¿—ï¼Œè¿˜æ˜¯ä¸é”™æ»´ã€‚ã€‚</p>
<p><img src="/images/2018-06-15-10-29-07.png" alt="åŸæ¥çš„æˆªå›¾"></p>
<h3 id="æ–¹æ¡ˆä¸‰-å…¶ä»–çš„"><a href="#æ–¹æ¡ˆä¸‰-å…¶ä»–çš„" class="headerlink" title="æ–¹æ¡ˆä¸‰: å…¶ä»–çš„"></a>æ–¹æ¡ˆä¸‰: å…¶ä»–çš„</h3><p>è¿˜æœ‰å¾ˆå¤šæ–¹æ¡ˆï¼Œæ¯”å¦‚è¯´å‘½ä»¤è¡Œå•Šã€å…¶ä»–çš„å·¥å…·å•Šï¼Œæˆ‘å°±ä¸è¯´äº†ï¼Œæˆ‘è§‰å¾— <strong>Console.app(æ§åˆ¶å°)</strong> å°±å¤Ÿäº†ğŸ˜‚</p>
<h2 id="æ‰‹æœºæ— æ³•é“¾æ¥è¿›MacOS"><a href="#æ‰‹æœºæ— æ³•é“¾æ¥è¿›MacOS" class="headerlink" title="æ‰‹æœºæ— æ³•é“¾æ¥è¿›MacOS"></a>æ‰‹æœºæ— æ³•é“¾æ¥è¿›MacOS</h2><p>ä¹Ÿå°±æ˜¯æœ€å¼€å§‹è¯´çš„æŠ¥é”™çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è¿æ¥è¿›MacOSçš„æ–¹æ¡ˆå‡æ— æ³•ä½¿ç”¨ã€‚è‹¦é€¼ï¼Œåªèƒ½è®©iOSæ‰“å°æ—¥å¿—äº†ã€‚ã€‚</p>
<p>ä¸‹é¢éƒ½æ˜¯ <strong>è¶Šç‹±ç¯å¢ƒ</strong> ä¸‹çš„ã€‚ã€‚ä¸è¶Šç‹±è¿˜æœ‰äººç”¨iOS8ä¹ˆğŸ˜‚</p>
<p>å…ˆæ¥çœ‹ä¸ªæ–‡æ¡£ï¼š<a href="https://www.theiphonewiki.com/wiki/System_Log" target="_blank" rel="noopener">The iPhone Wiki/System Log</a>,è¿™é‡Œæä¾›äº†å¾ˆå¤šæ–¹æ¡ˆï¼Œä¹Ÿéå¸¸å…¨é¢ï¼Œå€¼å¾—ä¸€è¯•ã€‚</p>
<p>è‹¦é€¼çš„äº‹æƒ…æ˜¯æˆ‘æ‰‹ä¸Šçš„iOS8.4.1æ— æ³•ä½¿ç”¨<code>syslogd to /var/log/syslog</code>æ’ä»¶ï¼Œå°è¯•ä½¿ç”¨<a href="https://www.theiphonewiki.com/wiki/System_Log#On-device_with_saving_to_a_file_via_a_Python_script" target="_blank" rel="noopener">On-device with saving to a file via a Python script</a>çš„æ–¹æ¡ˆå»è§£å†³ä¹Ÿå¹¶ä¸å¦‚æ„ã€‚ã€‚</p>
<p>å¼€å§‹ç”¨<a href="https://www.theiphonewiki.com/wiki/System_Log#On-device_with_socat" target="_blank" rel="noopener">On-device with socat</a>ï¼ˆ åœ¨<a href="http://bbs.iosre.com" target="_blank" rel="noopener">iosre</a>ä¸­ä¹Ÿæœ‰ä¸€ä¸ªç±»ä¼¼çš„æ–‡ç« ï¼š<a href="http://bbs.iosre.com/t/ios-socat/139" target="_blank" rel="noopener">iOSæŸ¥çœ‹æ—¥å¿—åˆ©å™¨ â€”â€” socat</a>ï¼‰ï¼Œè¯´çš„éƒ½æ˜¯ç›¸å½“çš„è¯¦ç»†ã€‚</p>
<h3 id="socatçš„å‘"><a href="#socatçš„å‘" class="headerlink" title="socatçš„å‘"></a>socatçš„å‘</h3><h4 id="stopæ²¡æœ‰ç”¨"><a href="#stopæ²¡æœ‰ç”¨" class="headerlink" title="stopæ²¡æœ‰ç”¨"></a>stopæ²¡æœ‰ç”¨</h4><p>å¦‚<a href="http://bbs.iosre.com/t/ios-socat/139" target="_blank" rel="noopener">iOSæŸ¥çœ‹æ—¥å¿—åˆ©å™¨ â€”â€” socat</a>æ‰€è¯´ï¼š</p>
<blockquote>
<p>è¾“å…¥watchæŸ¥çœ‹ï¼Œè¾“å…¥stopåœæ­¢ï¼ˆä¸è¿‡åœæ­¢è²Œä¼¼æ²¡ç”¨ï¼Œä¹Ÿä¸çŸ¥é“ä¸ºå•¥ï¼ŒçŸ¥é“çš„è¯·å‘Šè¯‰æˆ‘ï¼‰</p>
</blockquote>
<p>è¿™ä¸ªçœŸçš„æ˜¯æ²¡æœ‰ç”¨ï¼Œæ‰€ä»¥<code>watch</code>åŠŸèƒ½å°±å¾ˆé¸¡è‚‹ã€‚ã€‚</p>
<h4 id="æ²¡æœ‰åŠæ³•å®æ—¶è¿‡æ»¤"><a href="#æ²¡æœ‰åŠæ³•å®æ—¶è¿‡æ»¤" class="headerlink" title="æ²¡æœ‰åŠæ³•å®æ—¶è¿‡æ»¤"></a>æ²¡æœ‰åŠæ³•å®æ—¶è¿‡æ»¤</h4><p>æ–‡ä¸­æåˆ°äº†å¾ˆå¤šè¿‡æ»¤æ¡ä»¶ï¼Œä½†æ˜¯ä¸€æ—¦å¼€å¯è¿‡æ»¤ï¼Œå°±æ²¡æœ‰åŠæ³•æ˜¾ç¤ºå®æ—¶æ—¥å¿—ã€‚ã€‚ä¹Ÿå°±æ˜¯è¯´æ— æ³•å’Œ<code>watch</code>å…±å­˜ã€‚ã€‚ã€‚</p>
<h3 id="æ¢ä¸ªå§¿åŠ¿ä½¿ç”¨socat"><a href="#æ¢ä¸ªå§¿åŠ¿ä½¿ç”¨socat" class="headerlink" title="æ¢ä¸ªå§¿åŠ¿ä½¿ç”¨socat"></a>æ¢ä¸ªå§¿åŠ¿ä½¿ç”¨socat</h3><p><code>socat</code>çš„æ—¥å¿—éƒ½åœ¨ç»ˆç«¯ä¸Šï¼Œä¸ç€è‰²ä¸è¯´è¿˜æœ‰ä¸Šé¢çš„ä¸¤ä¸ªå¾ˆå½±å“ä½¿ç”¨çš„é—®é¢˜ã€‚ã€‚ã€‚äºæ˜¯ä¹ï¼Œä¸ºäº†å¢åŠ è¿‡æ»¤åŠŸèƒ½ï¼Œéœ€è¦é€šè¿‡ç®¡é“å°†è¾“å‡ºæ¥å…¥å¦å¤–çš„å‘½ä»¤å¦‚ï¼š<code>grep</code>ç­‰ã€‚</p>
<p><code>socat</code>å‘½ä»¤éœ€è¦æ‰‹åŠ¨è¾“å…¥<code>watch</code>æ‰èƒ½æ˜¾ç¤ºå‡ºå®æ—¶å‘½ä»¤ï¼Œè¿™ä¸ªè®©ç®¡é“å¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨ã€‚è¿™é‡Œéœ€è¦å€ŸåŠ©<code>expect</code>å‘½ä»¤ã€‚</p>
<p>å¥½äº†æ‰€æœ‰çš„ç‚¹éƒ½é€šäº†ï¼Œå¤§è‡´æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<h4 id="åœ¨macä¸Šå®‰è£…expect"><a href="#åœ¨macä¸Šå®‰è£…expect" class="headerlink" title="åœ¨macä¸Šå®‰è£…expect"></a>åœ¨macä¸Šå®‰è£…expect</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install expect</span><br></pre></td></tr></table></figure>
<h4 id="åœ¨macçš„ï½-bash-profileé…ç½®"><a href="#åœ¨macçš„ï½-bash-profileé…ç½®" class="headerlink" title="åœ¨macçš„ï½/.bash_profileé…ç½®"></a>åœ¨macçš„ï½/.bash_profileé…ç½®</h4><p>æ­¤å¤„å‡è®¾ä½ çš„è®¾å¤‡å·²ç»æŒ‰ç…§<a href="../reverse-ios-ssh">iOSé€†å‘-è®¾å¤‡sshå…å¯†ç™»å½•</a>é…ç½®å¥½äº†ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> ios-<span class="function"><span class="title">socat</span></span>() &#123;</span><br><span class="line">    expect -c <span class="string">"</span></span><br><span class="line"><span class="string">        spawn ssh i5s \"socat - UNIX-CONNECT:/var/run/lockdown/syslog.sock\"</span></span><br><span class="line"><span class="string">        expect &#123;</span></span><br><span class="line"><span class="string">            \"&gt; \" &#123;send \"watch\n\";&#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    interact"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>ios-socat</code> å‡½æ•°åï¼Œåœ¨å‘½ä»¤è¡Œå¯ä»¥ç›´æ¥è¾“å…¥å‡½æ•°åè°ƒç”¨è¯¥å‡½æ•°</li>
<li><code>i5s</code> åœ¨<code>~/.ssh/config</code>ä¸­é…ç½®çš„åå­—</li>
</ul>
<p>å¦‚æœæ²¡æœ‰é…ç½®sshå…å¯†å‘¢éœ€è¦è¿™æ ·ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> ios-<span class="function"><span class="title">socat</span></span>() &#123;</span><br><span class="line">    expect -c <span class="string">"</span></span><br><span class="line"><span class="string">        spawn ssh -p22 root@ios's_ip \"socat - UNIX-CONNECT:/var/run/lockdown/syslog.sock\"</span></span><br><span class="line"><span class="string">        expect &#123;</span></span><br><span class="line"><span class="string">            \"*password: \" &#123;send \"mypassword\n\";&#125;</span></span><br><span class="line"><span class="string">            \"&gt; \" &#123;send \"watch\n\";&#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    interact"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>-p22</code> ç«¯å£å·ï¼Œ22æ˜¯é»˜è®¤ä¸ç”¨å†™ï¼Œä½†æ˜¯å…¶ä»–çš„éœ€è¦å†™ã€‚</li>
<li><code>ios&#39;s_ip</code> iOSè®¾å¤‡çš„ipã€‚</li>
<li><code>mypassword</code> iOSè®¾å¤‡å¯†ç </li>
<li>è¿™ä¸ªæˆ‘æ²¡æµ‹ã€‚ã€‚å¤§è‡´å¦‚æ­¤ï¼Œæˆ‘å¯¹<code>expect</code>çš„è¯­æ³•ä¹Ÿä¸æ˜¯å¾ˆç†Ÿ</li>
</ul>
<p>æœ€ååˆ«å¿˜äº†è®©<code>~/.bash_profile</code>ç”Ÿæ•ˆï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure></p>
<p>ç„¶ååªéœ€è¦åœ¨å‘½ä»¤è¡Œè¾“å…¥<code>ios-socat</code>å°±å¯ä»¥çœ‹åˆ°è¹­è¹­è¹­çš„æ—¥å¿—æ‰“å°å’¯ã€‚ã€‚è‡³äºç”¨ä»€ä¹ˆç®¡é“å•Šéƒ½ä¸æ˜¯é—®é¢˜ã€‚</p>
<p>æ¯”å¦‚ï¼š<br>åªæ˜¾ç¤ºåŒ…å«<code>iosre</code>å…³é”®å­—çš„æ—¥å¿—</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ios-socat | grep iosre</span><br></pre></td></tr></table></figure>
<h4 id="æ™‹çº§ç”¨æ³•"><a href="#æ™‹çº§ç”¨æ³•" class="headerlink" title="æ™‹çº§ç”¨æ³•"></a>æ™‹çº§ç”¨æ³•</h4><ul>
<li>æˆ‘çš„iOSè®¾å¤‡é€šè¿‡<code>iproxy</code>æ¥è¿›è¡Œç«¯å£æ˜ å°„ã€‚å…·ä½“ç”¨æ³•ç§»æ­¥<a href="https://www.google.com/search?q=iproxy&amp;oq=iproxy" target="_blank" rel="noopener">Google</a></li>
<li><p>é€šè¿‡<code>ios-socat &gt; ~/Desktop/ios.log</code> ç„¶åä¸‹è½½<a href="https://itunes.apple.com/cn/app/logtail/id1073404370?mt=12" target="_blank" rel="noopener">LogTail</a>ï¼Œå‰©ä¸‹çš„æ‘¸ç´¢ä¸€ä¸‹å’¯</p>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2></li>
</ul>
<p>æˆ‘è¿˜ä¸æ¸…æ¥šç©¶ç«Ÿä»€ä¹ˆåŸå› å¯¼è‡´äº†<code>æ”¶åˆ°æ¥è‡ªæ­¤è®¾å¤‡çš„æ— æ•ˆå“åº”</code>é”™è¯¯ï¼Œå¸ƒå‰å²›ç³»ç»Ÿä¿®æ”¹äº†ä»€ä¹ˆã€‚æˆ‘å°è¯•é‡æ–°å®‰è£…iTunesã€Xcodeéƒ½æ— æ•ˆï¼ˆæ®è¯´é™Œé™Œçš„å¼€å‘ä¸ºè¿™ä¸ªæ— æ³•è°ƒè¯•ç›´æ¥å°†ç³»ç»Ÿé™çº§æ˜¯å¯ä»¥çš„ğŸ˜‚ï¼‰ã€‚ã€‚æœ‰è€é“æ‡‚å¾—æŒ‡ç‚¹ä¸‹ï½ï½</p>
<p>ç›®å‰è™½ç„¶ä¸Šé¢éƒ½å¯ä»¥ç”¨ï¼Œä½†æ˜¯çœ‹ä¸ªæ—¥å¿—å¹¶ä¸èƒ½æ»¡è¶³æˆ‘çš„é‡å¿ƒï¼Œæœ€ååœ¨ç§»åŠ¨ç¡¬ç›˜é‡Œåšäº†ä¸€ä¸ª10.12çš„ç³»ç»ŸğŸ˜‚ï¼Œç”¨äº†Console.appâ€¦</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‰ä¸¤å¤©ï¼Œé‡å¯ç”µè„‘çªç„¶å‘ç°æˆ‘çš„&lt;code&gt;iOS8&lt;/code&gt;è®¾å¤‡æ— æ³•è¿æ¥åˆ°&lt;code&gt;MacOS&lt;/code&gt;äº†ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;MMPï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰åŠæ³•ä½¿ç”¨Xcodeè°ƒè¯•ã€ä¹‹å‰ä½¿ç”¨çš„æ—¥å¿—æŸ¥çœ‹ä¹Ÿæ²¡æœ‰åŠæ³•ç»§ç»­ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“æŠ¥é”™å¦‚ä¸‹ï¼š&lt;br&gt;&lt;code&gt;Xcode&amp;lt;Version 9.4 (9F1027a)&amp;gt;&lt;/code&gt;æŠ¥é”™å¦‚ä¸‹: (æˆ‘å®‰è£…è¿‡&lt;code&gt;Xcode10 beta1&lt;/code&gt;)&lt;br&gt;&lt;img src=&quot;/images/2018-06-15-10-13-16.png&quot; alt=&quot;XcodeæŠ¥é”™&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;iTunes&lt;/code&gt;æŠ¥é”™å¦‚ä¸‹ï¼š&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;iTunes æ— æ³•è¿æ¥ iPhone â€œiPhoneâ€ï¼Œå› ä¸ºæ”¶åˆ°æ¥è‡ªæ­¤è®¾å¤‡çš„æ— æ•ˆå“åº”ã€‚&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2018-06-15-10-06-16.png&quot; alt=&quot;iTunesæŠ¥é”™&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Apple Configurator2&lt;/code&gt;æŠ¥é”™å¦‚ä¸‹ï¼š&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;å·²æ”¶åˆ°è®¾å¤‡ä¸Šçš„æ„å¤–å“åº”ã€‚&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2018-06-15-10-09-33.png&quot; alt=&quot;Apple Configurator2æŠ¥é”™&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="https://madordie.github.io/categories/iOS/"/>
    
    
      <category term="é€†å‘" scheme="https://madordie.github.io/tags/%E9%80%86%E5%90%91/"/>
    
  </entry>
  
  <entry>
    <title>iOSé€†å‘-åˆ›å»ºCydiaæº</title>
    <link href="https://madordie.github.io/post/reverse-ios-creat-cydia-sources/"/>
    <id>https://madordie.github.io/post/reverse-ios-creat-cydia-sources/</id>
    <published>2018-01-01T16:00:00.000Z</published>
    <updated>2018-06-21T10:31:28.035Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>æ­å»ºè‡ªå·±çš„cydiaæºã€‚</p>
<a id="more"></a>
<h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><ul>
<li>Ubuntu 16.04 LTS</li>
</ul>
<h3 id="å®‰è£…å·¥å…·"><a href="#å®‰è£…å·¥å…·" class="headerlink" title="å®‰è£…å·¥å…·"></a>å®‰è£…å·¥å…·</h3><h4 id="dpkg-dev"><a href="#dpkg-dev" class="headerlink" title="dpkg-dev"></a>dpkg-dev</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get update</span><br><span class="line">$ apt-get install dpkg-dev</span><br><span class="line">$ dpkg-scanpackages --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>
<h4 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install nginx</span><br></pre></td></tr></table></figure>
<h3 id="å¼€å·¥"><a href="#å¼€å·¥" class="headerlink" title="å¼€å·¥"></a>å¼€å·¥</h3><h4 id="å‡†å¤‡deb"><a href="#å‡†å¤‡deb" class="headerlink" title="å‡†å¤‡deb"></a>å‡†å¤‡deb</h4><p>æ­¤å¤„ç›®å½•ä¸º<code>/opt/cydia/debs</code>ï¼Œå¯ä»¥ä¸ºåˆ«çš„ï¼Œä½†æ˜¯å»ºè®®ä½ ä¹Ÿè¿™æ ·åš:)ã€‚</p>
<h4 id="ç”Ÿæˆä¾èµ–"><a href="#ç”Ÿæˆä¾èµ–" class="headerlink" title="ç”Ÿæˆä¾èµ–"></a>ç”Ÿæˆä¾èµ–</h4><p>æ›´æ–°æ’ä»¶éœ€è¦é‡æ–°æ‰§è¡Œå“Ÿã€‚ã€‚</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /opt/cydia</span><br><span class="line">$ dpkg-scanpackages -m ./debs /dev/null &gt; Packages</span><br><span class="line">$ bzip2 Packages</span><br></pre></td></tr></table></figure>
<h4 id="æ·»åŠ sources-list"><a href="#æ·»åŠ sources-list" class="headerlink" title="æ·»åŠ sources.list"></a>æ·»åŠ sources.list</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"deb file:///opt/cydia ./debs/"</span> &gt;&gt; /etc/apt/sources.list</span><br></pre></td></tr></table></figure>
<p>ps. æ³¨æ„è·¯å¾„ä¿¡æ¯</p>
<h4 id="æ›´æ–°ä¸€ä¸‹"><a href="#æ›´æ–°ä¸€ä¸‹" class="headerlink" title="æ›´æ–°ä¸€ä¸‹"></a>æ›´æ–°ä¸€ä¸‹</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get update</span><br></pre></td></tr></table></figure>
<h4 id="æ‰”å‡ºå»"><a href="#æ‰”å‡ºå»" class="headerlink" title="æ‰”å‡ºå»"></a>æ‰”å‡ºå»</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /var/www/html</span><br><span class="line">$ ln -s /opt/cydia cydia</span><br><span class="line">$ /etc/init.d/nginx start</span><br></pre></td></tr></table></figure>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><a href="http://www.saurik.com/id/7" target="_blank" rel="noopener">http://www.saurik.com/id/7</a></li>
<li><a href="https://bbs.feng.com/read-htm-tid-8052646.html" target="_blank" rel="noopener">https://bbs.feng.com/read-htm-tid-8052646.html</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ­å»ºè‡ªå·±çš„cydiaæºã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="https://madordie.github.io/categories/iOS/"/>
    
    
      <category term="é€†å‘" scheme="https://madordie.github.io/tags/%E9%80%86%E5%90%91/"/>
    
  </entry>
  
  <entry>
    <title>æè¿°æ–‡ä»¶è·å–UDID</title>
    <link href="https://madordie.github.io/post/ios-tool-configurator-get-udid/"/>
    <id>https://madordie.github.io/post/ios-tool-configurator-get-udid/</id>
    <published>2017-12-06T16:00:00.000Z</published>
    <updated>2018-08-13T02:19:58.647Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h3 id="UDID"><a href="#UDID" class="headerlink" title="UDID"></a>UDID</h3><p>å¯¹ï¼Œå°±æ˜¯åœ¨iTunesç­‰å·¥å…·ä¸Šçœ‹åˆ°çš„UDID..</p>
<a id="more"></a>
<h3 id="å·¥å…·åŠæ–‡æ¡£"><a href="#å·¥å…·åŠæ–‡æ¡£" class="headerlink" title="å·¥å…·åŠæ–‡æ¡£"></a>å·¥å…·åŠæ–‡æ¡£</h3><p>å—¯ï¼ŒAppleå‡ºçš„ä¸ºæ•°ä¸å¤šçš„mac app:<a href="https://itunes.apple.com/cn/app/apple-configurator-2/id1037126344?mt=12" target="_blank" rel="noopener">Apple Configurator 2</a></p>
<p>è¿™ä¸ªå·¥å…·æ˜¯æœ‰ä¸­æ–‡æ–‡æ¡£çš„ï¼š<a href="http://help.apple.com/configurator/mac/2.3/" target="_blank" rel="noopener">Apple Configurator 2 å®˜æ–¹æ–‡æ¡£</a></p>
<p>å½“ç„¶è¿˜æœ‰æ¯”è¾ƒæš´åŠ›çš„ç›´æ¥å†™xml: <a href="https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/ConfigurationProfileExamples/ConfigurationProfileExamples.html" target="_blank" rel="noopener">Appleçš„ç›¸å…³æ–‡æ¡£</a></p>
<hr>
<ul>
<li><a href="http://www.skyfox.org/safari-ios-device-udid.html" target="_blank" rel="noopener">é€šè¿‡Safariæµè§ˆå™¨è·å–iOSè®¾å¤‡UDID(è®¾å¤‡å”¯ä¸€æ ‡è¯†ç¬¦)</a></li>
<li><a href="http://www.skyfox.org/ios-mobileconfig-sign.html" target="_blank" rel="noopener">ä¸ºiOSçš„mobileconfigæ–‡ä»¶è¿›è¡Œç­¾å</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;UDID&quot;&gt;&lt;a href=&quot;#UDID&quot; class=&quot;headerlink&quot; title=&quot;UDID&quot;&gt;&lt;/a&gt;UDID&lt;/h3&gt;&lt;p&gt;å¯¹ï¼Œå°±æ˜¯åœ¨iTunesç­‰å·¥å…·ä¸Šçœ‹åˆ°çš„UDID..&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="https://madordie.github.io/categories/iOS/"/>
    
    
      <category term="tool" scheme="https://madordie.github.io/tags/tool/"/>
    
      <category term="UDID" scheme="https://madordie.github.io/tags/UDID/"/>
    
  </entry>
  
  <entry>
    <title>ã€Œè½¬ã€ä¸€å¼ æ€ç»´å¯¼å›¾ï¼Œè®©æ­£åˆ™è¡¨è¾¾å¼ä¸å†éš¾æ‡‚</title>
    <link href="https://madordie.github.io/post/reprinted-regular-mind-map/"/>
    <id>https://madordie.github.io/post/reprinted-regular-mind-map/</id>
    <published>2017-10-15T16:00:00.000Z</published>
    <updated>2017-10-16T02:26:02.834Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p><img src="/images/bruch-up-regular-expressions-1.png" alt="æ€ç»´å¯¼å›¾"></p>
<a id="more"></a>
<h2 id="å­—ç¬¦"><a href="#å­—ç¬¦" class="headerlink" title="å­—ç¬¦"></a>å­—ç¬¦</h2><ul>
<li>æ™®é€šå­—ç¬¦ï¼šå­—æ¯ã€æ•°å­—ã€æ±‰å­—ã€ä¸‹åˆ’çº¿ï¼ŒåŒ¹é…ä¸ä¹‹ç›¸åŒçš„ä¸€ä¸ªå­—ç¬¦</li>
<li>ç®€å•è½¬ä¹‰å­—ç¬¦ï¼š\nï¼ˆæ¢è¡Œï¼‰,\tï¼ˆåˆ¶è¡¨ï¼‰,\ï¼ˆ\æœ¬èº«ï¼‰å’Œ \^â€¦ï¼ˆ\^ç­‰æœ‰ç‰¹æ®Šä½œç”¨çš„ç¬¦å·å¦‚è¦åŒ¹é…è‡ªå·±çš„è¯è¦ç”¨è½¬ä¹‰ï¼‰</li>
<li><p>æ ‡å‡†å­—ç¬¦é›†åˆ<br>æ³¨æ„åŒºåˆ†å¤§å°å†™ï¼Œå¤§å†™æ˜¯ç›¸åçš„æ„æ€ï¼ŒåŒ¹é…ç›¸åæ˜¯ä¸åŒ¹é…</p>
<ul>
<li>\d<br>  ä»»æ„ä¸€ä¸ªæ•°å­—ï¼Œ0~9</li>
<li>\w<br>  ä»»æ„ä¸€ä¸ªå­—æ¯ã€æ•°å­—ã€æ±‰å­—æˆ–ä¸‹åˆ’çº¿ï¼ŒA~Zã€a~zã€0~9ã€_å’Œä»»æ„ä¸€ä¸ªæ±‰å­—</li>
<li>\s<br>  ä»»æ„ç©ºç™½ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦</li>
<li>.<br>  å°æ•°ç‚¹å¯ä»¥åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œæ¢è¡Œé™¤å¤–ï¼ˆå¦‚æœè¦åŒ¹é…åŒ…æ‹¬â€\nâ€åœ¨å†…çš„æ‰€æœ‰å­—ç¬¦ï¼Œä¸€èˆ¬ç”¨[\s\S]ï¼‰</li>
</ul>
</li>
<li><p>è‡ªå®šä¹‰å­—ç¬¦é›†åˆ<br>[ ]æ–¹æ‹¬å·åŒ¹é…æ–¹å¼ï¼Œèƒ½å¤ŸåŒ¹é…æ–¹æ‹¬å·ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦,^è¡¨ç¤ºå–å</p>
<ul>
<li>[ab5@]<br>  åŒ¹é…â€aâ€æˆ–â€bâ€æˆ–â€5â€æˆ–â€@â€</li>
<li>[^abc]<br>  åŒ¹é…aã€bã€cä¹‹å¤–çš„ä»»æ„å­—ç¬¦</li>
<li>[f-k]<br>  åŒ¹é…â€œfâ€åˆ°â€kâ€ä¹‹é—´çš„å­—ç¬¦</li>
<li>[^A-F0-3]<br>  åŒ¹é…â€œAâ€-â€œFâ€,â€0â€-â€œ3â€ä¹‹å¤–çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦</li>
</ul>
</li>
</ul>
<h2 id="é‡è¯-Quantifier"><a href="#é‡è¯-Quantifier" class="headerlink" title="é‡è¯(Quantifier)"></a>é‡è¯(Quantifier)</h2><p>ä¿®é¥°å‰é¢çš„ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¦‚æœè¦ä¿®é¥°å¤šä¸ªè¡¨è¾¾å¼ï¼Œå°±ç”¨( )æŠŠè¡¨è¾¾å¼åŒ…èµ·æ¥</p>
<ul>
<li>{n}<br>  è¡¨è¾¾å¼é‡å¤næ¬¡â€‹</li>
<li>{m,n}<br>  è¡¨è¾¾å¼è‡³å°‘é‡å¤mæ¬¡ï¼Œæœ€å¤šé‡å¤næ¬¡<ul>
<li>è´ªå©ªæ¨¡å¼ ï¼ˆé»˜è®¤ï¼‰<br>åŒ¹é…ç¬¦åˆçš„æœ€é•¿çš„å­—ç¬¦ä¸²</li>
<li>éè´ªå©ªæ¨¡å¼ ï¼ˆåœ¨é‡è¯åé¢åŠ  ? ä¾‹ï¼š{m,n}? )<br>  åŒ¹é…ç¬¦åˆçš„æœ€çŸ­çš„å­—ç¬¦ä¸²</li>
</ul>
</li>
<li>{m,}<br>  è¡¨è¾¾å¼è‡³å°‘é‡å¤mæ¬¡</li>
<li>ï¼Ÿ<br>  åŒ¹é…è¡¨è¾¾å¼0æˆ–1æ¬¡ï¼Œç›¸å½“äº{0,1}</li>
<li>+<br>  è¡¨è¾¾å¼è‡³å°‘å‡ºç°ä¸€æ¬¡ï¼Œç›¸å½“äº{1,}</li>
<li>*<br>  è¡¨è¾¾å¼ä¸å‡ºç°æˆ–å‡ºç°ä»»æ„æ¬¡ï¼Œç›¸å½“äº{0,}</li>
</ul>
<h2 id="å­—ç¬¦è¾¹ç•Œ"><a href="#å­—ç¬¦è¾¹ç•Œ" class="headerlink" title="å­—ç¬¦è¾¹ç•Œ"></a>å­—ç¬¦è¾¹ç•Œ</h2><pre><code>é›¶å®½ï¼šåŒ¹é…çš„ä¸æ˜¯å­—ç¬¦è€Œæ˜¯ä½ç½®ï¼Œç¬¦åˆæŸç§æ¡ä»¶çš„ä½ç½®
</code></pre><ul>
<li>^<br>  ä¸å­—ç¬¦ä¸²å¼€å§‹çš„åœ°æ–¹åŒ¹é…</li>
<li>$<br>  ä¸å­—ç¬¦ä¸²ç»“æŸçš„åœ°æ–¹åŒ¹é…</li>
<li>\b<br>  åŒ¹é…ä¸€ä¸ªå•è¯çš„è¾¹ç•Œï¼Œå½“å‰ä½ç½®å‰é¢çš„å­—ç¬¦å’Œåé¢çš„å­—ç¬¦ä¸å…¨æ˜¯\w</li>
</ul>
<h2 id="é¢„æœç´¢ï¼ˆé›¶å®½æ–­è¨€ã€ç¯è§†ï¼‰"><a href="#é¢„æœç´¢ï¼ˆé›¶å®½æ–­è¨€ã€ç¯è§†ï¼‰" class="headerlink" title="é¢„æœç´¢ï¼ˆé›¶å®½æ–­è¨€ã€ç¯è§†ï¼‰"></a>é¢„æœç´¢ï¼ˆé›¶å®½æ–­è¨€ã€ç¯è§†ï¼‰</h2><p>é›¶å®½ï¼šåŒ¹é…çš„ä¸æ˜¯å­—ç¬¦è€Œæ˜¯ä½ç½®ï¼Œç¬¦åˆæŸç§æ¡ä»¶çš„ä½ç½®</p>
<ul>
<li>(?=exp)<br>  æ–­è¨€è‡ªèº«å‡ºç°çš„ä½ç½®çš„åé¢èƒ½åŒ¹é…è¡¨è¾¾å¼exp</li>
<li>(?!exp)<br>  æ–­è¨€è‡ªèº«å‡ºç°çš„ä½ç½®çš„åé¢ä¸èƒ½åŒ¹é…è¡¨è¾¾å¼exp</li>
<li>(?&lt;=exp)<br>  æ–­è¨€è‡ªèº«å‡ºç°çš„ä½ç½®çš„å‰é¢èƒ½åŒ¹é…è¡¨è¾¾å¼exp</li>
<li>(?&lt;!exp)<br>  æ–­è¨€è‡ªèº«å‡ºç°çš„ä½ç½®çš„å‰é¢ä¸èƒ½åŒ¹é…è¡¨è¾¾å¼exp</li>
</ul>
<h2 id="åŒ¹é…æ¨¡å¼"><a href="#åŒ¹é…æ¨¡å¼" class="headerlink" title="åŒ¹é…æ¨¡å¼"></a>åŒ¹é…æ¨¡å¼</h2><p>å¯¹æ–‡æœ¬çš„å¤„ç†æ–¹å¼</p>
<ul>
<li>IGNORECASE å¿½ç•¥å¤§å°å†™æ¨¡å¼<br>  åŒ¹é…æ—¶å¿½ç•¥å¤§å°å†™<br>  é»˜è®¤æ˜¯åŒºåˆ†å¤§å°å†™çš„</li>
<li>SINGLELINE å•è¡Œæ¨¡å¼<br>  æ•´ä¸ªæ–‡æœ¬çœ‹ä½œä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåªæœ‰ä¸€ä¸ªå¼€å¤´ä¸€ä¸ªç»“å°¾<br>  ä½¿å°æ•°ç‚¹â€.â€å¯ä»¥åŒ¹é…åŒ…å«æ¢è¡Œç¬¦(\n)åœ¨å†…çš„ä»»æ„å­—ç¬¦</li>
<li>MULTILINE å¤šè¡Œæ¨¡å¼<br>  æ¯è¡Œéƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²<br>  åœ¨å¤šè¡Œæ¨¡å¼ä¸‹ï¼Œå¦‚æœéœ€è¦ä»…åŒ¹é…å­—ç¬¦ä¸²å¼€å§‹å’Œç»“æŸä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨\Aå’Œ\Z</li>
</ul>
<h2 id="é€‰æ‹©ç¬¦å’Œåˆ†ç»„"><a href="#é€‰æ‹©ç¬¦å’Œåˆ†ç»„" class="headerlink" title="é€‰æ‹©ç¬¦å’Œåˆ†ç»„"></a>é€‰æ‹©ç¬¦å’Œåˆ†ç»„</h2><p>åˆ†æ”¯ç»“æ„ã€æ•è·ç»„åˆéæ•è·ç»„</p>
<ul>
<li>| åˆ†æ”¯ç»“æ„â€‹<br>  å·¦å³è¡¨è¾¾å¼ä¹‹é—´â€œæˆ–â€å…³ç³»ï¼ŒåŒ¹é…å·¦è¾¹æˆ–å³è¾¹</li>
<li>( ) æ•è·ç»„<br>  ï¼ˆ1ï¼‰ã€åœ¨è¢«ä¿®é¥°åŒ¹é…æ¬¡æ•°çš„æ—¶å€™ï¼Œæ‹¬å·ä¸­çš„è¡¨è¾¾å¼å¯ä»¥ä½œä¸ºæ•´ä½“è¢«ä¿®é¥°<br>  ï¼ˆ2ï¼‰ã€å–åŒ¹é…ç»“æœçš„æ—¶å€™ï¼Œæ‹¬å·ä¸­çš„è¡¨è¾¾å¼åŒ¹é…åˆ°çš„å†…å®¹å¯ä»¥è¢«å•ç‹¬å¾—åˆ°<br>  ï¼ˆ3ï¼‰ã€æ¯ä¸€å¯¹æ‹¬å·ä¼šåˆ†é…ä¸€ä¸ªç¼–å·ï¼Œä½¿ç”¨ï¼ˆï¼‰çš„æ•è·æ ¹æ®å·¦æ‹¬å·çš„é¡ºåºä»1å¼€å§‹è‡ªåŠ¨ç¼–å·ã€‚æ•è·ç¼–å·ä¸ºé›¶çš„ç¬¬ä¸€ä¸ªæ•è·æ˜¯æ•´ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åŒ¹é…çš„æ–‡æœ¬<br>   åå‘å¼•ç”¨ï¼šé€šè¿‡åå‘å¼•ç”¨ï¼Œå¯ä»¥å¯¹åˆ†ç»„å·²æ•è·çš„å­—ç¬¦ä¸²è¿›è¡Œå¼•ç”¨ã€‚</li>
<li>(?:Expression) éæ•è·ç»„<br>  ä¸€äº›è¡¨è¾¾å¼ä¸­ï¼Œä¸å¾—ä¸ä½¿ç”¨ï¼ˆï¼‰ï¼Œä½†åˆä¸éœ€è¦ä¿å­˜ï¼ˆï¼‰ä¸­å­è¡¨è¾¾å¼åŒ¹é…çš„å†…å®¹ï¼Œè¿™æ—¶å¯ä»¥ç”¨éæ•è·ç»„æ¥æŠµæ¶ˆï¼ˆï¼‰å¸¦æ¥çš„å‰¯ä½œç”¨ã€‚</li>
</ul>
<hr>
<p>åŸæ–‡ï¼š<a href="https://my.oschina.net/u/3080373/blog/1550653" target="_blank" rel="noopener">ä¸€å¼ æ€ç»´å¯¼å›¾ï¼Œè®©æ­£åˆ™è¡¨è¾¾å¼ä¸å†éš¾æ‡‚</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/bruch-up-regular-expressions-1.png&quot; alt=&quot;æ€ç»´å¯¼å›¾&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="å·¥å…·" scheme="https://madordie.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="æ­£åˆ™è¡¨è¾¾å¼" scheme="https://madordie.github.io/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨CollectionViewç®€åŒ–ä»£ç ï¼Œä¸“æ³¨äºä¸šåŠ¡å’ŒUI</title>
    <link href="https://madordie.github.io/post/ios-tool-collectionview-simplify-business/"/>
    <id>https://madordie.github.io/post/ios-tool-collectionview-simplify-business/</id>
    <published>2017-10-11T16:00:00.000Z</published>
    <updated>2018-07-25T08:52:17.454Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p><code>UITableView</code>ä½œä¸ºé«˜çº§æ§ä»¶è¢«å¼€å‘è€…å¹¿æ³›ä½¿ç”¨ï¼ŒåŒæ ·çš„ï¼Œ<code>UICollectionView</code>ç”±äºå…¶NBçš„å¸ƒå±€ä¹Ÿè¢«å¹¿æ³›ä½¿ç”¨ã€‚ä½†æ˜¯åè€…åœ¨ä½¿ç”¨çš„æ—¶å€™å¤§å¤šæ•°éƒ½å±äºè‡ªå®šä¹‰çš„æ¯”è¾ƒå¤šï¼Œå‰è€…åˆ™ç›¸å¯¹æ™®é€šï¼ŒliståŸºæœ¬ä¸Šéƒ½ç”¨ã€‚</p>
<p>åœ¨ä¸šåŠ¡éœ€æ±‚ä¸­ï¼Œå¸¸è§„å¸ƒå±€ï¼Œå¤§å¤šæ•°éƒ½æ˜¯é‡‡ç”¨<code>UITableView</code>è¿›è¡Œçš„ï¼Œä½†æ˜¯æœ‰ç—›ç‚¹ï¼š</p>
<ul>
<li>å½“ä½¿åœ¨APPå†…ç”¨è¿‡ä¸€æ¬¡ç€‘å¸ƒæµä¹‹åï¼Œè®¾è®¡å¸ˆä¼šçªç„¶çš„è®©ä½ åœ¨æ­£å¸¸çš„listä¸­åº•éƒ¨è¿½åŠ ç€‘å¸ƒæµã€‚ã€‚è™½ç„¶æ˜¯åœ¨åº•éƒ¨è¿½åŠ ï¼Œä½†æ˜¯è¦ä»<code>UITableView</code>è¿ç§»åˆ°<code>UICollectionView</code></li>
<li><code>UITableViewDelegate</code>ã€<code>UITableViewDataSource</code> ææ€•æ¯å¤„ä½¿ç”¨éƒ½è¦å†™ç¹ççš„ç›¸åŒçš„ä»£ç å§ï½</li>
<li>å¾ˆå¤šäººä¹Ÿä¼šå¯¹å…¶è¿›è¡Œé«˜åº¦ç¼“å­˜å•Šç¥é©¬çš„ä¼˜åŒ–ç­–ç•¥</li>
<li>ä¸çŸ¥ä¸è§‰è¿™äº›ä»£ç å †åœ¨ä¸€èµ·å·²ç»å°†<code>UIViewController</code>å †çš„ç›¸å½“çš„é«˜</li>
</ul>
<p>ç„¶åå‘¢ï¼Œæˆ‘ä»¬ç°åœ¨ä½¿ç”¨ä¸€ä¸ª<code>CollectionView</code>å°†è¿™äº›æ“ä½œåŒ…è£…ä¸€ä¸‹ï¼Œè¾¾åˆ°è¿™æ ·ä¸€ä¸ªæµç¨‹:</p>
<ol>
<li><p>è‡ªå®šä¹‰Cellã€CellModel</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LabelCell</span>: <span class="title">UICollectionViewCell</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> info = <span class="type">UILabel</span>()</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">sizeThatFits</span><span class="params">(<span class="number">_</span> size: CGSize)</span></span> -&gt; <span class="type">CGSize</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">return</span> <span class="type">CGSize</span>(width: size.width, height: info.frame.maxY + info.frame.minY)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">LabelCell</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Model</span>: <span class="title">ListItemDefaultProtocol</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> info: <span class="type">String</span>?</span><br><span class="line">        <span class="function"><span class="keyword">func</span> <span class="title">fillModel</span><span class="params">(view: LabelCell)</span></span> &#123;</span><br><span class="line">            view.info.text = info</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¯·æ±‚ã€å¤„ç†æ•°æ®æ ¼å¼åŒ–ä¸º<code>LabelCell.Model</code>è¿™æ ·çš„ç±»</p>
</li>
<li><p>å¤„ç†å¥½çš„æ•°æ®äº¤ç»™<code>CollectionView</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list.sections = model.format(...)</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¼‘æ¯ä¸€ä¼šï¼Œå®Œå·¥äº†ï½</p>
</li>
</ol>
<p>ç„¶åï¼Œæ¥çœ‹çœ‹<code>Collection</code>é‡Œé¢éƒ½åšäº†ä»€ä¹ˆæ“ä½œ</p>
<a id="more"></a>
<h3 id="CollectionView"><a href="#CollectionView" class="headerlink" title="CollectionView"></a>CollectionView</h3><p>ä¸ºäº†è¾¾åˆ°ä¸Šé¢æ•ˆæœä¸­çš„ç¬¬ä¸‰æ­¥ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ª<code>CollectionView</code>æ¥å¤„ç†åˆ·æ–°æ•°æ®ã€è®¾ç½®ä»£ç†ã€è®¾ç½®æ•°æ®æºã€æ³¨å†Œcellã€ç­‰æ“ä½œã€‚</p>
<p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œæ­¤å¤„ä½¿ç”¨<a href="https://github.com/chiahsien/CHTCollectionViewWaterfallLayout" target="_blank" rel="noopener"><code>CHTCollectionViewWaterfallLayout</code></a>æ¥å¤„ç†ç€‘å¸ƒæµã€‚</p>
<p>åˆ›å»ºä¸€ä¸ª<code>CollectionViewSection</code>çš„ç±»/ç»“æ„ä½“æ¥ä¿å­˜sectionä¿¡æ¯ã€‚æ¯”å¦‚è¯´ï¼š<code>sectionInset</code>ã€<code>minimumColumnSpacing</code>ã€<code>minimumInteritemSpacing</code>ã€<code>columnCount</code>ã€ç­‰</p>
<p>åœ¨<code>CollectionView</code>ä¸­è®¾ç½®ä¸€ä¸ª<code>var sections = [KTJCollectionViewSection]()</code>ç”¨äºä¿å­˜sections</p>
<p>å®ç°<code>UICollectionViewDataSource</code>ã€ <code>UICollectionViewDelegate</code>ã€‚æ­¤å¤„çœç•¥çº¦1åƒå­—â€¦</p>
<h3 id="ListItemDefaultProtocolï¼šç»‘å®šCellå’ŒModel"><a href="#ListItemDefaultProtocolï¼šç»‘å®šCellå’ŒModel" class="headerlink" title="ListItemDefaultProtocolï¼šç»‘å®šCellå’ŒModel"></a>ListItemDefaultProtocolï¼šç»‘å®šCellå’ŒModel</h3><p>ä¸Šé¢<code>çœç•¥çº¦1åƒå­—</code>ä¸­æœ‰ä¸€ä¸ªå¹¶æ²¡æœ‰è¯´ï¼š<code>CollectionViewSection</code>çš„<code>header</code>ã€<code>items</code>ã€<code>footer</code>å¦‚ä½•å®ç°ã€‚ğŸ˜‚</p>
<p>å¥½äº†ï¼Œæ­¤å¤„è¿™ä¸‰ä¸ªå‡é‡‡ç”¨åè®®<code>ListItemDefaultProtocol</code>æ¥å®ç°ã€‚ï¼ˆPSï¼šå¤§å®¶éƒ½å–œæ¬¢ç”¨çˆ¶ç±»ï¼Œä½†çˆ¶ç±»åªæœ‰ä¸€ä¸ªï¼Œä¸ºäº†å…¼å®¹å’Œå†²çªï¼Œè¿™é‡Œåè®®æ˜¯æœ€å¥½ä¸è¿‡çš„ï½ï¼Œç‰¹åˆ«æ˜¯swiftä¸­çš„åè®®ï¼‰</p>
<p>åè®®éœ€è¦ç»™å‡ºè¿™ä¹ˆå‡ ä¸ªä¿¡æ¯ï¼š</p>
<ul>
<li><code>reuseIdentifier</code> ç”¨æ¥å¤ç”¨çš„é‡ç”¨æ ‡è¯†ç¬¦</li>
<li><code>cellClass</code> ç”¨æ¥æ³¨å†Œç”¨çš„ç±»å</li>
<li><code>func fillModel(item: AnyObject)</code> ç”¨æ¥ç»™cellå¡«å……modelçš„æ–¹æ³•</li>
</ul>
<p>é‚£ä¹ˆè¿™ä¸ªåè®®å°±å‡ºæ¥äº†ï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">KTJListItemProtocol</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> identifa: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="keyword">var</span> registClass: <span class="type">AnyClass</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fillModel</span><span class="params">(item: AnyObject)</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨<strong>swift</strong>åè®®æ”¯æŒé»˜è®¤å®ç°ï¼Œäºæ˜¯ä¹ï¼Œå°±å¯ä»¥å†å†™ä¸€ä¸ª:<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">ListItemDefaultProtocol</span>: <span class="title">KTJListItemProtocol</span> </span>&#123;</span><br><span class="line">    associatedtype <span class="type">ItemType</span>: <span class="type">UIView</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fillModel</span><span class="params">(view: ItemType)</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">ListItemDefaultProtocol</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> identifa: <span class="type">String</span> &#123; <span class="keyword">return</span>  <span class="type">NSStringFromClass</span>(<span class="type">ItemType</span>.<span class="keyword">self</span>)&#125;</span><br><span class="line">    <span class="keyword">var</span> registClass: <span class="type">AnyClass</span> &#123; <span class="keyword">return</span> <span class="type">ItemType</span>.<span class="keyword">self</span> &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fillModel</span><span class="params">(item: AnyObject)</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> reusableView = item <span class="keyword">as</span>? <span class="type">ItemType</span> &#123;</span><br><span class="line">            fillModel(view: reusableView)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åï¼Œå°±å¯ä»¥æ„‰å¿«çš„ç©è€äº†ï½ï½</p>
<p>æœ€åCellä¸­çš„çš„ä»£ç æ•ˆæœå°±æ˜¯<a href="https://github.com/madordie/collectionview-simplify-business/blob/master/CollectionView-simplify-business/LabelCell.swift" target="_blank" rel="noopener">è¿™ä¸ªæ ·å­</a>ã€‚<br>å†åŠ ä¸Š<a href="https://github.com/madordie/collectionview-simplify-business/blob/master/CollectionView-simplify-business/ViewController.swift" target="_blank" rel="noopener">æ•°æ®å¡«å……</a>æ˜¯ä¸æ˜¯å¾ˆç®€å•äº†å‘¢ï½ï½</p>
<h3 id="ä»¥åå¦‚ä½•å¼€å‘"><a href="#ä»¥åå¦‚ä½•å¼€å‘" class="headerlink" title="ä»¥åå¦‚ä½•å¼€å‘"></a>ä»¥åå¦‚ä½•å¼€å‘</h3><p>çœŸçš„å¦‚åŒå‰é¢çš„ä¾‹å­ä¸€æ ·ï¼Œåªéœ€è¦è¿™ä¹ˆå‡ æ­¥ç»•ä¸è¿‡å»çš„ï¼š</p>
<ol>
<li>å¤„ç†æ¥å£åå‡ºæ¥çš„æ•°æ®ã€‚</li>
<li>åˆ›å»ºæ–°çš„UIæ ·å¼ï¼Œå¹¶åšå¥½æ¥å£æ•°æ®ä¸­é—´ä»¶ã€‚</li>
<li>ç‚¹å‡»äº‹ä»¶åœ¨å¤„ç†æ•°æ®çš„æ—¶å€™é¢„å…ˆåŸ‹å¥½ï¼Œæ‰€æœ‰çš„æ•°æ®ã€é€»è¾‘å’ŒUIæ•°æ®ä¸€èµ·è¢«ä¼ é€’ï¼Œä¸éœ€è¦å¤šæ¬¡ç±»å‹åˆ¤æ–­ã€‚</li>
</ol>
<p>ç»Ÿä¸€ä½¿ç”¨<code>CollectionView</code>è¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼šä¸ç®¡å‰é¢è°å†™çš„ä¸€ä¸ªUIï¼Œéƒ½èƒ½æ‹‰è¿‡æ¥ç”¨ã€‚ä¸ç”¨åšä¸­é—´å±‚å»ä»<code>TableViewCell</code>è½¬<code>CollectionViewCell</code>ã€‚</p>
<p>å¼€å‘åªéœ€è¦å…³å¿ƒä¸šåŠ¡ï¼Œä¸šåŠ¡ã€‚å®‰å®‰å¿ƒå¿ƒåšä¸€ä¸ªå†™ä¸šåŠ¡çš„ç¨‹åºå‘˜å§ï½</p>
<h3 id="å…³äºCellçš„è·³è½¬å¤„ç†"><a href="#å…³äºCellçš„è·³è½¬å¤„ç†" class="headerlink" title="å…³äºCellçš„è·³è½¬å¤„ç†"></a>å…³äºCellçš„è·³è½¬å¤„ç†</h3><p>ä¹ä¸€çœ‹ï¼Œå®Œç¾äº†ã€‚ä¸è¿‡è¿˜æœ‰ä¸€ä¸ªå·¨çƒ¦çš„è·³è½¬å¤„ç†ã€‚ã€‚ã€‚ä¸è¿‡ï¼Œ<strong>è«æ€•</strong></p>
<p>è·³è½¬ï¼Œæœ‰è¿™ä¹ˆå‡ ç§ï¼š</p>
<ul>
<li>æ”¯æŒè·¯ç”±çš„URLè·³è½¬ï¼Œè¿™ä¸ªæ˜¯æœ€ç®€å•çš„ï¼Œä¹Ÿæ˜¯æœ€çˆ½çš„</li>
<li>åªèƒ½å¤æ‚çš„è¿›è¡Œåˆ›å»ºç±»ã€èµ‹å€¼ã€pushå•Šç¥é©¬çš„</li>
</ul>
<p>ç”±äºæˆ‘ä»¬å°†æ•°æ®å…¨éƒ¨å¤„ç†å¥½åæ‰”ç»™äº†<code>cellmodel</code>ï¼Œè€Œè·³è½¬ã€æ‰“ç‚¹æ‰€éœ€è¦çš„å‚æ•°å‡åœ¨æ­¤å¤„ä¸ºæœ€å…¨çš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†å›è°ƒä½œä¸ºæ•°æ®ä¸€èµ·ä¼ é€’ã€‚ã€‚</p>
<p>å—¯, äº‹ä»¶éœ€è¦ä¼ é€’çš„å¯¹è±¡å¤§çº¦è¿™ä¸ªæ ·å­ï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Jmp</span> </span>&#123;</span><br><span class="line">    <span class="comment">/// æ”¯æŒURLè·³è½¬çš„URL</span></span><br><span class="line">    <span class="keyword">let</span> url: <span class="type">String</span>?</span><br><span class="line">    <span class="comment">/// æ‰“ç‚¹äº‹ä»¶å</span></span><br><span class="line">    <span class="keyword">let</span> event: <span class="type">String</span>?</span><br><span class="line">    <span class="comment">/// æ‰“ç‚¹å‚æ•°</span></span><br><span class="line">    <span class="keyword">let</span> attr: [<span class="type">AnyHashable</span>: <span class="type">Any</span>]?</span><br><span class="line">    <span class="comment">/// ä¸æ”¯æŒURLçš„ç›´æ¥å›è°ƒ</span></span><br><span class="line">    <span class="keyword">let</span> eventCallback: (() -&gt; <span class="type">Void</span>)?</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åcellå¯¹åº”çš„å¦ä¸€ä¸ªç±»æ˜¯è¿™æ ·çš„ï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">KTJJmp</span>: <span class="title">NSObject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> info: <span class="type">Jmp</span>?</span><br><span class="line">    <span class="keyword">let</span> action = #selector(topVCJmp)</span><br><span class="line">    <span class="meta">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">topVCJmp</span><span class="params">()</span></span> &#123;</span><br><span class="line">        ... <span class="comment">// æ‰“ç‚¹</span></span><br><span class="line">        <span class="type">KTJURLJump</span>.jumpToViewOnTopVC(jmp: info)</span><br><span class="line">        info?.eventCallback?()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">tap</span><span class="params">()</span></span> -&gt; <span class="type">UITapGestureRecognizer</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">UITapGestureRecognizer</span>(target: <span class="keyword">self</span>, action: #selector(topVCJmp))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä¸¤ä¸ªç±»å…±åŒä½œç”¨å°±æ˜¯ï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JmpCell</span>: <span class="title">UICollectionViewCell</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> jmp = <span class="type">JmpCellModel</span>()</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setup</span><span class="params">()</span></span> &#123;</span><br><span class="line">        ...</span><br><span class="line">        jmpBtn.addTarget(jmp, action: jmp.action, <span class="keyword">for</span>: .touchUpInside)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JmpCellModel</span>: <span class="title">ListItemDefaultProtocol</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> jmp: <span class="type">Jmp</span>?</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fillModel</span><span class="params">(view: JmpCell)</span></span> &#123;</span><br><span class="line">        view.jmp.info = jmp</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è‡³äºè¿™ä¸ª<code>JmpCellModel.jmp</code>æ€ä¹ˆç”Ÿæˆï¼Œè¿™é‡Œå°±ä¸è¯´äº†ã€‚</p>
<h3 id="å…³äºç®—é«˜é‚£ç‚¹äº‹"><a href="#å…³äºç®—é«˜é‚£ç‚¹äº‹" class="headerlink" title="å…³äºç®—é«˜é‚£ç‚¹äº‹"></a>å…³äºç®—é«˜é‚£ç‚¹äº‹</h3><h4 id="ç®—é«˜ä½ç½®çš„é€‰æ‹©"><a href="#ç®—é«˜ä½ç½®çš„é€‰æ‹©" class="headerlink" title="ç®—é«˜ä½ç½®çš„é€‰æ‹©"></a>ç®—é«˜ä½ç½®çš„é€‰æ‹©</h4><p>æˆ‘ä¹Ÿæ›¾çº ç»“è¿‡frameçš„ä»£ç åº”è¯¥å†™åœ¨å“ªé‡Œã€‚ã€‚æœ‰å†™åœ¨åˆå§‹åŒ–çš„ï¼Œæœ‰å•ç‹¬å†™ä¸€ä¸ªæ–¹æ³•çš„ï¼Œè¿˜æœ‰å†™åœ¨<code>func sizeThatFits(:) -&gt; CGSize</code></p>
<p>ç”±äºå½“å¹´å¯¹<a href="https://github.com/forkingdog/UITableView-FDTemplateLayoutCell" target="_blank" rel="noopener">UITableView-FDTemplateLayoutCell</a>ä¸­æ¯’è¾ƒæ·±ï¼Œæ‰€ä»¥æ²¿ç”¨äº†æœ€åä¸€ç§æ–¹æ¡ˆã€‚</p>
<h4 id="ç®—é«˜ä½¿ç”¨çš„viewçš„é€‰æ‹©"><a href="#ç®—é«˜ä½¿ç”¨çš„viewçš„é€‰æ‹©" class="headerlink" title="ç®—é«˜ä½¿ç”¨çš„viewçš„é€‰æ‹©"></a>ç®—é«˜ä½¿ç”¨çš„viewçš„é€‰æ‹©</h4><p>åœ¨ç®—é«˜çš„æ—¶å€™ï¼Œé¦–å…ˆéœ€è¦æ˜ç¡®çš„æ˜¯ï¼š<strong>é«˜åº¦æ˜¯æ•°æ®å’Œå½“å‰æœ€å¤§å®½åº¦å…±åŒå†³å®šçš„</strong>ï¼Œæ‰€ä»¥åœ¨ç®—é«˜çš„æ—¶å€™éœ€è¦æ‹¿ç€æ•°æ®ã€viewç„¶åæ‰èƒ½å»ç®—é«˜ï¼ˆPSï¼šè‡³äºé‚£äº›æ‹¿ç€æ•°æ®ç¡¬ç®—å‡ºä¸€ä¸ªé«˜åº¦çš„ä»£ç ï¼Œæ­¤å¤„ä¸å‘è¡¨çœ‹æ³•ğŸ˜‚ï¼Œæ—©æ™šä¼šåæ‚”çš„ï¼‰</p>
<p>ç„¶åå°±æ˜¯<code>UITableView</code>ã€<code>UICollectionView</code>çš„ç®—é«˜æ˜¯é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„ä»£ç†å»è·å–çš„ï¼Œå¹¶ä¸æä¾›viewå»è®¡ç®—ã€‚ã€‚è¿™å°±æ˜¯çŸ›ç›¾çš„åœ°æ–¹ã€‚</p>
<p>è™½ç„¶<code>UITableView</code>ã€<code>UICollectionView</code>åœ¨ç®—é«˜çš„åœ°æ–¹ä¸æä¾›View,ä½†æ˜¯æœ‰ä¸€ä¸ª<code>dequeueReusableCell....</code>çš„æ–¹æ³•å¯ä»¥è·å–åˆ°ç¼“å­˜æ± ä¸­çš„<code>Cell</code>å‘€</p>
<p>å¦‚æœä½ è¿™æ ·åšäº†ï¼Œé‚£ä¹ˆä½ å°†ä¼šä»˜å‡ºæƒ¨é‡çš„ä»£ç ã€‚è¿™ä¸ªæ–¹æ¡ˆæˆ‘åœ¨<a href="http://www.cnblogs.com/madordie" target="_blank" rel="noopener">åšå®¢å›­</a>2015.03.17çš„<a href="http://www.cnblogs.com/madordie/p/4344209.html" target="_blank" rel="noopener">â€œiOS ä¼˜åŒ–æ€§èƒ½ä¹‹TableViewâ€</a>ä¸­å·²ç»è¯´äº†ï¼š</p>
<blockquote>
<p>dequeueReusableCellWithIdentifier:æ­¤å‡½æ•°çš„è°ƒç”¨è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š<br>    i.æ­¤å‡½æ•°çš„è¿”å›å€¼æ˜¯åšä¸ºtableView:cellForRowAtIndexPath:çš„è¿”å›å€¼çš„ã€‚è¿™æ ·ä¿è¯æ‹¿å‡ºæ¥çš„å®Œæ•´è¿˜ç»™TableViewã€‚<br>    ii.å¦‚æœæ­¤å‡½æ•°çš„è¿”å›å€¼ä¸æ˜¯ä¸ºäº†ç»™tableView:cellForRowAtIndexPath:åšè¿”å›å€¼ï¼Œé‚£ä¹ˆä½ è¦æ³¨æ„è¿™æ˜¯åœ¨ä¸€ä¸ªæ‹¿å–åˆ«äººç¨€ç¼ºèµ„æºçš„æ“ä½œï¼Œéœ€è¦æ³¨æ„çæƒœè¿™ä¸ªè¿”å›å€¼ï¼Œèƒ½ä¸æµªè´¹å°±ä¸è¦æµªè´¹ã€‚<br>    iii.å¯¹äºALè‡ªåŠ¨é€‚åº”çš„TableViewå–Cellæ—¶å€™è¦æ³¨æ„ä¿å­˜ã€‚ä¸ªäººå»ºè®®å°è£…TableViewï¼Œç„¶åç”¨æ¥è®¡ç®—é«˜åº¦çš„Cellä¿å­˜åœ¨TableViewä¸­ã€‚å¯¹äºå¤šç§ç±»å‹çš„Cellï¼Œåˆ™å¯ä»¥ä½¿ç”¨å¤ç”¨æ ‡è¯†ç¬¦ä½œä¸ºKeyçš„å­—å…¸æ¥å­˜å‚¨ã€‚è¿™æ ·èƒ½å¤Ÿæœ‰æ•ˆèŠ‚çº¦dequeueReusableCellWithIdentifier:è°ƒç”¨æ¬¡æ•°ã€‚</p>
</blockquote>
<p><code>UICollectionView</code>ä¹Ÿæ˜¯å¦‚æ­¤ã€‚æ‰€ä»¥ä½¿ç”¨<code>dequeueReusableCell....</code>æ–¹æ³•æ˜¯<strong>å¾ˆä¸é è°±çš„</strong>ã€‚</p>
<p>åœ¨<a href="https://github.com/forkingdog/UITableView-FDTemplateLayoutCell/blob/912b3ce4a61198c0b79a3d85b977f8fdacd153ea/Classes/UITableView%2BFDTemplateLayoutCell.m#L134-#L155" target="_blank" rel="noopener">UITableView-FDTemplateLayoutCell</a>ä¸­ä½¿ç”¨äº†å­—å…¸ä¿å­˜ç¼“å­˜ç®—é«˜çš„Viewï¼Œä¹Ÿæ˜¯æ¯”è¾ƒèµçš„ã€‚</p>
<p>ä½†æ˜¯ç°åœ¨æœ‰äº†<code>CollectionView</code>ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨OCçš„<code>objc_setAssociatedObject(,,,)</code>å»å¤„ç†è€Œç›´æ¥ä½¿ç”¨äº†<code>NSCache</code>å»å¤„ç†å°±è¡Œäº†ï½</p>
<p>å¦‚æœçœ‹äº†<a href="https://github.com/madordie/collectionview-simplify-business/blob/master/CollectionView.swift" target="_blank" rel="noopener"><code>CollectionView</code></a>å°±ä¼šå‘ç°ï¼Œ<code>ListItemProtocol</code>è¿˜æœ‰ä¸€ä¸ªgetæ–¹æ³•<code>var newItem: AnyObject { get }</code>è¿™ä¸ªæ˜¯ç”¨æ¥ç®—é«˜çš„ã€‚</p>
<p>åœ¨<a href="https://github.com/madordie/collectionview-simplify-business/blob/master/CollectionView.swift" target="_blank" rel="noopener">CollectionView.swift</a>å…³äºé«˜åº¦çš„ä»£ç†è®¾ç½®ä¸­å¯ä»¥çœ‹åˆ°ç›¸å…³è·å–å’Œè®¾ç½®ã€‚</p>
<h4 id="ç®—é«˜çš„æ—¶å€™å˜å±€çš„æ§åˆ¶"><a href="#ç®—é«˜çš„æ—¶å€™å˜å±€çš„æ§åˆ¶" class="headerlink" title="ç®—é«˜çš„æ—¶å€™å˜å±€çš„æ§åˆ¶"></a>ç®—é«˜çš„æ—¶å€™å˜å±€çš„æ§åˆ¶</h4><p>é«˜åº¦çš„è®¡ç®—ç°åœ¨å·²ç»å¯ä»¥æ­£å¸¸è®¡ç®—ï¼Œä½†æ˜¯å¯¹äº<code>columnCount &gt; 1</code>çš„æ—¶å€™ï¼Œç‰µæ‰¯åˆ°é—´éš™çš„è®¡ç®—éœ€è¦æ³¨æ„ä¸€æ¬¡å•Šã€‚æ¯•ç«Ÿ<code>CHTCollectionViewWaterfallLayout</code>åŠŸèƒ½æ›´å¼ºå¤§ã€‚</p>
<p>ç›¸å…³ä»£ç åœ¨<a href="https://github.com/madordie/collectionview-simplify-business/blob/master/CollectionView.swift" target="_blank" rel="noopener">CollectionView.swift</a>çš„<code>func collectionView(:,layout:,sizeForItemAt:) -&gt; CGSize</code>å‡½æ•°ä¸­ã€‚</p>
<h3 id="å…³äºä»£ç†é‚£ç‚¹äº‹"><a href="#å…³äºä»£ç†é‚£ç‚¹äº‹" class="headerlink" title="å…³äºä»£ç†é‚£ç‚¹äº‹"></a>å…³äºä»£ç†é‚£ç‚¹äº‹</h3><p>ä¸«çš„ï¼Œéœ€æ±‚æ€»æ˜¯æ¯”æƒ³çš„å¤šï¼Œä½†æ˜¯åŠæ³•ä¹Ÿæ¯”é—®é¢˜å¤šã€‚</p>
<p>å¯¹äº<code>CollectionView</code>æ¥è¯´ï¼Œä»£ç†éƒ½è®¾ç½®æˆäº†selfï¼Œè¿™æ ·ä¼šå¯¼è‡´æœ‰æ—¶å€™éœ€è¦<code>UIScrollViewDelegate</code>å¹²äº›äº‹æƒ…çš„æ—¶å€™æ€»æ˜¯ä¸é‚£ä¹ˆè‡ªç”±ã€‚ã€‚ã€‚å®ä¹ƒæ–°ç—›ç‚¹ï¼Œä¸è¿‡æœ‰åŠæ³•ã€‚</p>
<p>ä¸‹é¢æ˜¯å‡ ç§æ–¹æ¡ˆï¼š</p>
<h4 id="KVO"><a href="#KVO" class="headerlink" title="KVO"></a>KVO</h4><p>ç›´æ¥KVOåˆ°<code>self.contentOffset</code>ï¼Œè¿™æ ·ä¸€äº†ç™¾äº†ã€‚å†™ä»€ä¹ˆä»£ç†ï¼Œè¦ä»€ä¹ˆè‡ªè¡Œè½¦ï¼ï¼ˆPSï¼šswiftæä¾›é—­åŒ…çš„ä»£ç†ï¼Œä¹Ÿæ˜¯å¾ˆå¥½ç”¨çš„ï¼‰</p>
<p>å¦‚æœä¸ä¼šï¼Œè¯·è‡ªè¡Œ<a href="https://www.google.com" target="_blank" rel="noopener">Google</a>ã€‚<a href="https://objccn.io/issue-7-3/" target="_blank" rel="noopener">ObjC-ä¸­å›½ï¼šKVC å’Œ KVO</a>ï¼Œæˆ‘åªèƒ½å¸®ä½ åˆ°è¿™é‡Œ</p>
<h4 id="Rxç³»"><a href="#Rxç³»" class="headerlink" title="Rxç³»"></a>Rxç³»</h4><p>å¾ˆæŠ±æ­‰ï¼Œä½ ä¸èƒ½ç”¨<code>self.rx.contentOffset</code>ã€‚åŸå› æ˜¯<a href="https://github.com/chiahsien/CHTCollectionViewWaterfallLayout" target="_blank" rel="noopener"><code>CHTCollectionViewWaterfallLayout</code></a>ä¸­æœ‰è¿™ä¹ˆä¸€è¡Œæ–­è¨€ï¼š</p>
<blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NSAssert</span>([<span class="keyword">self</span>.delegate conformsToProtocol:@<span class="class"><span class="keyword">protocol</span>(<span class="title">CHTCollectionViewDelegateWaterfallLayout</span>)], @"<span class="title">UICollectionView</span>'<span class="title">s</span> <span class="title">delegate</span> <span class="title">should</span> <span class="title">conform</span> <span class="title">to</span> <span class="title">CHTCollectionViewDelegateWaterfallLayout</span> <span class="title">protocol</span>");</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>ä½†æ˜¯</strong>ï¼Œä½ å¯ä»¥ä½¿ç”¨Rxé‡Œé¢çš„KVOå‘€ï½ä¹Ÿæ˜¯è´¼æ–¹ä¾¿</p>
<h4 id="RACç³»"><a href="#RACç³»" class="headerlink" title="RACç³»"></a>RACç³»</h4><p>æŠ±æ­‰ï¼Œæˆ‘ä¸ä¼šã€‚åŸå› åœ¨æ­¤<a href="../reactivecocoa-ready-to-use">å‡†å¤‡é£Ÿç”¨RAC(ReactiveCocoa)çš„é¡¾è™‘</a></p>
<h4 id="ä»£ç†ä¼ é€’"><a href="#ä»£ç†ä¼ é€’" class="headerlink" title="ä»£ç†ä¼ é€’"></a>ä»£ç†ä¼ é€’</h4><p>å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ä»£ç†è¿›è¡Œä¼ é€’å‡ºå»ã€‚å¤§è‡´è¿™ä¸ªæ ·å­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">CollectionViewDelegate</span>: <span class="title">NSObjectProtocol</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath)</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CollectionView</span> </span>&#123;</span><br><span class="line">    <span class="keyword">weak</span> <span class="keyword">var</span> allDelegate: <span class="type">CollectionViewDelegate</span>?</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath)</span></span> &#123;</span><br><span class="line">    <span class="keyword">self</span>.allDelegate?.collectionView(<span class="keyword">self</span>, didSelectItemAt: indexPath)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ–¹æ¡ˆæ²¡å•¥èŠçš„ã€‚ã€‚</p>
<h3 id="OCå’‹åŠï¼Ÿ"><a href="#OCå’‹åŠï¼Ÿ" class="headerlink" title="OCå’‹åŠï¼Ÿ"></a>OCå’‹åŠï¼Ÿ</h3><p>è¿™ä¸ªOCä¹Ÿèƒ½ç”¨ï¼Œåªä¸è¿‡éœ€è¦ä¸€äº›æ‰‹æ®µï¼Œæ¯”å¦‚è¯´ï¼šç»§æ‰¿ã€æ‰©å±•ã€ç­‰</p>
<p><code>ListItemProtocol</code>å°±æ˜¯ä¸ºäº†ç»™OCä½¿ç”¨ç•™çš„ï¼Œè¿˜æœ‰å°±æ˜¯<code>CollectionViewSection</code>ä½¿ç”¨äº†ç±»ï¼Œè€Œä¸æ˜¯ç»“æ„ä½“ã€‚</p>
<p>ä¸è¿‡å…·ä½“æ²¡æœ‰ä¾‹å­ï¼Œä¸æƒ³å†™OCä»£ç ï¼Œå¤ªéº»çƒ¦äº†ã€‚ã€‚ä¸»è¦æ˜¯è¿™ç§æ€è·¯:)</p>
<h3 id="å¡«å……Cellçš„æ•°æ®ä¸ºä»€ä¹ˆä¼šåœ¨CellModelä¸­ï¼Ÿ"><a href="#å¡«å……Cellçš„æ•°æ®ä¸ºä»€ä¹ˆä¼šåœ¨CellModelä¸­ï¼Ÿ" class="headerlink" title="å¡«å……Cellçš„æ•°æ®ä¸ºä»€ä¹ˆä¼šåœ¨CellModelä¸­ï¼Ÿ"></a>å¡«å……Cellçš„æ•°æ®ä¸ºä»€ä¹ˆä¼šåœ¨CellModelä¸­ï¼Ÿ</h3><p>å¯¹äºCellæ¥è¯´ï¼ŒCellæ˜¯å¹²å‡€çš„ï¼Œæ²¡æœ‰ä»»ä½•ç»§æ‰¿ã€åè®®æ¥é™åˆ¶Cellå¦‚ä½•å¤„ç†ã€‚é‚£ä¹ˆCellå°±å¯ä»¥æ¥å—æ¥è‡ªä»»ä½•æ¨¡å—çš„å„ç§é£æ ¼çš„Cellï¼Œè¿™æ˜¯æˆ‘æƒ³è¦çš„å‡å°‘ä¾µå…¥ã€‚</p>
<p>cellModelä¸­å®šä¹‰äº†Cellæ‰€å¯¹åº”çš„å¡«å……æ•°æ®æ ¼å¼ï¼Œåœ¨ç¬¬ä¸€æ¬¡å†™çš„æ—¶å€™éš¾å…ä¼šæŒ‰ç…§ä¸šåŠ¡é€»è¾‘èµ·ä¸€äº›ä¸šåŠ¡é€»è¾‘çš„åå­—ï¼Œåœ¨å¤ç”¨çš„æ—¶å€™åˆä¸èƒ½æ”¹åå­—ï¼Œä¼šå¯¹ç»´æŠ¤å’Œå¼€å‘åŠ äº†ä¸€å®šé‡çš„å¤æ‚åº¦ï¼Œè¿™ä¸æ˜¯æˆ‘æƒ³è¦çš„ã€‚ã€‚</p>
<p>äºæ˜¯ä¹æ¯ä¸ªCellModelæ ¹æ®è‡ªå·±çš„éœ€è¦ç»‘å®šéœ€è¦ç»‘å®šçš„Cellï¼Œå»å¡«å……Cellæ‰€å¯¹åº”çš„æ•°æ®å°±å¥½ã€‚åªéœ€è¦ä¾µå…¥cellModelå³å¯ã€‚ä»£ä»·æœ€å°ï¼Œå—ç›Šæœ€å¤§ã€‚</p>
<p>PS.å¯¹äºåŒä¸€ä¸ªListï¼Œéœ€è¦æ³¨æ„cellçš„å¤ç”¨å’Œå¤šä¸ªcellModelåŒæ—¶ç»‘å®šä¸€ä¸ªcellæ—¶ï¼Œå±æ€§çš„è®¾ç½®ã€‚</p>
<h3 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h3><p><a href="https://github.com/madordie/collectionview-simplify-business" target="_blank" rel="noopener">Demo</a>éƒ¨åˆ†æ²¡æœ‰å†™è·³è½¬ç›¸å…³å†…å®¹ï¼Œä½†æ˜¯åˆ«çš„éƒ½æœ‰äº†ğŸ˜‚</p>
<h3 id="åˆ«çš„"><a href="#åˆ«çš„" class="headerlink" title="åˆ«çš„"></a>åˆ«çš„</h3><p>å¥½åƒæ²¡äº†å§ï½ï¼Œæƒ³èµ·æ¥äº†å†è¡¥å……å’¯</p>
<h3 id="å¶ç„¶çœ‹åˆ°ä¸€ä¸ªç±»ä¼¼çš„æ–‡ç« "><a href="#å¶ç„¶çœ‹åˆ°ä¸€ä¸ªç±»ä¼¼çš„æ–‡ç« " class="headerlink" title="å¶ç„¶çœ‹åˆ°ä¸€ä¸ªç±»ä¼¼çš„æ–‡ç« "></a>å¶ç„¶çœ‹åˆ°ä¸€ä¸ªç±»ä¼¼çš„æ–‡ç« </h3><blockquote>
<p><a href="https://www.appcoda.com.tw/tableview-mvvm/" target="_blank" rel="noopener">Table View å¤ªè¤‡é›œï¼Ÿåˆ©ç”¨ MVVM å’Œ Protocol å°±å¯ä»¥ç‚ºå®ƒé‡æ§‹ç˜¦èº«ï¼</a></p>
</blockquote>
<p>æ˜¨å¤©(2018.7.24)ç¿»æ–‡ç« çš„æ—¶å€™çœ‹åˆ°è¿™ä¸ªæ–‡ç« ï¼Œç„¶åå°†æ–‡ç« å’Œä»£ç æ‹äº†ä¸€ä¸‹ï¼Œå‘ç°è¿™æ‰æ˜¯MVVMå§ã€‚è§‰å¾—ä¸é”™ï¼Œè´´å‡ºæ¥ï½</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;UITableView&lt;/code&gt;ä½œä¸ºé«˜çº§æ§ä»¶è¢«å¼€å‘è€…å¹¿æ³›ä½¿ç”¨ï¼ŒåŒæ ·çš„ï¼Œ&lt;code&gt;UICollectionView&lt;/code&gt;ç”±äºå…¶NBçš„å¸ƒå±€ä¹Ÿè¢«å¹¿æ³›ä½¿ç”¨ã€‚ä½†æ˜¯åè€…åœ¨ä½¿ç”¨çš„æ—¶å€™å¤§å¤šæ•°éƒ½å±äºè‡ªå®šä¹‰çš„æ¯”è¾ƒå¤šï¼Œå‰è€…åˆ™ç›¸å¯¹æ™®é€šï¼ŒliståŸºæœ¬ä¸Šéƒ½ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¸šåŠ¡éœ€æ±‚ä¸­ï¼Œå¸¸è§„å¸ƒå±€ï¼Œå¤§å¤šæ•°éƒ½æ˜¯é‡‡ç”¨&lt;code&gt;UITableView&lt;/code&gt;è¿›è¡Œçš„ï¼Œä½†æ˜¯æœ‰ç—›ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“ä½¿åœ¨APPå†…ç”¨è¿‡ä¸€æ¬¡ç€‘å¸ƒæµä¹‹åï¼Œè®¾è®¡å¸ˆä¼šçªç„¶çš„è®©ä½ åœ¨æ­£å¸¸çš„listä¸­åº•éƒ¨è¿½åŠ ç€‘å¸ƒæµã€‚ã€‚è™½ç„¶æ˜¯åœ¨åº•éƒ¨è¿½åŠ ï¼Œä½†æ˜¯è¦ä»&lt;code&gt;UITableView&lt;/code&gt;è¿ç§»åˆ°&lt;code&gt;UICollectionView&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UITableViewDelegate&lt;/code&gt;ã€&lt;code&gt;UITableViewDataSource&lt;/code&gt; ææ€•æ¯å¤„ä½¿ç”¨éƒ½è¦å†™ç¹ççš„ç›¸åŒçš„ä»£ç å§ï½&lt;/li&gt;
&lt;li&gt;å¾ˆå¤šäººä¹Ÿä¼šå¯¹å…¶è¿›è¡Œé«˜åº¦ç¼“å­˜å•Šç¥é©¬çš„ä¼˜åŒ–ç­–ç•¥&lt;/li&gt;
&lt;li&gt;ä¸çŸ¥ä¸è§‰è¿™äº›ä»£ç å †åœ¨ä¸€èµ·å·²ç»å°†&lt;code&gt;UIViewController&lt;/code&gt;å †çš„ç›¸å½“çš„é«˜&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç„¶åå‘¢ï¼Œæˆ‘ä»¬ç°åœ¨ä½¿ç”¨ä¸€ä¸ª&lt;code&gt;CollectionView&lt;/code&gt;å°†è¿™äº›æ“ä½œåŒ…è£…ä¸€ä¸‹ï¼Œè¾¾åˆ°è¿™æ ·ä¸€ä¸ªæµç¨‹:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;è‡ªå®šä¹‰Cellã€CellModel&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;LabelCell&lt;/span&gt;: &lt;span class=&quot;title&quot;&gt;UICollectionViewCell&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; info = &lt;span class=&quot;type&quot;&gt;UILabel&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;sizeThatFits&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;number&quot;&gt;_&lt;/span&gt; size: CGSize)&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;CGSize&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;CGSize&lt;/span&gt;(width: size.width, height: info.frame.maxY + info.frame.minY)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;LabelCell&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Model&lt;/span&gt;: &lt;span class=&quot;title&quot;&gt;ListItemDefaultProtocol&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; info: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;fillModel&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(view: LabelCell)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            view.info.text = info&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;è¯·æ±‚ã€å¤„ç†æ•°æ®æ ¼å¼åŒ–ä¸º&lt;code&gt;LabelCell.Model&lt;/code&gt;è¿™æ ·çš„ç±»&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å¤„ç†å¥½çš„æ•°æ®äº¤ç»™&lt;code&gt;CollectionView&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;list.sections = model.format(...)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ä¼‘æ¯ä¸€ä¼šï¼Œå®Œå·¥äº†ï½&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç„¶åï¼Œæ¥çœ‹çœ‹&lt;code&gt;Collection&lt;/code&gt;é‡Œé¢éƒ½åšäº†ä»€ä¹ˆæ“ä½œ&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="https://madordie.github.io/categories/iOS/"/>
    
    
      <category term="tool" scheme="https://madordie.github.io/tags/tool/"/>
    
      <category term="UICollectionView" scheme="https://madordie.github.io/tags/UICollectionView/"/>
    
  </entry>
  
  <entry>
    <title>mac10.13 pods å‘½ä»¤é”™è¯¯</title>
    <link href="https://madordie.github.io/post/macos-high-sierra-cocoapods/"/>
    <id>https://madordie.github.io/post/macos-high-sierra-cocoapods/</id>
    <published>2017-09-29T06:03:58.000Z</published>
    <updated>2017-10-10T06:08:43.665Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>æ¯é€¢å‡çº§å¤§ç‰ˆæœ¬æ€»è¦è¿‡æç‚¹äº‹æƒ…ã€‚</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pod env</span><br><span class="line">-bash: /usr/<span class="built_in">local</span>/bin/pod: /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby: bad interpreter: No such file or directory</span><br></pre></td></tr></table></figure>
<p>ä¸è®ºæ˜¯<code>pod env</code>ã€<code>pod update</code> ç­‰ç­‰å‡æŠ¥ä¸Šé¢çš„é”™è¯¯ã€‚</p>
<p>å¦‚æœGoogleå‘ç°ï¼š</p>
<ul>
<li><a href="https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra" target="_blank" rel="noopener">ruby - CocoaPods not working in macOS High Sierra - Stack Overflow</a></li>
<li><a href="https://github.com/CocoaPods/CocoaPods/issues/6778" target="_blank" rel="noopener">CocoaPods CLI fails in High Sierra due to change of Ruby version #6778</a></li>
<li><a href="https://github.com/CocoaPods/CocoaPods/issues/6898#issuecomment-332060096" target="_blank" rel="noopener">High Sierra: bad interpreter #6898</a></li>
</ul>
<p>äº‹æƒ…çš„ç¼˜ç”±å°±æ˜¯è¿™æ ·ã€‚</p>
<p><a href="https://github.com/CocoaPods/CocoaPods/issues/6898#issuecomment-332060096" target="_blank" rel="noopener">#6898</a>ä¸­é“å‡ºäº†ç®€å•ç›´æ¥çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<blockquote>
<p>for all others:</p>
</blockquote>
<blockquote>
<p><code>gem install -n /usr/local/bin cocoapods</code></p>
</blockquote>
<blockquote>
<p>fixes it</p>
</blockquote>
<p><strong>ç»¼åˆèµ·æ¥</strong>è§£å†³è¿™ä¸ªé—®é¢˜æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ gem update --system</span><br><span class="line">$ gem uninstall cocoapods</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">'gem: --bindir /usr/local/bin'</span> &gt;&gt; ~/.gemrc</span><br><span class="line">$ sudo gem install cocoapods</span><br></pre></td></tr></table></figure>
<p>æ„‰å¿«çš„ä½¿ç”¨cocoapodså§ï½</p>
]]></content>
    
    <summary type="html">
    
      &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css&quot;&gt;&lt;p&gt;æ¯é€¢å‡çº§å¤§ç‰ˆæœ¬æ€»è¦è¿‡æç‚¹äº‹æƒ…ã€‚&lt;/p&gt;
&lt;figure class=&quot;hig
    
    </summary>
    
      <category term="macOS" scheme="https://madordie.github.io/categories/macOS/"/>
    
    
      <category term="cocoapods" scheme="https://madordie.github.io/tags/cocoapods/"/>
    
  </entry>
  
  <entry>
    <title>mac10.13ä¾æ—§è®©Xcodeæ”¯æŒæ‰“å¼€ç»ˆç«¯</title>
    <link href="https://madordie.github.io/post/mac-high-sierra-open-with-external/"/>
    <id>https://madordie.github.io/post/mac-high-sierra-open-with-external/</id>
    <published>2017-09-28T11:06:47.000Z</published>
    <updated>2017-10-09T04:59:40.198Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>åœ¨macOS10.13ä»¥å‰æ˜¯æ”¯æŒXcodeä¸­ç›´æ¥æ‰“å¼€ç»ˆç«¯çš„ï¼Œæ­¥éª¤å‘¢å°±æ˜¯ä¸‹é¢è¿™æ ·å­ï¼š</p>
<p><img src="/images/mac-high-sierra-open-with-external-1.gif" alt="æ•ˆæœå›¾"></p>
<ol>
<li>å³å‡»å·¥ç¨‹</li>
<li>Open With External Editor</li>
<li>ç»ˆç«¯å¼¹å‡ºæ¥äº†ã€‚ã€‚</li>
</ol>
<p>å¦‚æœæ²¡æœ‰ç”Ÿæ•ˆï¼Œå°±æ˜¯ä½ çš„ç”µè„‘ä¸Šè£…äº†ä»€ä¹ˆå¯ä»¥æ‰“å¼€<code>xx.xcodeproj</code>çš„åº”ç”¨ç¨‹åºï¼Œä¹Ÿå°±æ˜¯åœ¨<code>Finder</code>ä¸‹å³å‡»å¯ä»¥çœ‹åˆ°å¦‚ä¸‹æ ·å¼ï¼š</p>
<p><img src="/images/mac-high-sierra-open-with-external-2.jpg" alt="æ•ˆæœå›¾"></p>
<p>å‘ï½ Xcodeä¸ºé»˜è®¤ï¼Œå¤‡å¿˜å½•ä¸ºé»˜è®¤ä¸‹é¢çš„ç¬¬ä¸€ä¸ªï½ï½</p>
<p>å¯¹ï¼Œå¦‚æœè¿™æ ·çš„è¯ï¼Œé‚£ä¹ˆæŒ‰ç…§ä¸Šé¢3æ­¥ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ï¼šè¿™ä¸ªæ–‡ä»¶è¢«è«åå…¶å¦™çš„ä¿å­˜åœ¨äº†å¤‡å¿˜å½•ï½ï½  </p>
<p>è¿™ä¸æ˜¯æˆ‘ä»¬è¦çš„ğŸ¤·â€â™‚ï¸ï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¿®æ”¹<code>å¤‡å¿˜å½•.app</code>çš„é…ç½®æ–‡ä»¶æ¥è¾¾åˆ°æˆ‘ä»¬çš„æ•ˆæœã€‚</p>
<a id="more"></a>
<h3 id="æˆå› "><a href="#æˆå› " class="headerlink" title="æˆå› "></a>æˆå› </h3><p>macSO10.13åŠ å¼ºäº†å¤‡å¿˜å½•ï¼Œå—¯çš„ç¡®å˜å¼ºäº†ï¼Œå¯æ˜¯å¹¶æ²¡æœ‰Xcodeå’Œç»ˆç«¯å¸¸ç”¨ã€‚</p>
<p>å¤‡å¿˜å½•å¢åŠ äº†å¯¼å…¥çš„åŠŸèƒ½ï¼Œæ”¯æŒäº†ä¸€äº›æ–‡ä»¶çš„æ‰“å¼€(åªæ˜¯å¯¼å…¥è€Œå·²ã€‚ã€‚)ï¼Œä½†æ˜¯å¹¶ä¸é€‚åˆæˆ‘ã€‚äºæ˜¯æ”¹ä¸€ä¸‹å§ï½ï½</p>
<h3 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h3><ol>
<li>åœ¨<code>åº”ç”¨ç¨‹åº</code>ä¸­æ‰¾åˆ°<code>å¤‡å¿˜å½•</code></li>
<li>æ˜¾ç¤ºåŒ…å†…å®¹</li>
<li>æ‰¾åˆ° æˆ‘ä»¬è¦ä¿®æ”¹çš„plistæ–‡ä»¶ï¼š <code>Contents/Info.plist</code></li>
<li>åšä¸€ä¸‹å¤‡ä»½ï¼šå¤åˆ¶ä¸€ä¸‹ã€‚ã€‚</li>
<li>ç¡®ä¿ <4> å·²å®Œæˆ</4></li>
<li>ç›´æ¥ä¿®æ”¹<code>Info.plist</code>ä¼šæç¤ºæ²¡æœ‰æƒé™ï¼Œä½¿ç”¨<code>sudo vim Info.plist</code>ä¿®æ”¹</li>
<li><p>ä¸ç®¡ä½ ç”¨ä»€ä¹ˆæ–¹æ³•ï¼Œåˆ é™¤ä¸‹é¢çš„è¿™äº›ä»£ç </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>CFBundleTypeName<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>General files and folders<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>CFBundleTypeRole<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>Viewer<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>LSItemContentTypes<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>public.data<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>public.directory<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>:wq</code></p>
</li>
<li>é‡å¯ä¸€ä¸‹ ï¼ˆç›®çš„ï¼šé‡å»ºç´¢å¼•ï¼‰</li>
</ol>
<h3 id="è‡³äºæˆ‘åšäº†ä»€ä¹ˆ"><a href="#è‡³äºæˆ‘åšäº†ä»€ä¹ˆ" class="headerlink" title="è‡³äºæˆ‘åšäº†ä»€ä¹ˆ"></a>è‡³äºæˆ‘åšäº†ä»€ä¹ˆ</h3><p>è®²é“ç†ï¼Œç”¨Xcodeçš„éƒ½çŸ¥é“å§ï¼Ÿè¿™ä¸ªæ˜¯æ³¨å†Œçš„appæ”¯æŒçš„æ–‡ä»¶ç±»å‹ã€‚ åˆ é™¤ä¹‹åå°±å¯ä»¥äº†ï¼Œå°±è¿™ä¹ˆå¤šğŸ˜‚</p>
<h3 id="æ³¨æ„ä¸€ä¸‹"><a href="#æ³¨æ„ä¸€ä¸‹" class="headerlink" title="æ³¨æ„ä¸€ä¸‹"></a>æ³¨æ„ä¸€ä¸‹</h3><p><code>æ“ä½œ</code>ä¸­çš„<code>æ­¥éª¤9</code>å¯ä»¥æœ‰è„šæœ¬ï¼Œä½†æ˜¯è¿˜æ˜¯è€å®é‡å¯ä¸€ä¸‹å§ï¼Œæœ‰çš„è„šæœ¬ä¼šä½¿éƒ¨åˆ†å›¾æ ‡å¤±æ•ˆï¼Œå·¨çƒ¦ã€‚ã€‚è¿˜æ˜¯é‡å¯ä¸€ä¸‹æ¯”è¾ƒé è°±ã€‚æ¯•ç«Ÿä¸ç€æ€¥</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨macOS10.13ä»¥å‰æ˜¯æ”¯æŒXcodeä¸­ç›´æ¥æ‰“å¼€ç»ˆç«¯çš„ï¼Œæ­¥éª¤å‘¢å°±æ˜¯ä¸‹é¢è¿™æ ·å­ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/mac-high-sierra-open-with-external-1.gif&quot; alt=&quot;æ•ˆæœå›¾&quot;&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å³å‡»å·¥ç¨‹&lt;/li&gt;
&lt;li&gt;Open With External Editor&lt;/li&gt;
&lt;li&gt;ç»ˆç«¯å¼¹å‡ºæ¥äº†ã€‚ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¦‚æœæ²¡æœ‰ç”Ÿæ•ˆï¼Œå°±æ˜¯ä½ çš„ç”µè„‘ä¸Šè£…äº†ä»€ä¹ˆå¯ä»¥æ‰“å¼€&lt;code&gt;xx.xcodeproj&lt;/code&gt;çš„åº”ç”¨ç¨‹åºï¼Œä¹Ÿå°±æ˜¯åœ¨&lt;code&gt;Finder&lt;/code&gt;ä¸‹å³å‡»å¯ä»¥çœ‹åˆ°å¦‚ä¸‹æ ·å¼ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/mac-high-sierra-open-with-external-2.jpg&quot; alt=&quot;æ•ˆæœå›¾&quot;&gt;&lt;/p&gt;
&lt;p&gt;å‘ï½ Xcodeä¸ºé»˜è®¤ï¼Œå¤‡å¿˜å½•ä¸ºé»˜è®¤ä¸‹é¢çš„ç¬¬ä¸€ä¸ªï½ï½&lt;/p&gt;
&lt;p&gt;å¯¹ï¼Œå¦‚æœè¿™æ ·çš„è¯ï¼Œé‚£ä¹ˆæŒ‰ç…§ä¸Šé¢3æ­¥ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ï¼šè¿™ä¸ªæ–‡ä»¶è¢«è«åå…¶å¦™çš„ä¿å­˜åœ¨äº†å¤‡å¿˜å½•ï½ï½  &lt;/p&gt;
&lt;p&gt;è¿™ä¸æ˜¯æˆ‘ä»¬è¦çš„ğŸ¤·â€â™‚ï¸ï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¿®æ”¹&lt;code&gt;å¤‡å¿˜å½•.app&lt;/code&gt;çš„é…ç½®æ–‡ä»¶æ¥è¾¾åˆ°æˆ‘ä»¬çš„æ•ˆæœã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="macOS" scheme="https://madordie.github.io/categories/macOS/"/>
    
    
      <category term="Xcode" scheme="https://madordie.github.io/tags/Xcode/"/>
    
  </entry>
  
  <entry>
    <title>Xcode9ç¼–è¯‘å¤±è´¥</title>
    <link href="https://madordie.github.io/post/debug-xcode9-build-ipa/"/>
    <id>https://madordie.github.io/post/debug-xcode9-build-ipa/</id>
    <published>2017-09-26T06:16:32.000Z</published>
    <updated>2017-10-11T03:37:39.832Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h2 id="é”™è¯¯è¾“å‡º"><a href="#é”™è¯¯è¾“å‡º" class="headerlink" title="é”™è¯¯è¾“å‡º"></a>é”™è¯¯è¾“å‡º</h2><blockquote>
<p>error: exportArchive: â€œFangduoduo_ent.appâ€ requires a provisioning profile with the Push Notifications and Associated Domains features.</p>
</blockquote>
<blockquote>
<p>Error Domain=IDEProvisioningErrorDomain Code=9 â€œâ€Fangduoduo_ent.appâ€ requires a provisioning profile with the Push Notifications and Associated Domains features.â€ UserInfo={NSLocalizedDescription=â€Fangduoduo_ent.appâ€ requires a provisioning profile with the Push Notifications and Associated Domains features., NSLocalizedRecoverySuggestion=Add a profile to the â€œprovisioningProfilesâ€ dictionary in your Export Options property list.}</p>
</blockquote>
<a id="more"></a>
<h2 id="é”™è¯¯åŸå› "><a href="#é”™è¯¯åŸå› " class="headerlink" title="é”™è¯¯åŸå› "></a>é”™è¯¯åŸå› </h2><p>åœ¨å‡çº§Xcode9æ­£å¼ç‰ˆä¹‹åï¼ŒJenkinsä¹Ÿå°±å‡çº§äº†ï¼Œäºæ˜¯ä¹ç”¨åŸæ¥çš„å¥—è·¯æ‰“åŒ…ä¹‹åå°±æ˜¯ä¸Šé¢çš„é”™è¯¯ 5555â€¦</p>
<p>å¦‚æœä½¿ç”¨<code>xcodebuild</code>è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆè¿™ä¸ªä¼šå‘ç”Ÿåœ¨é€‰æ‹©è¯ä¹¦çš„æ­¥éª¤ï¼Œé”™è¯¯å¤§è‡´å°±æ˜¯è¿™æ ·ã€‚</p>
<p><code>$xcodebuild --help</code> å¯ä»¥çœ‹åˆ°ä¸€äº›ä¿¡æ¯ï¼Œè€Œä¸”åœ¨æœ€åè¿˜ç‰¹æ„æå‡ºäº†ä¸€ä¸ªâ€œ-exportOptionsPlistâ€å‚æ•°ã€‚å…·ä½“å†…å®¹è§<code>xcodebuild --help</code></p>
<h2 id="è§£å†³é—®é¢˜æ‰æ˜¯å…³é”®"><a href="#è§£å†³é—®é¢˜æ‰æ˜¯å…³é”®" class="headerlink" title="è§£å†³é—®é¢˜æ‰æ˜¯å…³é”®"></a>è§£å†³é—®é¢˜æ‰æ˜¯å…³é”®</h2><ol>
<li><p>ä½¿ç”¨xcode9è¿›è¡Œä¸€æ¬¡<code>archive</code></p>
</li>
<li><p>é€‰æ‹©ç›¸å…³è¯ä¹¦å•Šç¥é©¬çš„ï¼Œä¿æŒ<code>thinning</code>ä¸å˜å°±å¥½</p>
</li>
<li><p>å¯¼å‡º</p>
</li>
<li><p>å¯¼å‡ºç›®å½•æœ‰ä¸€ä¸ª<code>ExportOptionsPlist.plist</code>ï¼Œè¿™ä¸ªå°±æ˜¯æ‰“åŒ…æ—¶å€™éœ€è¦çš„plist</p>
</li>
</ol>
<h2 id="è„šæœ¬æ„å»º"><a href="#è„šæœ¬æ„å»º" class="headerlink" title="è„šæœ¬æ„å»º"></a>è„šæœ¬æ„å»º</h2><p><code>ipa</code>å³ä¸ºç›®æ ‡å˜é‡ï¼Œå…·ä½“çš„å‚çœ‹<a href="../build-ipa-sh">æ‰“åŒ…è„šæœ¬</a></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">rm -rf ./build/*</span><br><span class="line">cat &lt;&lt; EOF &gt; ./build/exportOptionsPlist.plist</span><br><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;!DOCTYPE plist PUBLIC <span class="string">"-//Apple//DTD PLIST 1.0//EN"</span> <span class="string">"http://www.apple.com/DTDs/PropertyList-1.0.dtd"</span>&gt;</span><br><span class="line">&lt;plist version=<span class="string">"1.0"</span>&gt;</span><br><span class="line">&lt;dict&gt;</span><br><span class="line">    &lt;key&gt;compileBitcode&lt;/key&gt;</span><br><span class="line">    &lt;<span class="literal">true</span>/&gt;</span><br><span class="line">    &lt;key&gt;method&lt;/key&gt;</span><br><span class="line">    &lt;string&gt;enterprise&lt;/string&gt;</span><br><span class="line">    &lt;key&gt;provisioningProfiles&lt;/key&gt;</span><br><span class="line">    &lt;dict&gt;</span><br><span class="line">        &lt;key&gt;ershoufanglzg.fangdd.com&lt;/key&gt;</span><br><span class="line">        &lt;string&gt;ershoufanglzg_dis&lt;/string&gt;</span><br><span class="line">    &lt;/dict&gt;</span><br><span class="line">    &lt;key&gt;signingCertificate&lt;/key&gt;</span><br><span class="line">    &lt;string&gt;iPhone Distribution&lt;/string&gt;</span><br><span class="line">    &lt;key&gt;signingStyle&lt;/key&gt;</span><br><span class="line">    &lt;string&gt;manual&lt;/string&gt;</span><br><span class="line">    &lt;key&gt;stripSwiftSymbols&lt;/key&gt;</span><br><span class="line">    &lt;<span class="literal">true</span>/&gt;</span><br><span class="line">    &lt;key&gt;teamID&lt;/key&gt;</span><br><span class="line">    &lt;string&gt;J3B467DURT&lt;/string&gt;</span><br><span class="line">    &lt;key&gt;thinning&lt;/key&gt;</span><br><span class="line">    &lt;string&gt;&amp;lt;none&amp;gt;&lt;/string&gt;</span><br><span class="line">&lt;/dict&gt;</span><br><span class="line">&lt;/plist&gt;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">xcodebuild -archivePath <span class="string">"./build/xxx.xcarchive"</span> -workspace Fangduoduo.xcworkspace -sdk iphoneos -scheme <span class="string">"Fangduoduo_ent"</span> -configuration <span class="string">"Release Inhouse"</span> archive</span><br><span class="line">xcodebuild -exportArchive -archivePath <span class="string">"./build/xxx.xcarchive"</span> -exportPath <span class="string">"./build/"</span> -exportOptionsPlist ./build/exportOptionsPlist.plist</span><br><span class="line"></span><br><span class="line">ipa=$(<span class="built_in">pwd</span>)/$(ls ./build/*.ipa)</span><br></pre></td></tr></table></figure>
<h2 id="xcodebuild-â€“help"><a href="#xcodebuild-â€“help" class="headerlink" title="xcodebuild â€“help"></a>xcodebuild â€“help</h2><blockquote>
<p>Available keys for -exportOptionsPlist:</p>
</blockquote>
<blockquote>
<p>compileBitcode : Bool</p>
</blockquote>
<blockquote>
<p>For non-App Store exports, should Xcode re-compile the app from bitcode? Defaults to YES.</p>
</blockquote>
<blockquote>
<p>embedOnDemandResourcesAssetPacksInBundle : Bool</p>
</blockquote>
<blockquote>
<p>For non-App Store exports, if the app uses On Demand Resources and this is YES, asset packs are embedded in the app bundle so that the app can be tested without a server to host asset packs. Defaults to YES unless onDemandResourcesAssetPacksBaseURL is specified.</p>
</blockquote>
<blockquote>
<p>iCloudContainerEnvironment : String</p>
</blockquote>
<blockquote>
<p>If the app is using CloudKit, this configures the â€œcom.apple.developer.icloud-container-environmentâ€ entitlement. Available options vary depending on the type of provisioning profile used, but may include: Development and Production.</p>
</blockquote>
<blockquote>
<p>installerSigningCertificate : String</p>
</blockquote>
<blockquote>
<p>For manual signing only. Provide a certificate name, SHA-1 hash, or automatic selector to use for signing. Automatic selectors allow Xcode to pick the newest installed certificate of a particular type. The available automatic selectors are â€œMac Installer Distributionâ€ and â€œDeveloper ID Installerâ€. Defaults to an automatic certificate selector matching the current distribution method.</p>
</blockquote>
<blockquote>
<p>manifest : Dictionary</p>
</blockquote>
<blockquote>
<p>For non-App Store exports, users can download your app over the web by opening your distribution manifest file in a web browser. To generate a distribution manifest, the value of this key should be a dictionary with three sub-keys: appURL, displayImageURL, fullSizeImageURL. The additional sub-key assetPackManifestURL is required when using on-demand resources.</p>
</blockquote>
<blockquote>
<p>method : String</p>
</blockquote>
<blockquote>
<p>Describes how Xcode should export the archive. Available options: app-store, package, ad-hoc, enterprise, development, developer-id, and mac-application. The list of options varies based on the type of archive. Defaults to development.</p>
</blockquote>
<blockquote>
<p>onDemandResourcesAssetPacksBaseURL : String</p>
</blockquote>
<blockquote>
<p>For non-App Store exports, if the app uses On Demand Resources and embedOnDemandResourcesAssetPacksInBundle isnâ€™t YES, this should be a base URL specifying where asset packs are going to be hosted. This configures the app to download asset packs from the specified URL.</p>
</blockquote>
<blockquote>
<p>provisioningProfiles : Dictionary</p>
</blockquote>
<blockquote>
<p>For manual signing only. Specify the provisioning profile to use for each executable in your app. Keys in this dictionary are the bundle identifiers of executables; values are the provisioning profile name or UUID to use.</p>
</blockquote>
<blockquote>
<p>signingCertificate : String</p>
</blockquote>
<blockquote>
<p>For manual signing only. Provide a certificate name, SHA-1 hash, or automatic selector to use for signing. Automatic selectors allow Xcode to pick the newest installed certificate of a particular type. The available automatic selectors are â€œMac App Distributionâ€, â€œiOS Developerâ€, â€œiOS Distributionâ€, â€œDeveloper ID Applicationâ€, and â€œMac Developerâ€. Defaults to an automatic certificate selector matching the current distribution method.</p>
</blockquote>
<blockquote>
<p>signingStyle : String</p>
</blockquote>
<blockquote>
<p>The signing style to use when re-signing the app for distribution. Options are manual or automatic. Apps that were automatically signed when archived can be signed manually or automatically during distribution, and default to automatic. Apps that were manually signed when archived must be manually signed during distribtion, so the value of signingStyle is ignored.</p>
</blockquote>
<blockquote>
<p>stripSwiftSymbols : Bool</p>
</blockquote>
<blockquote>
<p>Should symbols be stripped from Swift libraries in your IPA? Defaults to YES.</p>
</blockquote>
<blockquote>
<p>teamID : String</p>
</blockquote>
<blockquote>
<p>The Developer Portal team to use for this export. Defaults to the team used to build the archive.</p>
</blockquote>
<blockquote>
<p>thinning : String</p>
</blockquote>
<blockquote>
<p>For non-App Store exports, should Xcode thin the package for one or more device variants? Available options: <none> (Xcode produces a non-thinned universal app), <thin-for-all-variants> (Xcode produces a universal app and all available thinned variants), or a model identifier for a specific device (e.g. â€œiPhone7,1â€). Defaults to <none>.</none></thin-for-all-variants></none></p>
</blockquote>
<blockquote>
<p>uploadBitcode : Bool</p>
</blockquote>
<blockquote>
<p>For App Store exports, should the package include bitcode? Defaults to YES.</p>
</blockquote>
<blockquote>
<p>uploadSymbols : Bool</p>
</blockquote>
<blockquote>
<p>For App Store exports, should the package include symbols? Defaults to YES.</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;é”™è¯¯è¾“å‡º&quot;&gt;&lt;a href=&quot;#é”™è¯¯è¾“å‡º&quot; class=&quot;headerlink&quot; title=&quot;é”™è¯¯è¾“å‡º&quot;&gt;&lt;/a&gt;é”™è¯¯è¾“å‡º&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;error: exportArchive: â€œFangduoduo_ent.appâ€ requires a provisioning profile with the Push Notifications and Associated Domains features.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Error Domain=IDEProvisioningErrorDomain Code=9 â€œâ€Fangduoduo_ent.appâ€ requires a provisioning profile with the Push Notifications and Associated Domains features.â€ UserInfo={NSLocalizedDescription=â€Fangduoduo_ent.appâ€ requires a provisioning profile with the Push Notifications and Associated Domains features., NSLocalizedRecoverySuggestion=Add a profile to the â€œprovisioningProfilesâ€ dictionary in your Export Options property list.}&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="iOS" scheme="https://madordie.github.io/categories/iOS/"/>
    
    
      <category term="æ„å»º" scheme="https://madordie.github.io/tags/%E6%9E%84%E5%BB%BA/"/>
    
      <category term="DEBUG" scheme="https://madordie.github.io/tags/DEBUG/"/>
    
  </entry>
  
  <entry>
    <title>iOSè‡ªåŠ¨åŒ–-Jenkinsç¼–è¯‘å·¥ç¨‹</title>
    <link href="https://madordie.github.io/post/ios-automation-jenkins-build/"/>
    <id>https://madordie.github.io/post/ios-automation-jenkins-build/</id>
    <published>2017-09-14T09:27:15.000Z</published>
    <updated>2017-10-10T06:05:41.268Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><ul>
<li><a href="../ios-automation-jenkins-configuration">iOSè‡ªåŠ¨åŒ–-Jenkinsç¯å¢ƒæ­å»º</a></li>
<li><a href="../ios-automation-jenkins-build">iOSè‡ªåŠ¨åŒ–-Jenkinsç¼–è¯‘å·¥ç¨‹</a></li>
</ul>
<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>Jenkinsç¯å¢ƒå·²æ­å»ºå¥½ï¼Œç°åœ¨æˆ‘ä»¬æ¥å¼€å§‹æ„‰å¿«çš„ä¸ºiOSæ‰“åŒ…å§ï½</p>
<p>ä»è¿™ä¸ªæ–‡ç« ä¸­ä½ å°†è¦å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>åœ¨Jenkinsåˆ›å»ºå·¥ç¨‹</li>
<li>buildå‡ºipa</li>
<li>å°†ipaä¸Šä¼ è‡³fir</li>
<li>é’‰é’‰æœºå™¨äººç¾¤é€šçŸ¥</li>
<li>å°†dsymä¸Šä¼ è‡³bugly</li>
</ul>
<a id="more"></a>
<h2 id="è„šæœ¬ç¯å¢ƒå®‰è£…"><a href="#è„šæœ¬ç¯å¢ƒå®‰è£…" class="headerlink" title="è„šæœ¬ç¯å¢ƒå®‰è£…"></a>è„šæœ¬ç¯å¢ƒå®‰è£…</h2><p>è¿™é‡Œå¤§å¤šæ•°æ“ä½œéƒ½æ˜¯ç”¨è„šæœ¬æ¥è¿›è¡Œçš„ï¼Œä¸ä¸ºåˆ«çš„ï¼Œå°±ä¸ºè‡ªç”±å’Œä»¥åï½</p>
<h3 id="fastlane"><a href="#fastlane" class="headerlink" title="fastlane"></a>fastlane</h3><p>æ­¤ä¹ƒè‡ªåŠ¨åŒ–ç¥å™¨ã€‚<a href="https://docs.fastlane.tools" target="_blank" rel="noopener">æ–‡æ¡£åœ¨æ­¤</a>ã€‚<a href="https://github.com/fastlane/fastlane" target="_blank" rel="noopener">å¼€æºå“Ÿï½</a></p>
<p>æ­¤å¤„ä¸»è¦ç”¨æ¥ç¼–è¯‘ã€æ‰“åŒ…ã€‚</p>
<p>å®‰è£…æ–¹æ³•ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew cask install fastlane</span><br></pre></td></tr></table></figure>
<p>æ­¤ç¥å™¨é™¤äº†ä¸Šè¿°åŠŸèƒ½ï¼Œè¿˜æä¾›å¾ˆå¤šå¾ˆå¤šå¾ˆå¤šå¾ˆå¤šåŠŸèƒ½ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰ç¥é©¬çš„éƒ½æ”¯æŒã€‚éœ€è¦çš„å¯ä»¥å»æ–‡æ¡£é‡Œé¢ç¿»ç¿»ã€‚</p>
<p>åœ¨Xcode9 æˆ‘ä½¿ç”¨çš„ç‰ˆæœ¬2.14.1æ‰“åŒ…å‡ºé—®é¢˜äº†ã€‚ã€‚å…·ä½“åœ¨è¿™é‡Œè¯¦è§<a href="../debug-xcode9-build-ipa">Xcode9ç¼–è¯‘å¤±è´¥</a>ã€‚äºæ˜¯å‘¼é‡‡ç”¨äº†<code>xcodebuild</code>è¿›è¡Œæ‰“åŒ…</p>
<h3 id="fir-im-cli"><a href="#fir-im-cli" class="headerlink" title="fir.im-cli"></a>fir.im-cli</h3><p><a href="https://fir.im" target="_blank" rel="noopener">fir.im</a>æä¾›çš„åº”ç”¨å†…æµ‹æ‰˜ç®¡å·¥å…·ã€‚<a href="https://github.com/FIRHQ/fir-cli/blob/master/README.md" target="_blank" rel="noopener">å¼€æºå®˜ç½‘</a>ã€‚</p>
<p>å®‰è£…æ–¹æ³•ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gem install fir-cli</span><br></pre></td></tr></table></figure>
<p>æ­¤å·¥å…·ä¹Ÿæä¾›æ‰“åŒ…ipaã€apkã€ä¸Šä¼ ç¬¦å·è¡¨è‡³BugHDã€ç­‰åŠŸèƒ½ã€‚ä½†æ˜¯æˆ‘ä»¬åœ¨è¿™é‡Œé€‰æ‹©äº†<code>fastlane gym</code></p>
<p>ä¸Šä¼ åŠ é€Ÿï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sh -c <span class="string">"<span class="variable">$(curl -sSL https://gist.githubusercontent.com/trawor/5dda140dee86836b8e60/raw/turbo-qiniu.sh)</span>"</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šä¼ åŠ é€Ÿä»£ç å·²ç»<a href="http://blog.fir.im/turbo-qiniu/" target="_blank" rel="noopener">å¼€æºè‡³æ­¤</a>ã€‚</p>
<p><a href="http://bughd.com" target="_blank" rel="noopener">BugHD</a>: å·²åœæ­¢çº¿ä¸Šå…è´¹æœåŠ¡ï¼Œå¼€å§‹å–ç§æœ‰éƒ¨ç½²äº†ã€‚</p>
<p>å¦å¤–ï¼Œfir ä¹Ÿæœ‰<a href="http://blog.fir.im/jenkins/" target="_blank" rel="noopener">Jenkinsæ’ä»¶</a>ï¼Œä½†æ˜¯è¿™é‡Œé€‰æ‹©è„šæœ¬æ–¹å¼ã€‚</p>
<h2 id="æ’ä»¶å®‰è£…"><a href="#æ’ä»¶å®‰è£…" class="headerlink" title="æ’ä»¶å®‰è£…"></a>æ’ä»¶å®‰è£…</h2><p>æ‰€æœ‰çš„æ’ä»¶å¯ä»¥åœ¨<code>ç³»ç»Ÿç®¡ç† -&gt; æ’ä»¶ç®¡ç†</code>ä¸­è¿›è¡Œå®‰è£…ã€å¸è½½ã€é™çº§ã€æ›´æ–°ã€ç­‰æ“ä½œã€‚</p>
<p>ç¡®ä¿ä»¥ä¸‹æ’ä»¶å·²ç»è¢«å®‰è£…ï¼š</p>
<ul>
<li>æºä»£ç ç®¡ç†ï¼š<a href="https://wiki.jenkins.io/display/JENKINS/Git+Plugin" target="_blank" rel="noopener">Git Plugin</a></li>
<li>ç¼–è¯‘è„šæœ¬ç¯å¢ƒå˜é‡ï¼š<a href="http://wiki.hudson-ci.org/display/HUDSON/Tool+Environment+Plugin" target="_blank" rel="noopener">Tool Environment Plugin</a></li>
</ul>
<p>å—¯ï¼Œå¼€å§‹åˆ›å»ºå·¥ç¨‹ï¼Œç„¶åé…ç½®æ‰“åŒ…å§ï¼</p>
<h2 id="å·¥ç¨‹ç›¸å…³é…ç½®"><a href="#å·¥ç¨‹ç›¸å…³é…ç½®" class="headerlink" title="å·¥ç¨‹ç›¸å…³é…ç½®"></a>å·¥ç¨‹ç›¸å…³é…ç½®</h2><p>å·¦ä¾§çš„<code>æ–°å»º(New Item)</code>æˆ‘å°±ä¸è¯´äº†å§ï½ï¼Œç‚¹å‡»è¾“å…¥é¡¹ç›®åå­—ï¼Œç„¶åé€‰æ‹©ç¬¬ä¸€ä¸ª<code>æ„å»ºä¸€ä¸ªè‡ªç”±é£æ ¼çš„è½¯ä»¶é¡¹ç›®</code>å°±è¡Œå•¦ï½ï½</p>
<p>æ­¤å¤„é¡¹ç›®åå­—æš‚ä¸”æˆä¸º<code>test</code>ã€‚è¿™é‡Œåªè¯´ä¸€äº›æ¯”è¾ƒé‡è¦çš„ï¼Œæ²¡æœ‰æ´»ä¸æˆçš„é‚£ç§é…ç½®ã€‚åˆ«çš„è‡ªå·±ç ”ç©¶ä¸€ä¸‹æˆ–è€…ç‚¹å‡»å³ä¾§â“å°±èƒ½çœ‹åˆ°ä»‹ç»ã€‚</p>
<h3 id="æºç ç®¡ç†"><a href="#æºç ç®¡ç†" class="headerlink" title="æºç ç®¡ç†"></a>æºç ç®¡ç†</h3><p>æ­¤å¤„ç‚¹å‡»<code>Git</code>ï¼Œå±•å¼€ä¹‹åè¾“å…¥<code>Repository URL</code>å³å¯ã€‚</p>
<p><code>Repository URL</code>è¾“å…¥å®Œæ¯•ä¹‹åç‚¹å‡»åˆ«å¤„ï¼ŒJenkinsçš„Gitæ’ä»¶ä¼šè‡ªåŠ¨æ ¡éªŒè¯¥URLæ˜¯å¦èƒ½å¤Ÿcloneä¸‹æ¥ä»£ç ã€‚å‡ºç°çº¢è‰²å°±è‡ªå·±æ ¹æ®é”™è¯¯ä¿®æ”¹ä¸€ä¸‹å’¯ã€‚ã€‚</p>
<p>å¦å¤–æ­¤å¤„æ”¯æŒ<code>ssh</code> çš„æ–¹å¼ï¼Œå¤§è‡´æ ·å¼ä¸ºï¼š<code>ssh://sunjigang@github.com:29418/projects/aaa</code>ã€‚</p>
<p><code>Branches to build</code> å†™ä¸Šä½ çš„æ„å»ºåˆ†æ”¯ï½ï¼Œæ ¹æ®è‡ªå·±éœ€æ±‚æ¥ï¼Œ<code>master</code>ä¸€èˆ¬ä¸ºä»“åº“çš„é»˜è®¤åˆ†æ”¯ã€‚</p>
<h3 id="æ„å»ºè§¦å‘å™¨"><a href="#æ„å»ºè§¦å‘å™¨" class="headerlink" title="æ„å»ºè§¦å‘å™¨"></a>æ„å»ºè§¦å‘å™¨</h3><p>æ­¤å¤„è¡¨ç¤ºè¯¥é¡¹ç›®çš„æ„å»ºè§¦å‘æ¡ä»¶ã€‚ï¼ˆå¯é€‰ï¼‰</p>
<p>æˆ‘ä»¬è¿™é‡Œè¯´ä¸€ä¸‹<code>Poll SCM</code>ï¼š</p>
<p>å®šæ—¶æ£€æŸ¥æºç å˜æ›´ã€‚æ¡ä»¶æ˜¯ ä¸€å®šè¦é…ç½®<code>Git</code>è¿™æ ·çš„æºç ç®¡ç†ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<ul>
<li><code>H/15 * * * *</code>ï¼šæ¯15åˆ†é’Ÿæ„å»ºä¸€æ¬¡</li>
<li><code>0 2 * * *</code>ï¼š æ¯å¤©2:00æ„å»ºä¸€æ¬¡</li>
</ul>
<h3 id="æ„å»º"><a href="#æ„å»º" class="headerlink" title="æ„å»º"></a>æ„å»º</h3><p>æ­¤å¤„ä¸ºæ„å»ºçš„æ ¸å¿ƒğŸ˜‚ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¸ºäº†è‡ªç”±ï¼Œæ­¤å¤„å…¨éƒ¨ä½¿ç”¨<code>shell</code>è„šæœ¬ã€‚</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å·¥ç¨‹å</span></span><br><span class="line">workspace=<span class="string">'xxx.xcworkspace'</span></span><br><span class="line"><span class="comment"># æ„å»ºscheme</span></span><br><span class="line">scheme=<span class="string">'xxx'</span></span><br><span class="line"><span class="comment"># æ‰“åŒ…ç±»å‹ï¼šapp-store, ad-hoc, package, enterprise, development, and developer-id.</span></span><br><span class="line">export_method=<span class="string">'enterprise'</span></span><br><span class="line"><span class="comment"># firçš„tokenï¼Œåœ¨fir-&gt;ç”¨æˆ·-&gt;token è·å–</span></span><br><span class="line">fir_token=<span class="string">'c5077e0368888b9750ae848b9fe00***'</span></span><br><span class="line"><span class="comment"># firä¸Šä¼ çŸ­é“¾æ¥ï¼Œæ•ˆæœä¸º https://fir.im/xxx</span></span><br><span class="line">fir_url=<span class="string">'xxx'</span></span><br><span class="line"><span class="comment"># é’‰é’‰æœºå™¨äººtoken</span></span><br><span class="line">dingtalk_token=<span class="string">'6d09e43ddc62e540be914ff2e901e28b921d55c5ad457f6f3571f9f881287***'</span></span><br><span class="line"><span class="comment"># é’‰é’‰æœºå™¨äººå‘é€çš„å†…å®¹</span></span><br><span class="line">dingtalk_content=<span class="string">"iOSXXXå·²ç»ä¸Šä¼ è‡³ http://fir.im/<span class="variable">$&#123;fir_url&#125;</span> ,å§å•¦å§å•¦å§å•¦ï½"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„å»º</span></span><br><span class="line">fastlane gym</span><br><span class="line">    --workspace <span class="variable">$workspace</span> \</span><br><span class="line">    --scheme <span class="variable">$scheme</span> \</span><br><span class="line">    --export_method <span class="variable">$export_method</span> \</span><br><span class="line">    clean</span><br><span class="line"></span><br><span class="line"><span class="comment"># fir</span></span><br><span class="line">ipa=$(<span class="built_in">pwd</span>)/$(ls *.ipa)</span><br><span class="line">git <span class="built_in">log</span> -10 &gt; git.log</span><br><span class="line">fir p <span class="variable">$ipa</span> -T <span class="variable">$fir_token</span> -s <span class="variable">$fir_url</span> -c git.log</span><br><span class="line"></span><br><span class="line"><span class="comment"># é’‰é’‰é€šçŸ¥</span></span><br><span class="line">curl <span class="string">"https://oapi.dingtalk.com/robot/send?access_token=<span class="variable">$&#123;dingtalk_token&#125;</span>"</span> -H <span class="string">'Content-Type: application/json'</span>    -d <span class="string">'</span></span><br><span class="line"><span class="string">    &#123;"msgtype": "text",</span></span><br><span class="line"><span class="string">        "text": &#123;</span></span><br><span class="line"><span class="string">            "content":$&#123;dingtalk_content&#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;'</span></span><br></pre></td></tr></table></figure>
<p>è‡³æ­¤ å·²ç»å®Œæˆäº†æ‰“åŒ…ã€ä¸Šä¼ firã€é’‰é’‰æœºå™¨äººé€šçŸ¥ã€‚</p>
<p>ä¸Šè¿°è„šæœ¬åªæ˜¯é…ç½®çš„ä¾‹å­ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±éœ€æ±‚ï¼Œè‡ªå·±ç¼–å†™å’Œé…ç½®ã€‚ç‰¹åˆ«æ˜¯</p>
<ul>
<li><code>.xcworkspace</code>çš„ä½ç½®ï¼Œè¦æ‰¾æ¸…æ¥šå‘€</li>
<li><code>scheme</code>æ— æ³•æ‰¾åˆ°æ˜¯å› ä¸ºä½ åœ¨æäº¤ä»£ç çš„æ—¶å€™æ²¡æœ‰å°†å…¶è®¾ç½®ä¸ºshared</li>
<li><code>fastlane gym</code> æ”¯æŒå¾ˆå¤šå‚æ•°ï¼Œæ˜¯å¯¹<code>xcodebuild</code>çš„å°è£…ï¼Œ<a href="https://github.com/fastlane/fastlane/tree/master/gym" target="_blank" rel="noopener">æºç åŠæ–‡æ¡£åœ¨æ­¤</a></li>
</ul>
<h3 id="ä¸Šä¼ dSYMè‡³Bugly"><a href="#ä¸Šä¼ dSYMè‡³Bugly" class="headerlink" title="ä¸Šä¼ dSYMè‡³Bugly"></a>ä¸Šä¼ dSYMè‡³Bugly</h3><p>è¿™ä¸ªè¿˜æ˜¯æœ‰ç‚¹ç‚¹å¤æ‚çš„ï¼Œå› ä¸ºbuglyå¹¶æœªæä¾›å®Œæ•´çš„cliå·¥å…·é“¾ï¼Œéœ€è¦æ‰‹åŠ¨è·‘jaråŒ…ã€‚ä¸è¿‡éƒ½æ˜¯å¯ä»¥å®Œæˆçš„ã€‚</p>
<p>ä¸ºäº†éš”ç¦»å¼€æ‰“åŒ…å’Œä¸Šä¼ ï¼Œè¿™é‡Œåœ¨Jenkinsä¸Šæ–°å»ºä¸€ä¸ªé¡¹ç›®ç”¨æ¥ä¸Šä¼ dSYM</p>
<p>å…¶ä¸­éœ€è¦è¡”æ¥çš„åœ°æ–¹å°±æ˜¯ä¸Šé¢çš„è¾“å‡ºè¦ä½œä¸ºè¿™ä¸ªçš„è¾“å‡ºã€‚æ‰€ä»¥éœ€è¦å‰åå¯¹åº”ä½ç½®ã€‚</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·¯å¾„ä¸»è¦ç”¨æ¥æå–Info.plistä»¥åŠdsymæ–‡ä»¶</span></span><br><span class="line">path=<span class="string">'/Users/FDD/.jenkins/workspace/fdd-ios-app/fdd-app-ios/Fangduoduo'</span></span><br><span class="line"><span class="comment"># scheme name</span></span><br><span class="line">scheme=<span class="string">'Fangduoduo_ent'</span></span><br><span class="line"><span class="comment"># ipa bundleId</span></span><br><span class="line">package=<span class="string">'xx.xx.com'</span></span><br><span class="line"><span class="comment"># bugly id</span></span><br><span class="line">bugly_id=<span class="string">'9xxx'</span></span><br><span class="line"><span class="comment"># bugly key</span></span><br><span class="line">bugly_key=<span class="string">'wHzxcxxx'</span></span><br><span class="line"></span><br><span class="line">rm -rf *dSYM*</span><br><span class="line">cp <span class="variable">$&#123;path&#125;</span>/Fangduoduo/Fangduoduo_ent-Info.plist ./Info.plist</span><br><span class="line">cp -rf <span class="variable">$&#123;path&#125;</span>/build/*.xcarchive/dSYMs .</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------ post dsym ------------ #</span></span><br><span class="line"></span><br><span class="line">app_infoplist_path=<span class="string">'Info.plist'</span></span><br><span class="line">version=$(/usr/libexec/PlistBuddy -c <span class="string">"print CFBundleVersion"</span> <span class="variable">$&#123;app_infoplist_path&#125;</span>)</span><br><span class="line"></span><br><span class="line">java -jar ./bugly/buglySymboliOS.jar \</span><br><span class="line">	-i dSYMs/<span class="variable">$&#123;scheme&#125;</span>.app.dSYM \</span><br><span class="line">    -dsym \</span><br><span class="line">    -u \</span><br><span class="line">    -id <span class="variable">$&#123;bugly_id&#125;</span> \</span><br><span class="line">    -key <span class="variable">$&#123;bugly_key&#125;</span> \</span><br><span class="line">    -package <span class="variable">$&#123;package&#125;</span> \</span><br><span class="line">    -version <span class="variable">$&#123;version&#125;</span></span><br><span class="line">        </span><br><span class="line"><span class="comment"># @bugly jaræ‰§è¡Œçš„æ—¶å€™è¿”å›çŠ¶æ€ç æœ‰é—®é¢˜ã€‚å·²åé¦ˆï¼Œä½†æ˜¯ä¸è§ä¿®æ”¹ã€‚ã€‚</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># ------------ UUID ------------ #</span></span><br><span class="line"></span><br><span class="line">unzip -o ./dSYMs/<span class="variable">$&#123;scheme&#125;</span>.app.dSYM.zip</span><br><span class="line">xcrun dwarfdump --uuid ./<span class="variable">$&#123;scheme&#125;</span> &gt;&gt; ./uuids-<span class="variable">$&#123;version&#125;</span>.txt</span><br></pre></td></tr></table></figure>
<p>å€¼å¾—è¯´çš„æ˜¯ï¼Œå¦‚æœä¸Šé¢çš„æŠ¥é”™ï¼Œé‚£ä¹ˆæ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯è·¯å¾„ä»€ä¹ˆçš„å†™é”™äº†ã€‚ã€‚ã€‚</p>
<p>å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œå¯ä»¥åœ¨<a href="../../about">å…³äº</a>ä¸­æ‰¾åˆ°æˆ‘ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;../ios-automation-jenkins-configuration&quot;&gt;iOSè‡ªåŠ¨åŒ–-Jenkinsç¯å¢ƒæ­å»º&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;../ios-automation-jenkins-build&quot;&gt;iOSè‡ªåŠ¨åŒ–-Jenkinsç¼–è¯‘å·¥ç¨‹&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ä»‹ç»&quot;&gt;&lt;a href=&quot;#ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;ä»‹ç»&quot;&gt;&lt;/a&gt;ä»‹ç»&lt;/h2&gt;&lt;p&gt;Jenkinsç¯å¢ƒå·²æ­å»ºå¥½ï¼Œç°åœ¨æˆ‘ä»¬æ¥å¼€å§‹æ„‰å¿«çš„ä¸ºiOSæ‰“åŒ…å§ï½&lt;/p&gt;
&lt;p&gt;ä»è¿™ä¸ªæ–‡ç« ä¸­ä½ å°†è¦å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨Jenkinsåˆ›å»ºå·¥ç¨‹&lt;/li&gt;
&lt;li&gt;buildå‡ºipa&lt;/li&gt;
&lt;li&gt;å°†ipaä¸Šä¼ è‡³fir&lt;/li&gt;
&lt;li&gt;é’‰é’‰æœºå™¨äººç¾¤é€šçŸ¥&lt;/li&gt;
&lt;li&gt;å°†dsymä¸Šä¼ è‡³bugly&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="iOS" scheme="https://madordie.github.io/categories/iOS/"/>
    
    
      <category term="æ„å»º" scheme="https://madordie.github.io/tags/%E6%9E%84%E5%BB%BA/"/>
    
      <category term="Jenkins" scheme="https://madordie.github.io/tags/Jenkins/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•å®ç°AppStoreæŸ¥çœ‹æ›´å¤šçš„æ–¹æ³•</title>
    <link href="https://madordie.github.io/post/appstore-truncate/"/>
    <id>https://madordie.github.io/post/appstore-truncate/</id>
    <published>2017-09-14T03:46:18.000Z</published>
    <updated>2017-10-10T05:34:54.502Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h2 id="UITextView-More"><a href="#UITextView-More" class="headerlink" title="UITextView-More"></a><a href="https://github.com/madordie/UITextView-More" target="_blank" rel="noopener">UITextView-More</a></h2><p>ä½¿ç”¨UITextKit å®ç°â€œæ›´å¤šâ€çš„æŠ˜å æ•ˆæœ</p>
<p><img src="https://github.com/madordie/UITextView-More/blob/master/Untitled.gif?raw=true" alt="é¢„è§ˆ"></p>
<a id="more"></a>
<h2 id="ä¸»è¦ä»£ç "><a href="#ä¸»è¦ä»£ç " class="headerlink" title="ä¸»è¦ä»£ç "></a>ä¸»è¦ä»£ç </h2><h3 id="è·å–æœ€åä¸€è¡ŒRect"><a href="#è·å–æœ€åä¸€è¡ŒRect" class="headerlink" title="è·å–æœ€åä¸€è¡ŒRect"></a>è·å–æœ€åä¸€è¡ŒRect</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lastRect = <span class="type">CGRect</span>.zero</span><br><span class="line">layoutManager.enumerateEnclosingRects(forGlyphRange: <span class="type">NSRange</span>(location: <span class="number">0</span>, length: textStorage.string.characters.<span class="built_in">count</span>), withinSelectedGlyphRange: <span class="type">NSRange</span>(location: <span class="type">NSNotFound</span>, length: <span class="number">0</span>), <span class="keyword">in</span>: textContainer, using: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (rect, isStop) <span class="keyword">in</span></span><br><span class="line"><span class="keyword">guard</span> <span class="keyword">let</span> _self = <span class="keyword">self</span> <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line"><span class="keyword">var</span> newRect = rect</span><br><span class="line">newRect.origin.y += _self.textContainerInset.top</span><br><span class="line">lastRect = newRect</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">print</span>(lastRect)</span><br></pre></td></tr></table></figure>
<h3 id="å¢åŠ -exclusionPaths"><a href="#å¢åŠ -exclusionPaths" class="headerlink" title="å¢åŠ  exclusionPaths"></a>å¢åŠ  <code>exclusionPaths</code></h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">textContainer.exclusionPaths = [<span class="type">UIBezierPath</span>.<span class="keyword">init</span>(rect: rect)]</span><br></pre></td></tr></table></figure>
<h2 id="å¤‡æ³¨"><a href="#å¤‡æ³¨" class="headerlink" title="å¤‡æ³¨"></a>å¤‡æ³¨</h2><ul>
<li><code>UITextView</code>é»˜è®¤æºå¸¦å·¦å³è¾¹è·ï¼Œé€šè¿‡<code>UITextView.textContainer.lineFragmentPadding</code>è·å–</li>
<li><code>UITextView</code>é»˜è®¤æºå¸¦ä¸Šä¸‹å·¦å³è¾¹è·(<code>UITextView.textContainerInset</code>)ï¼Œå…¶ä¸­å·¦å³å’Œ<code>lineFragmentPadding</code>ç›¸åŠ </li>
<li>æ­¤å¤„å¹¶æ²¡æœ‰å¯¹<a href="https://github.com/madordie/UITextView-More/blob/master/TruncateTextView.swift" target="_blank" rel="noopener">TruncateTextView</a>è¿›è¡Œè¿‡å¤šçš„è®¾ç½®ï¼Œä¸»è¦æ˜¯å› ä¸ºç»§æ‰¿åœ¨UITextViewä¸‹ï¼Œ<a href="https://github.com/madordie/UITextView-More/blob/master/Untitled.gif" target="_blank" rel="noopener">GIF</a>ä¸­çš„è¿™éƒ¨åˆ†è®¾ç½®æ”¾åœ¨äº†<a href="https://github.com/madordie/UITextView-More/blob/master/Demo-AppStore-More/ViewController.swift" target="_blank" rel="noopener">ViewController.swift</a>ä¸­</li>
<li>æ­¤å¤„ä½¿ç”¨çš„æ˜¯<code>frame</code>ï¼Œå¯ä»¥åœ¨<code>UIView.sizeToFit()</code>ä¹‹åè·å–åˆ°<code>UIView</code>çš„<code>Size</code>ã€‚çº¦æŸä¹Ÿå¤§æŠµå¦‚æ­¤</li>
</ul>
<hr>
<ul>
<li>æ„Ÿè°¢<a href="https://github.com/lexiaoyao20" target="_blank" rel="noopener">ä¹é€é¥</a>æä¾›çš„ä¾‹å­ï¼Œæ‰æ‰¾åˆ°äº†<code>open func truncatedGlyphRange(inLineFragmentForGlyphAt glyphIndex: Int) -&gt; NSRange</code>æ–¹æ³•ğŸ˜‚</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;UITextView-More&quot;&gt;&lt;a href=&quot;#UITextView-More&quot; class=&quot;headerlink&quot; title=&quot;UITextView-More&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://github.com/madordie/UITextView-More&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;UITextView-More&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨UITextKit å®ç°â€œæ›´å¤šâ€çš„æŠ˜å æ•ˆæœ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://github.com/madordie/UITextView-More/blob/master/Untitled.gif?raw=true&quot; alt=&quot;é¢„è§ˆ&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="https://madordie.github.io/categories/iOS/"/>
    
    
      <category term="æ•ˆæœ" scheme="https://madordie.github.io/tags/%E6%95%88%E6%9E%9C/"/>
    
  </entry>
  
  <entry>
    <title>iOSè‡ªåŠ¨åŒ–-Jenkinsç¯å¢ƒæ­å»º</title>
    <link href="https://madordie.github.io/post/ios-automation-jenkins-configuration/"/>
    <id>https://madordie.github.io/post/ios-automation-jenkins-configuration/</id>
    <published>2017-09-10T01:49:32.000Z</published>
    <updated>2018-09-30T03:21:41.241Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><ul>
<li><a href="../ios-automation-jenkins-configuration">iOSè‡ªåŠ¨åŒ–-Jenkinsç¯å¢ƒæ­å»º</a></li>
<li><a href="../ios-automation-jenkins-build">iOSè‡ªåŠ¨åŒ–-Jenkinsç¼–è¯‘å·¥ç¨‹</a></li>
</ul>
<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><blockquote>
<p> <strong>Jenkins</strong><br><em>Build great things at any scale</em><br>The leading open source automation server, Jenkins provides hundreds of plugins to support building, deploying and automating any project.</p>
</blockquote>
<p>å¦‚<a href="https://jenkins.io" target="_blank" rel="noopener">å®˜ç½‘</a>æ‰€è¯´<code>Build great things at any scale</code></p>
<p>ä»è¿™ç¯‡æ–‡ç« ä¸­ä½ å°†ä¼šå®ç°ï¼š</p>
<ul>
<li>åœ¨Macä¸Šå¤šç§æ–¹æ¡ˆå®‰è£…å¹¶å¯åŠ¨jenkins</li>
<li>åœ¨å±€åŸŸç½‘ä¸­æ­£å¸¸è®¿é—®jenkins</li>
</ul>
<a id="more"></a>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>å½“ç„¶ä½ é¦–å…ˆéœ€è¦ä¸€ä¸ªmacOSçš„ç³»ç»Ÿï¼Œä¸ºåæ¥çš„æ„å»ºåšåŸºç¡€ã€‚</p>
<p>Jenkinsä¸­å¯ä»¥ä½¿ç”¨<code>pkg</code>ã€<code>war</code>çš„æ–¹å¼è¿è¡Œï¼Œå½“ç„¶è¿˜æœ‰åœ¨<a href="https://jenkins.io/doc/book/getting-started/installing/" target="_blank" rel="noopener">Installing Jenkins</a>ä¸­æä¾›ä¸€äº›å®‰è£…æ–¹å¼ï¼š</p>
<blockquote>
<p> <strong>macOS</strong><br>To install from the website, using a package:</p>
</blockquote>
<blockquote>
<ul>
<li>Download the latest package</li>
<li>Open the package and follow the instructions</li>
</ul>
</blockquote>
<blockquote>
<p>Jenkins can also be installed using brew:</p>
</blockquote>
<blockquote>
<ul>
<li>Install the latest release version<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install jenkins</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Install the LTS version<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install jenkins-lts</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<p>è¿™é‡Œä½¿ç”¨<code>brew</code>ï¼Œå› ä¸º<strong>å¾ˆæ–¹ä¾¿</strong>ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…</span></span><br><span class="line">$ brew update &amp;&amp; brew install jenkins</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°</span></span><br><span class="line">$ brew update &amp; brew upgrade jenkins</span><br><span class="line"></span><br><span class="line"><span class="comment"># åå°è¿è¡Œ è¿˜æ”¯æŒ`stop`ã€`restart`ç­‰ (è¿™ç§æ–¹å¼è¿˜æ˜¯æœ‰å·®åˆ«çš„ï¼Œä¸‹é¢ä¼šè¯´æ˜)</span></span><br><span class="line">$ brew services start jenkins</span><br></pre></td></tr></table></figure></p>
<h2 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h2><p>å»ºè®®å…ˆæ¥çœ‹ä¸€æ³¢<code>--help</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ jenkins --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>
<h3 id="æ–¹æ¡ˆä¸€"><a href="#æ–¹æ¡ˆä¸€" class="headerlink" title="æ–¹æ¡ˆä¸€"></a>æ–¹æ¡ˆä¸€</h3><p>ç›´æ¥è¿è¡Œ<code>jenkins</code>å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°æ—¥å¿—è¾“å‡ºï¼Œä½†æ˜¯ä¸èƒ½é€€å‡ºå‘½ä»¤ã€‚</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ jenkins</span><br></pre></td></tr></table></figure>
<p>ç»è¿‡æ¼«é•¿çš„åˆå§‹åŒ–ï¼Œä¼šå°†</p>
<ul>
<li><code>~/.jenkins</code>ç›®å½•ä½œä¸º<code>JENKINS_HOME</code></li>
<li><code>localhost:8080</code>ä½œä¸ºé»˜è®¤URL</li>
</ul>
<p>ç»ˆç«¯è¾“å‡º<code>Started initialization</code>ä¸€è¡Œä¹‹åå°±å¯ä»¥æ­£å¸¸æ‰“å¼€äº†ã€‚</p>
<p>åœ¨æµè§ˆå™¨æ‰“å¼€<a href="http://10.12.12.10:8080" target="_blank" rel="noopener">http://10.12.12.10:8080</a>å°±å¯ä»¥æ­£å¸¸åŠ è½½å•¦ï½</p>
<p>é€€å‡ºè¿è¡Œï¼š<code>control + C</code> ç»„åˆé”®ã€‚</p>
<h3 id="æ–¹æ¡ˆäºŒ"><a href="#æ–¹æ¡ˆäºŒ" class="headerlink" title="æ–¹æ¡ˆäºŒ"></a>æ–¹æ¡ˆäºŒ</h3><p>ç›´æ¥<code>open</code>ï¼Œçœ‹ä¸åˆ°æ—¥å¿—è¾“å‡ºï¼Œæ‰€å¯¹åº”çš„è¿è¡Œç¯å¢ƒå’Œæ–¹æ¡ˆä¸€ç›¸åŒã€‚</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ open /usr/<span class="built_in">local</span>/opt/jenkins/libexec/jenkins.war</span><br></pre></td></tr></table></figure>
<p>å‘½ä»¤ç»“æŸï¼Œç¨ç­‰ç‰‡åˆ»(åˆå§‹åŒ–ç›¸å…³ç›®å½•ã€ç¯å¢ƒ)ï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€<a href="http://10.12.12.10:8080" target="_blank" rel="noopener">http://10.12.12.10:8080</a>å°±å¯ä»¥æ­£å¸¸åŠ è½½å•¦ï½</p>
<h3 id="æ–¹æ¡ˆä¸‰"><a href="#æ–¹æ¡ˆä¸‰" class="headerlink" title="æ–¹æ¡ˆä¸‰"></a>æ–¹æ¡ˆä¸‰</h3><p>ä½¿ç”¨<code>brew</code>ç›´æ¥æŒ‚åœ¨åå°ä½œä¸ºæœåŠ¡è¿è¡Œèµ·æ¥</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo brew services start jenkins</span><br></pre></td></tr></table></figure>
<p><code>brew</code>è¿˜æä¾›å…¶ä»–çš„å‚æ•°ï¼Œæ¯”å¦‚è¯´<code>restart</code>ã€<code>list</code>ã€<code>stop</code> ç­‰ç­‰ã€‚</p>
<p>æ­¤æ–¹æ¡ˆå’Œä¸Šé¢çš„è¿è¡Œç¯å¢ƒæ˜¯ä¸ä¸€æ ·çš„ï¼Œä¼šæœ‰äº›æƒé™çš„å·®åˆ«ã€‚</p>
<h3 id="å…¶ä»–æ–¹æ¡ˆ"><a href="#å…¶ä»–æ–¹æ¡ˆ" class="headerlink" title="å…¶ä»–æ–¹æ¡ˆ"></a>å…¶ä»–æ–¹æ¡ˆ</h3><p>ä½¿ç”¨<code>launchctl</code>ã€<code>nohup</code> ç­‰å…¶ä»–æ–¹æ¡ˆè¿›è¡Œçš„åå°è¿è¡Œï¼ŒåŒæ–¹æ¡ˆä¸‰å·®ä¸å¤šã€‚</p>
<p>éœ€è¦è¯´çš„æ˜¯<code>launchctl</code>æ˜¯macOSä¸‹ç³»ç»Ÿæä¾›çš„åå°è¿è¡Œæ–¹æ¡ˆï¼Œ<code>brew</code>ç­‰ï¼Œå‡æ¥è‡ªäºæ­¤ã€‚</p>
<p>åœ¨<code>launchctl</code>åå°ä¸­éœ€è¦ä¸€ä¸ª<code>plist</code>ï¼Œä½†æ˜¯<code>brew</code>å·²ç»åšå¥½äº†ï¼Œæ”¾ç½®åœ¨<code>~/Library/LaunchAgents/homebrew.mxcl.jenkins.plist</code>ã€‚éœ€è¦è¯´çš„æ˜¯<code>launchctl</code>æ˜¯macOSä¸‹ç³»ç»Ÿæä¾›çš„åå°è¿è¡Œæ–¹æ¡ˆï¼Œ<code>brew</code>ç­‰ï¼Œå‡æ¥è‡ªäºæ­¤ï¼Œå…·ä½“çš„é…ç½®å‚æ•°éƒ½å’Œ<code>launchctl</code>ä¸€æ ·çš„ï¼Œæœç´¢ä¸€ä¸‹å¾ˆå¤šã€‚<code>brew</code>ä¸ºæˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†ä¸€ä¸ªï¼Œç›´æ¥ä½¿ç”¨<code>æ–¹æ¡ˆä¸‰</code>å°±è¡Œã€‚</p>
<p>å…·ä½“æ“ä½œå¯ä»¥Googleä¸€ä¸‹ï¼Œå¾ˆå¤šçš„ï½</p>
<h2 id="å®‰è£…å®Œæˆåçš„é…ç½®"><a href="#å®‰è£…å®Œæˆåçš„é…ç½®" class="headerlink" title="å®‰è£…å®Œæˆåçš„é…ç½®"></a>å®‰è£…å®Œæˆåçš„é…ç½®</h2><p>åœ¨Jenkinsåˆå§‹åŒ–å®Œæ¯•ä¸ºäº†éªŒè¯ç®¡ç†å‘˜èº«ä»½ï¼Œéœ€è¦å°†Jenkinsæœºå™¨ä¸Šçš„ä¸€ä¸ªå­—ç¬¦ä¸²è¾“å…¥åˆ°<a href="http://10.12.12.10:8080" target="_blank" rel="noopener">http://10.12.12.10:8080</a>ä¸­è¿›è¡ŒéªŒè¯ï¼Œå…·ä½“æ–‡ä»¶ç›®å½•åœ¨è¾“å…¥çš„ç•Œé¢å°±èƒ½çœ‹åˆ°ï¼Œä¸è¦å¤§æƒŠå°æ€ªã€‚</p>
<p>ä¹‹åå¼€å§‹é€‰æ‹©å®‰è£…æ’ä»¶ã€‚è¿™é‡Œå¯ä»¥é€‰æ‹©æ¨èçš„ï½ï½ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å‹¾é€‰ã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œè¿™é‡Œç›´æ¥é€‰æ‹©æ¨èçš„æ–¹æ¡ˆè¿›è¡Œå®‰è£…ã€‚</p>
<p>ç»è¿‡æ¼«é•¿çš„ç­‰å¾…ï¼Œç»ˆäºå°†æ’ä»¶å®‰è£…å®Œæ¯•ï¼Œå¹¶å¯åŠ¨äº†èµ·æ¥ï½ï½</p>
<p>Jenkinsæƒé™ï¼Œå—¯ï¼Œè¿™ä¸ªå¾ˆé‡è¦ï¼Œå¯ä»¥å»<code>ç³»ç»Ÿç®¡ç† -&gt; Configure Global Security</code>  ä¸­è¿›è¡Œè®¾ç½®ã€‚</p>
<p>æ¥ä¸‹æ¥å¼€å§‹å»é…ç½®å·¥ç¨‹å§ï¼ä¼ é€é—¨ï¼š<a href="../ios-automation-jenkins-build">iOSè‡ªåŠ¨åŒ–-Jenkinsç¼–è¯‘å·¥ç¨‹</a></p>
<h2 id="å¯èƒ½ä¼šç¢°åˆ°çš„é”™è¯¯"><a href="#å¯èƒ½ä¼šç¢°åˆ°çš„é”™è¯¯" class="headerlink" title="å¯èƒ½ä¼šç¢°åˆ°çš„é”™è¯¯"></a>å¯èƒ½ä¼šç¢°åˆ°çš„é”™è¯¯</h2><h3 id="Error-Permission-denied"><a href="#Error-Permission-denied" class="headerlink" title="Error: Permission denied - ***"></a>Error: Permission denied - ***</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ brew services start jenkins</span><br><span class="line">Error: Permission denied - ~/Library/LaunchAgents/homebrew.mxcl.jenkins.plist</span><br></pre></td></tr></table></figure>
<p>è¿™ç§å¾ˆæ˜æ˜¾<code>Permission denied</code>ï¼Œåœ¨å‘½ä»¤è¡Œå‰æ·»åŠ <code>sudo</code>ï¼Œç„¶åè¾“å…¥å¯†ç å³å¯ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo brew services start jenkins</span><br></pre></td></tr></table></figure>
<h3 id="æ–¹æ¡ˆäºŒåçš„åœ°å€å“ªé‡Œæ¥çš„ï¼Ÿ"><a href="#æ–¹æ¡ˆäºŒåçš„åœ°å€å“ªé‡Œæ¥çš„ï¼Ÿ" class="headerlink" title="æ–¹æ¡ˆäºŒåçš„åœ°å€å“ªé‡Œæ¥çš„ï¼Ÿ"></a><code>æ–¹æ¡ˆäºŒ</code>åçš„åœ°å€å“ªé‡Œæ¥çš„ï¼Ÿ</h3><p>è¿™é‡Œæ¨èçš„å®‰è£…æ–¹æ¡ˆæ˜¯<code>brew install jenkins</code></p>
<p>é€šè¿‡ä¸‹é¢çš„æ–¹å¼æ‰¾åˆ°<code>brew</code>å®‰è£…çš„ä½ç½®</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ brew services list</span><br><span class="line">Name       Status  User Plist</span><br><span class="line">beanstalkd stopped</span><br><span class="line">influxdb   stopped</span><br><span class="line">jenkins    started keith  ~/Library/LaunchAgents/homebrew.mxcl.jenkins.plist</span><br><span class="line">nginx      stopped</span><br><span class="line">sonarqube  stopped</span><br><span class="line">FDDdeiMac:~ FDD$ cat ~/Library/LaunchAgents/homebrew.mxcl.jenkins.plist</span><br><span class="line">...</span><br><span class="line">&lt;string&gt;/usr/<span class="built_in">local</span>/opt/jenkins/libexec/jenkins.war&lt;/string&gt;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h3 id="ç»™Jenkinsç»‘å®šä¸€ä¸ªIP"><a href="#ç»™Jenkinsç»‘å®šä¸€ä¸ªIP" class="headerlink" title="ç»™Jenkinsç»‘å®šä¸€ä¸ªIP"></a>ç»™Jenkinsç»‘å®šä¸€ä¸ªIP</h3><p>è®²é“ç†è¿™ä¸ªä¸åº”è¯¥åœ¨è¿™é‡ŒèŠçš„ğŸ˜‚ï¼Œä¸è¿‡è¿˜æ˜¯è¯´ä¸€ä¸‹å§ã€‚ã€‚</p>
<p>ä¸€èˆ¬å±€åŸŸç½‘ä¸­éƒ½æ˜¯ç›´æ¥è‡ªåŠ¨è·å–IPä¿¡æ¯çš„ä¹Ÿå°±æ˜¯DHCPï¼Œä½†æ˜¯Jenkinsæ€»æ”¹IPä¹Ÿä¸å¥½ã€‚ã€‚äºæ˜¯ç»‘å®šä¸€ä¸‹å§ã€‚</p>
<p>åœ¨mac ä¸­ <code>ç³»ç»Ÿåå¥½è®¾ç½® -&gt; ç½‘ç»œ</code> è®°å½•ä¸‹æ¥å½“å‰è·å–åˆ°çš„IPã€‚</p>
<p>åœ¨<code>é«˜çº§</code>ä¸­å°†<code>ä½¿ç”¨DHCP</code>ä¿®æ”¹ä¸º<code>ä½¿ç”¨DHCP(æ‰‹åŠ¨è®¾å®šåœ°å€)</code>ï¼Œç„¶åå°†ä¸Šé¢çš„åœ°å€å¡«è¿›å»å°±å¥½å•¦ï½</p>
<p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥æŒ‡å®šå…¶ä»–çš„åœ°å€ï¼Œåªè¦åˆ«äººæ²¡æœ‰å ç”¨ğŸ˜‚ï¼Œä½ å¼€å¿ƒå°±å¥½ï½</p>
]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;../ios-automation-jenkins-configuration&quot;&gt;iOSè‡ªåŠ¨åŒ–-Jenkinsç¯å¢ƒæ­å»º&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;../ios-automation-jenkins-build&quot;&gt;iOSè‡ªåŠ¨åŒ–-Jenkinsç¼–è¯‘å·¥ç¨‹&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ä»‹ç»&quot;&gt;&lt;a href=&quot;#ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;ä»‹ç»&quot;&gt;&lt;/a&gt;ä»‹ç»&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt; &lt;strong&gt;Jenkins&lt;/strong&gt;&lt;br&gt;&lt;em&gt;Build great things at any scale&lt;/em&gt;&lt;br&gt;The leading open source automation server, Jenkins provides hundreds of plugins to support building, deploying and automating any project.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚&lt;a href=&quot;https://jenkins.io&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;å®˜ç½‘&lt;/a&gt;æ‰€è¯´&lt;code&gt;Build great things at any scale&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä»è¿™ç¯‡æ–‡ç« ä¸­ä½ å°†ä¼šå®ç°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨Macä¸Šå¤šç§æ–¹æ¡ˆå®‰è£…å¹¶å¯åŠ¨jenkins&lt;/li&gt;
&lt;li&gt;åœ¨å±€åŸŸç½‘ä¸­æ­£å¸¸è®¿é—®jenkins&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="iOS" scheme="https://madordie.github.io/categories/iOS/"/>
    
    
      <category term="æ„å»º" scheme="https://madordie.github.io/tags/%E6%9E%84%E5%BB%BA/"/>
    
      <category term="Jenkins" scheme="https://madordie.github.io/tags/Jenkins/"/>
    
  </entry>
  
  <entry>
    <title>iOSé€†å‘-monkeydevå·¥å…·</title>
    <link href="https://madordie.github.io/post/reverse-ios-monkeydev/"/>
    <id>https://madordie.github.io/post/reverse-ios-monkeydev/</id>
    <published>2017-08-14T03:05:57.000Z</published>
    <updated>2018-01-02T10:39:33.212Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><blockquote>
<p>MonkeyDev wiki<br>è¿™æ˜¯ä¸€ä¸ªä¸ºè¶Šç‹±å’Œéè¶Šç‹±å¼€å‘äººå‘˜å‡†å¤‡çš„å·¥å…·ï¼Œä¸»è¦åŒ…æ‹¬å››ä¸ªæ¨¡å—:</p>
</blockquote>
<blockquote>
<p> Logos Tweak</p>
</blockquote>
<blockquote>
<p>ä½¿ç”¨theosæä¾›çš„logify.plå·¥å…·å°†<em>.xmæ–‡ä»¶è½¬æˆ</em>.mmæ–‡ä»¶è¿›è¡Œç¼–è¯‘ï¼Œé›†æˆäº†CydiaSubstrateï¼Œå¯ä»¥ä½¿ç”¨MSHookMessageExå’ŒMSHookFunctionæ¥Hook OCå‡½æ•°å’ŒæŒ‡å®šåœ°å€ã€‚</p>
</blockquote>
<blockquote>
<p>CaptainHook Tweak</p>
</blockquote>
<blockquote>
<p>ä½¿ç”¨CaptainHookæä¾›çš„å¤´æ–‡ä»¶è¿›è¡ŒOC å‡½æ•°çš„Hookï¼Œä»¥åŠå±æ€§çš„è·å–ã€‚</p>
</blockquote>
<blockquote>
<p>Command-line Tool</p>
</blockquote>
<blockquote>
<p>å¯ä»¥ç›´æ¥åˆ›å»ºè¿è¡Œäºè¶Šç‹±è®¾å¤‡çš„å‘½ä»¤è¡Œå·¥å…·</p>
</blockquote>
<blockquote>
<p>MonkeyApp</p>
</blockquote>
<blockquote>
<p>è¿™æ˜¯è‡ªåŠ¨ç»™ç¬¬ä¸‰æ–¹åº”ç”¨é›†æˆRevealã€Cycriptå’Œæ³¨å…¥dylibçš„æ¨¡å—ï¼Œæ”¯æŒè°ƒè¯•dylibå’Œç¬¬ä¸‰æ–¹åº”ç”¨ï¼Œæ”¯æŒPodç»™ç¬¬ä¸‰æ”¾åº”ç”¨é›†æˆSDKï¼Œåªéœ€è¦å‡†å¤‡ä¸€ä¸ªç ¸å£³åçš„ipaæˆ–è€…appæ–‡ä»¶å³å¯ã€‚</p>
</blockquote>
<a id="more"></a>
<hr>
<ul>
<li><a href="https://github.com/AloneMonkey/MonkeyDev/wiki" target="_blank" rel="noopener">MonkeyDev wiki</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;MonkeyDev wiki&lt;br&gt;è¿™æ˜¯ä¸€ä¸ªä¸ºè¶Šç‹±å’Œéè¶Šç‹±å¼€å‘äººå‘˜å‡†å¤‡çš„å·¥å…·ï¼Œä¸»è¦åŒ…æ‹¬å››ä¸ªæ¨¡å—:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt; Logos Tweak&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½¿ç”¨theosæä¾›çš„logify.plå·¥å…·å°†&lt;em&gt;.xmæ–‡ä»¶è½¬æˆ&lt;/em&gt;.mmæ–‡ä»¶è¿›è¡Œç¼–è¯‘ï¼Œé›†æˆäº†CydiaSubstrateï¼Œå¯ä»¥ä½¿ç”¨MSHookMessageExå’ŒMSHookFunctionæ¥Hook OCå‡½æ•°å’ŒæŒ‡å®šåœ°å€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;CaptainHook Tweak&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½¿ç”¨CaptainHookæä¾›çš„å¤´æ–‡ä»¶è¿›è¡ŒOC å‡½æ•°çš„Hookï¼Œä»¥åŠå±æ€§çš„è·å–ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Command-line Tool&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯ä»¥ç›´æ¥åˆ›å»ºè¿è¡Œäºè¶Šç‹±è®¾å¤‡çš„å‘½ä»¤è¡Œå·¥å…·&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;MonkeyApp&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™æ˜¯è‡ªåŠ¨ç»™ç¬¬ä¸‰æ–¹åº”ç”¨é›†æˆRevealã€Cycriptå’Œæ³¨å…¥dylibçš„æ¨¡å—ï¼Œæ”¯æŒè°ƒè¯•dylibå’Œç¬¬ä¸‰æ–¹åº”ç”¨ï¼Œæ”¯æŒPodç»™ç¬¬ä¸‰æ”¾åº”ç”¨é›†æˆSDKï¼Œåªéœ€è¦å‡†å¤‡ä¸€ä¸ªç ¸å£³åçš„ipaæˆ–è€…appæ–‡ä»¶å³å¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="iOS" scheme="https://madordie.github.io/categories/iOS/"/>
    
    
      <category term="é€†å‘" scheme="https://madordie.github.io/tags/%E9%80%86%E5%90%91/"/>
    
  </entry>
  
  <entry>
    <title>iOSé€†å‘-class-dumpå·¥å…·</title>
    <link href="https://madordie.github.io/post/reverse-ios-class-dump/"/>
    <id>https://madordie.github.io/post/reverse-ios-class-dump/</id>
    <published>2017-08-10T04:40:27.000Z</published>
    <updated>2017-10-09T04:57:22.749Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h2 id="å®‰è£…class-dump"><a href="#å®‰è£…class-dump" class="headerlink" title="å®‰è£…class-dump"></a>å®‰è£…class-dump</h2><p>å»<a href="http://stevenygard.com/projects/class-dump/" target="_blank" rel="noopener">stevenygard.com</a>ä¸‹è½½æœ€æ–°çš„åŒ…ã€‚</p>
<p>å°†åŒ…ä¸­çš„<code>class-dump</code>å¯æ‰§è¡Œæ–‡ä»¶å¤åˆ¶åˆ°<code>/opt/class-dump</code>ã€‚(æˆ‘çš„é€†å‘ç›¸å…³å·¥å…·å‡åœ¨è¿™ä¸‹é¢ğŸ˜‚ï¼‰</p>
<p>åœ¨<code>~/.base_profile</code>ä¸­æ·»åŠ <code>export PATH=/opt/class-dump:$PATH</code></p>
<p>è¿è¡Œ<code>source ~/.base_profile</code></p>
<p>æœ€åç¡®è®¤ä¸€ä¸‹å®‰è£…OK ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> class-dump --v</span></span><br><span class="line">class-dump 3.5 (64 bit) compiled Nov 16 2013 12:22:33</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h2><p>ä½¿ç”¨ä¸€ä¸ªè®°å½•ä¸€ä¸ªå§ï½</p>
<h3 id="ç”¨æ¥å¯¼å‡ºipa-decryptedå¤´æ–‡ä»¶"><a href="#ç”¨æ¥å¯¼å‡ºipa-decryptedå¤´æ–‡ä»¶" class="headerlink" title="ç”¨æ¥å¯¼å‡ºipa/.decryptedå¤´æ–‡ä»¶"></a>ç”¨æ¥å¯¼å‡º<code>ipa</code>/<code>.decrypted</code>å¤´æ–‡ä»¶</h3><p>æ­¤å¤„åªèƒ½å¯¼å‡ºæœªåŠ å¯†çš„<code>ipa</code>ï¼Œæˆ–è€…ç ¸è¿‡å£³çš„ã€‚<a href="../reverse-ios-dump-decrypted/">å…·ä½“ç ¸å£³è¿‡ç¨‹ä¼ é€é—¨</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ls WeChat.decrypted</span></span><br><span class="line">WeChat.decrypted</span><br><span class="line"><span class="meta">$</span><span class="bash"> class-dump -H WeChat.decrypted -o ./Headers/</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ls Headers</span></span><br><span class="line">Headers</span><br></pre></td></tr></table></figure>
<p>å³å¾—å¤´æ–‡ä»¶ç›®å½•ï¼š<code>Headers</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å®‰è£…class-dump&quot;&gt;&lt;a href=&quot;#å®‰è£…class-dump&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…class-dump&quot;&gt;&lt;/a&gt;å®‰è£…class-dump&lt;/h2&gt;&lt;p&gt;å»&lt;a href=&quot;http://stevenygard.com/projects/class-dump/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;stevenygard.com&lt;/a&gt;ä¸‹è½½æœ€æ–°çš„åŒ…ã€‚&lt;/p&gt;
&lt;p&gt;å°†åŒ…ä¸­çš„&lt;code&gt;class-dump&lt;/code&gt;å¯æ‰§è¡Œæ–‡ä»¶å¤åˆ¶åˆ°&lt;code&gt;/opt/class-dump&lt;/code&gt;ã€‚(æˆ‘çš„é€†å‘ç›¸å…³å·¥å…·å‡åœ¨è¿™ä¸‹é¢ğŸ˜‚ï¼‰&lt;/p&gt;
&lt;p&gt;åœ¨&lt;code&gt;~/.base_profile&lt;/code&gt;ä¸­æ·»åŠ &lt;code&gt;export PATH=/opt/class-dump:$PATH&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¿è¡Œ&lt;code&gt;source ~/.base_profile&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æœ€åç¡®è®¤ä¸€ä¸‹å®‰è£…OK ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; class-dump --v&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;class-dump 3.5 (64 bit) compiled Nov 16 2013 12:22:33&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="iOS" scheme="https://madordie.github.io/categories/iOS/"/>
    
    
      <category term="é€†å‘" scheme="https://madordie.github.io/tags/%E9%80%86%E5%90%91/"/>
    
  </entry>
  
</feed>
